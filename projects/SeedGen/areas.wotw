# This file defines all the requirements a player has to fulfill in order to reach a given pickup on the map.
# The pickup names and locations are defined in loc_data.csv.

# All pickups are tied to an anchor, a point on the map. The requirements listed under a pickup are what you need to get from that anchor to that pickup. For more details on this visit https://docs.google.com/document/d/1XAiL4GbyYGr2_PobxWajrOPO9kQ5UOSf4KrbI1rsOBM/view?usp=sharing

# Special Syntax:
# BreakWall=x: A wall or corruption with x Health is broken
# ShurikenBreak=x: A wall with x Health is broken from behind using Shuriken
# SentryJump=x: short for Energy=1, Sword OR Hammer
# Combat=x: An enemy has to be defeated. For a list of enemies visit https://docs.google.com/spreadsheets/d/1AE_ctym6WAwltGK-r6w58ARq0ym2MU4MzFiwg328kjM/view?usp=sharing

# requirement macros. must go at the top of the file!
requirement Weapon:
  moki: Sword OR Hammer

requirement DepthsLight:  # currently irrelevant since defeating mora requires flash in moki, just future proofing here
  moki: UpperDepths.ForestsEyes OR Flash
  gorlek: Bow=3  # should be good, right?

anchor Teleporters:  # teleporter access
  conn MidnightBurrows.Teleporter:
    moki: BurrowsTP, Keystone=2
    # okay, soooo: this TP frequently unlocks exactly 4 pickups (the vanilla keystones in that area)
    # It also makes a 4 keystone door available! Without the Keystone=2 line here, the seed generator
    # picks this path, unlocking 4 pickups, then immediately fills those with keystones and gets stuck
  conn MarshSpawn.Main:
    moki: MarshTP
  conn HowlsDen.Teleporter:
    moki: DenTP
  conn EastHollow.Teleporter:
    moki: HollowTP
  conn GladesTown.Teleporter:
    moki: GladesTP
  conn InnerWellspring.Teleporter:
    moki: WellspringTP
  conn WoodsEntry.Teleporter:
    moki: WestWoodsTP
  conn WoodsMain.Teleporter:
    moki: EastWoodsTP
  conn LowerReach.Teleporter:
    moki: ReachTP
  conn UpperDepths.Teleporter:
    moki: DepthsTP
  conn EastPools.Teleporter:
    moki: EastPoolsTP
  conn WestPools:
    moki: WestPoolsTP
  conn LowerWastes.WestTP:
    moki: WestWastesTP
  conn LowerWastes.EastTP:
    moki: EastWastesTP
  conn UpperWastes.NorthTP:
    moki: OuterRuinsTP
  conn WindtornRuins.RuinsTP:
    moki: InnerRuinsTP
  conn WillowsEnd.InnerTP:
    moki: WillowTP

anchor MarshSpawn.Main at -799, -4310:  # spawn location / inkwater well
  refill Full

  pickup MarshSpawn.RockHC: free
  pickup MarshSpawn.FirstPickupEX: free
  pickup MarshSpawn.GrappleHC:
    moki: Grapple, DoubleJump OR Launch
    gorlek:
      Grapple, Dash OR Bash OR Glide OR Sword OR Hammer  # An air combo is enough to get you from the ceiling plant into range of the lower hanging plant
      Bash, Launch, Damage=10
      Bash, Launch, DoubleJump, TripleJump OR Glide OR Sword OR Hammer
      Bash, Launch, Dash
      SentryJump=1, Launch, DoubleJump OR Dash  # just using the swordfloats was a bit precise
  pickup MarshSpawn.BridgeEX:
    moki:
      DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=1  # Grenade bash straight up from below
    gorlek:
      Bash  # jump the jumper
      Sword OR Hammer  # Long jump, upslash and neutral slashes are enough with both weapons
  pickup MarshSpawn.LongSwimEX:
    moki: Water
  pickup MarshSpawn.BurrowOre:
    moki:
      Water, Burrow, Bash, DoubleJump OR Glide OR Launch  # Bash for the exploding enemy
      Water, Burrow, Bash, Grenade=1, Dash
    gorlek: Water, Burrow, DoubleJump OR Dash OR Glide OR Launch OR Sword OR Hammer OR Damage=10
  pickup MarshSpawn.LifepactShard:
    moki, Regenerate, Damage=40, Combat=Hornbug+Bat+2xSandworm+2xLizard+3xSkeeto+SneezeSlug:
      Water, Burrow, DoubleJump OR Launch
      Water, Burrow, Dash, Bash, Grenade=1
  pickup MarshSpawn.PoolsPathEX:
    moki:
      DoubleJump, Bash, Glide
      Bash, Launch
    gorlek:
      DoubleJump, Bash, TripleJump OR Dash OR Sword OR Hammer OR Damage=10
      Bash, Dash, Damage=10, Sword OR Hammer  # While waiting for 3rd shot do two neutral slashes to stay in the air longer
      Bash, Glide, Damage=10, Sword OR Hammer  # While waiting for 3rd shot do two neutral slashes to stay in the air longer
      Launch, Damage=10, DoubleJump OR Dash OR Glide OR Sword

  conn Teleporters: free
  conn MarshSpawn.BrokenBridge: free
  conn MarshSpawn.PoolsBurrowsPath:
    moki:
      Water, Burrow, DoubleJump OR Glide OR Launch
      Water, Burrow, Dash, Bash, Grenade=1
    gorlek: Water, Burrow, DoubleJump OR Dash OR Glide OR Launch OR Sword OR Hammer OR Damage=10
  conn MarshPastOpher.MillView:
    moki: BreakWall=16
  conn PoolsApproach.LeftOfWheel:
    moki:
      Water, DoubleJump, Bash, Glide
      Water, Bash, Launch
    gorlek:
      Water, DoubleJump, Bash, TripleJump OR Dash OR Sword OR Hammer OR Damage=10
      Water, Bash, Dash, Damage=10, Sword OR Hammer  # While waiting for 3rd shot do two neutral slashes to stay in the air longer
      Water, Bash, Glide, Damage=10, Sword OR Hammer  # While waiting for 3rd shot do two neutral slashes to stay in the air longer
      Water, Launch, Damage=10, DoubleJump OR Dash OR Glide OR Sword

# checkpoint at -1021, -4305
# checkpoint at -1068, -4274

anchor MarshSpawn.BrokenBridge at -643, -4352:  # after dropping down the breaking bridge
  refill Checkpoint

  pickup MarshSpawn.ResilienceShard:
    moki: BreakWall=16
  pickup MarshSpawn.ResilienceOre:
    moki: BreakWall=16, Water
  pickup MarshSpawn.BashEC:
    moki: Bash OR Launch
    gorlek:
      SentryJump=1
      DoubleJump, TripleJump, Sword  # Use pogo of the slime to jump to the ledge
  pickup MarshSpawn.PreLupoEX: free
  pickup MarshSpawn.LupoMap: free

  conn MarshSpawn.CaveEntrance: free

anchor MarshSpawn.CaveEntrance at -588, -4393:  # before the door blocking regen tree
  refill Checkpoint

  state MarshSpawn.KeystoneDoor:
    moki: Keystone=2

  pickup MarshSpawn.LeverEC:  # the enemy here doesn't spawn sometimes
    moki:
      Grapple, DoubleJump, Bash
      Launch, Bash
      Grapple, Launch
      Bash, Grenade=1, DoubleJump
    gorlek:
      Grapple, Bash, Dash OR Glide  # both weapon float variants are rather awkward
      Bash, DoubleJump  # Lure the squonkey; if the door is there, you can alternatively jump from there
      SentryJump=1, DoubleJump, TripleJump  # not redundant due to the keydoor requirement later
      SentryJump=1, Bash
      MarshSpawn.KeystoneDoor, DoubleJump, TripleJump, Sword OR Hammer  # added opening the keydoor so that detailed knowledge of the ability locks near doors is not required
      Launch  # different ways to solve
    unsafe:
      SentryJump=1  # max height
      Bash  # Lure the Jumper, then bash off him

  conn MarshSpawn.DenApproach:
    moki: MarshSpawn.KeystoneDoor
  conn MarshSpawn.BrokenBridge:
    moki:
      DoubleJump OR Launch
      Bash, Grenade=1
    gorlek:
      Dash OR Sword
      Glide, Hammer
      SentryJump=1
      MarshSpawn.RainLifted, Bash  # enemy that only spawns at daytime
  conn MarshSpawn.Cave:
    moki: BreakWall=16

anchor MarshSpawn.Cave at -707, -4419:  # At Tokk in the Cave
  refill Checkpoint
  refill Health=1

  quest MarshSpawn.CaveKS:
    moki:
      DoubleJump, Dash OR Grapple
      Bash, DoubleJump OR Dash OR Glide OR Grapple
      Launch
      Combat=3xLizard  # go through the fight room
    gorlek: DoubleJump OR Bash OR Grapple  # basically the moki paths without assisting abilities

  quest MarshSpawn.TokkKeystoneQuest:
    moki: MarshSpawn.CaveKS

  pickup MarshSpawn.LeftTokkEX:
    moki: BreakWall=10
  pickup MarshSpawn.FightRoomEX:
    moki: BreakWall=10

  conn MarshSpawn.CaveEntrance:
    unsafe: Hammer  # break the wall from behind
  conn MarshSpawn.PoolsBurrowsPath:
    moki:
      DoubleJump, Dash OR Grapple
      Bash, DoubleJump OR Dash
      Bash, Grenade=1, Glide OR Grapple
      Launch
      Combat=3xLizard, DoubleJump OR Dash OR Launch  # go through the fight room
      Combat=3xLizard, Bash, Grenade=1  # go through the fight room
    gorlek:
      DoubleJump  # basically the moki path without assisting abilities
      Bash, Grenade=1  # basically the moki path without assisting abilities
      Combat=3xLizard, SentryJump=1  # go through the fight room, makes other sentryjump paths unnecessary
      # weapon floats maybe too precise for gorlek

# checkpoint at -845, -4438

anchor MarshSpawn.PoolsBurrowsPath at -898, -4436:  # the waypoint between pools, burrows and marsh
  refill Checkpoint
  refill Energy=1:
    unsafe: Weapon  # slightly out of sight

  quest MarshSpawn.CaveKS: free
  quest MarshSpawn.TokkTabletQuest:
    moki: MidnightBurrows.TabletQI, Bash, DoubleJump OR Dash OR Launch
    gorlek, MidnightBurrows.TabletQI:
      Bash, Glide OR Sword
      Bash, Grenade=1, Hammer, Damage=10  # dboost at the start, bashgrenade at the end
      Launch, Glide
      Launch, Damage=10, DoubleJump OR Dash OR Sword OR Hammer

  pickup MarshSpawn.CaveOre:
    moki:
      DoubleJump OR Launch
      Bash, Grenade=1
    gorlek: Sword OR Hammer
    unsafe: Sentry=1  # Not in gorlek cause it requires Sentry to get higher
  pickup MarshSpawn.BurrowOre:
    moki:
      Burrow, DoubleJump, Bash, Dash OR Glide OR Grenade=1
      Burrow, Bash, Launch
    gorlek:
      Burrow, Combat=Bat, DoubleJump OR Dash
      Burrow, Damage=10, DoubleJump OR Dash
      Burrow, Launch
      # could do a sentryjump into bashgrenade, but I heard that kind of thing is unwelcome ;P
    unsafe: Burrow, SentryJump=1  # max height
  pickup MarshSpawn.LifepactShard:
    moki: Regenerate, Damage=40, Combat=Hornbug+Bat+2xSandworm+2xLizard+3xSkeeto+SneezeSlug, Bash, DoubleJump OR Launch
  pickup MarshSpawn.BurrowsApproachLedgeEX:
    moki: Bash, DoubleJump OR Launch
    gorlek:
      Bash, Dash OR Glide
      # weapon floats with bash moved out of gorlek
      Launch, Glide
      Launch, Damage=10, DoubleJump OR Dash OR Sword OR Hammer
    unsafe:
      Bash, Sentry=3  # Use Sentry instead of DoubleJump
      Bash, Sword
      Bash, Hammer, Damage=10
  pickup MarshSpawn.CrusherSwimEX:
    moki: Water, WaterDash, Bash, DoubleJump OR Dash OR Launch
    gorlek:
      Water, WaterDash, Bash, Glide OR Sword
      Water, WaterDash, Hammer, Damage=10  # dboost at the start
      Water, WaterDash, Launch, Glide
      Water, WaterDash, Launch, Damage=10, DoubleJump OR Dash OR Sword OR Hammer
  pickup MarshSpawn.DamageTree:
    moki:
      Bash, DoubleJump, Glide
      Bash, Launch
    gorlek:
      Bash, DoubleJump OR Dash OR Glide OR Sword
      Bash, Grenade=1, Hammer, Damage=10  # dboost at the start, bashgrenade at the end

  conn MidnightBurrows.Teleporter:  # one of the bells is hard to reach in this sequence
    moki: Bash, DoubleJump OR Dash OR Launch
    gorlek:
      Bash, Glide
      Bash, Grenade=1, Sword
      Bash, Grenade=2, Hammer, Damage=10  # dboost at the start, bashgrenade at the end
      Bash, SentryJump=1, Sword
  conn MarshSpawn.Cave: free
  conn MarshSpawn.Main:
    moki:
      Water, Burrow, Bash, DoubleJump, Dash OR Glide
      Water, Burrow, Bash, Launch
    gorlek:
      Water, Burrow, Combat=Bat, DoubleJump OR Dash
      Water, Burrow, Damage=10, DoubleJump OR Dash
      Water, Burrow, Sword, Damage=10
      Water, Burrow, Hammer, Glide, Damage=10

# checkpoint at -954, -4355
# checkpoint at -1004, -4497
# checkpoint at -931, -4494

anchor MarshSpawn.DenApproach at -540, -4406:  # at regen tree
  state MarshSpawn.KeystoneDoor:
    moki, Keystone=2:
      DoubleJump, Dash, Bash, Glide  # not sorry
      Bash, Grenade=1
      Launch
      MarshSpawn.RainLifted, DoubleJump  # the platform only spawns once you lift the rain
    gorlek, Keystone=2:
      DoubleJump  # wrap around
      SentryJump=1  # can do one of a good sjump, a good positioning, pressing left quickly after the sentryjump or spending an extra energy
      MarshSpawn.RainLifted, Sword OR Hammer  # Use an upswing to get to the door
  state MarshSpawn.HowlBurnt:
    moki:
      DoubleJump OR Launch
      Dash, Glide
      Bash, Grenade=1
      WaterDash  # water always clean
    gorlek: Dash OR Sword OR Hammer

  pickup MarshSpawn.RegenTree: free
  pickup MarshSpawn.RecklessShard:
    moki, BreakWall=10:
      DoubleJump OR Launch
      Dash, Glide
      Bash, Grenade=1
    gorlek: BreakWall=10, Dash OR Sword OR Hammer

  conn HowlsDen.Entrance:
    moki, MarshSpawn.HowlBurnt:
      DoubleJump OR Launch
      Dash, Glide
      Bash, Grenade=1
      WaterDash  # water always clean
    gorlek: MarshSpawn.HowlBurnt, Dash OR Sword OR Hammer
  conn MarshSpawn.CaveEntrance:
    moki, MarshSpawn.KeystoneDoor:
      DoubleJump, Dash, Bash, Glide  # not sorry
      Bash, Grenade=1
      Launch
      MarshSpawn.RainLifted, DoubleJump  # the platform only spawns once you lift the rain
    gorlek, MarshSpawn.KeystoneDoor:
      DoubleJump  # wrap around
      SentryJump=1  # can do one of a good sjump, a good positioning, pressing left quickly after the sentryjump or spending an extra energy
      MarshSpawn.RainLifted, Sword OR Hammer  # Use an upswing to get to the door

# checkpoint at -500, -4395

anchor HowlsDen.Entrance at -376, -4413:  # Next to Mokk the Brave, but outside the bridge if Howl is still lurking
  state MarshSpawn.HowlBurnt: free

  quest MarshSpawn.FangQI:
    moki:
      DoubleJump OR Launch
      Bash, Dash                      # Bash off the enemy to get to the vine, then jump&dash right
    gorlek:
      Bash, Sword OR Hammer           # Bash off the enemy to get to the vine, then jump right. Sword/hammer upslash to cross the last gap
      Bash, Glide OR Grenade=1        # Bash off the enemy to get to the vine, then jump right. Glide/Bash+Grenade over the last gap
      Bash, Damage=10                 # Bash off the enemy to get to the vine, then jump right. Dboost the last gap
      SentryJump=1              # SentryJump to get over the initial jump, then jump right, use sword or hammer to get over last gap
    unsafe:
      Grenade=1, Damage=10            # Grenade jump to get to the vine, then jump right. Dboost the last gap.
      Grenade=2                       # Grenade jump to get to the vine, then jump right. Grenade jump the last gap.
  quest MarshSpawn.MokkFangQuest:
    moki: MarshSpawn.HowlBurnt, MarshSpawn.FangQI

  pickup MarshSpawn.FangEC:
    moki:
      DoubleJump, Dash                # Stick to the ceiling
      Launch
    gorlek:
      Bash, Grenade=1, Sword OR Hammer               # As above, but sword/hammer upslash to cross the last gap
      Bash, Grenade=1, DoubleJump OR Dash OR Glide   # Bash up off the enemy and Dash/Djump/Glide to the fang. Grenade+bash up from the fang
      Bash, Grenade=1, Damage=10      # As above, but take a dboost on the last gap
      Bash, Grenade=2                 # As above, but use bash grenade on the last gap
      SentryJump=2                    # SentryJump to get over the initial jump, then jump right, use sword/hammer to get over last gap, SentryJump to EC
      DoubleJump, TripleJump          # Stick to the ceiling
    unsafe:
      Grenade=2, DoubleJump            # Grenade jump to get to the vine, then jump right. Dboost the last gap. Grenade jump to EC.
  pickup MarshSpawn.RecklessShard:
    moki, MarshSpawn.HowlBurnt, BreakWall=10:
      DoubleJump OR Launch
      Bash, Grenade=1
    gorlek, MarshSpawn.HowlBurnt, BreakWall=10:
      SentryJump=1
      Dash
    unsafe, MarshSpawn.HowlBurnt, BreakWall=10:
      Bash                            # Long distance lure
      Spear=1                         # Uses small hitrise from spear to make the jump
      Sentry=1                        # As above but uses sentry
      Grenade=1                       # Grenade jump to get over initial gap
      Sword                           # Validator moved from Gorlek to unsafe do to precision
      Hammer                          # Validator moved from Gorlek to unsafe do to precision
  pickup HowlsDen.UpperEX:
    moki: MarshSpawn.HowlBurnt
  pickup HowlsDen.RightHC:
    moki: BreakWall=16

  conn HowlsDen.BoneBridge:
    moki: MarshSpawn.HowlBurnt
  conn MarshSpawn.DenApproach:
    moki, MarshSpawn.HowlBurnt:
      DoubleJump OR Launch
      Bash, Grenade=1
    gorlek, MarshSpawn.HowlBurnt:
      SentryJump=2
      Dash, Sword OR Hammer                     # Dash then upslash to gain the extra height needed on second jump
      Dash, Bash                      # Dash for first jump, bash off fronkey for second
    unsafe, MarshSpawn.HowlBurnt:
      Bash                            # Long distance lure for the first jump, simple lure for second
      Dash, Spear=1                   # Uses the small hitrise from spear to make the second jump
      Dash, Sentry=1                  # As above but uses sentry
      Grenade=2                       # Grenade jump to get over both gaps
      Hammer

# checkpoint at -298, -4388

anchor HowlsDen.BoneBridge at -371, -4468:  # After the long drop into Howl's Den
  refill Checkpoint

  state HowlsDen.KeystoneDoor:
    moki: Keystone=2
  state MarshSpawn.RainLifted: free  # the sword tree

  pickup HowlsDen.BoneOre:
    moki: Hammer OR Spear=1
  pickup HowlsDen.AboveDoorKS:
    moki: DoubleJump OR Launch
    gorlek:
      Dash
      Sword, Damage=10
      Bash, Damage=10                # Bash off the fronkey or slime to get to the unstable platform wall jump for the other two jumps
      SentryJump=1                   # SentryJump onto the unstable platform, hammer/sword stall to left wall, wall jump to pickup (mostly for hammer based seeds)
    unsafe:
      Grenade=2                      # Grenade jump onto the unstable platform then grenade jump to the pickup (requires some horizontal drifting)
  pickup HowlsDen.LeftHC:
    moki:
      HowlsDen.KeystoneDoor, Combat=SneezeSlug, BreakWall=20, DoubleJump OR Dash
      HowlsDen.KeystoneDoor, Bash, BreakWall=20, DoubleJump OR Dash
      HowlsDen.KeystoneDoor, BreakWall=20, Launch
    gorlek: HowlsDen.KeystoneDoor, BreakWall=20, Damage=10, Sword OR Hammer        # Possible with no damage but its much tighter, use sword combos to make the longer jumps
  pickup HowlsDen.RightHC:
    moki, HowlsDen.KeystoneDoor:
      BreakWall=16, BreakWall=16, BreakWall=20, DoubleJump OR Launch
      BreakWall=16, BreakWall=16, BreakWall=20, Dash, Bash, Grenade=1
    gorlek:
      BreakWall=16, BreakWall=20, Launch                                           # Follow door skip path with launch (done without opening the keystone door)
      HowlsDen.KeystoneDoor:
        BreakWall=16, BreakWall=16, BreakWall=20, Dash OR Glide
        BreakWall=16, BreakWall=16, BreakWall=20, Damage=10, Sword
        BreakWall=16, BreakWall=16, BreakWall=20, SentryJump=3                     # Questionable relevance for anything other than 1hitko given that a sword path exists
        BreakWall=16, BreakWall=16, BreakWall=20, Bash, Grenade=3, Damage=10       # Might be a bit precise for gorlek, pretty free with damage=20, grenade=2 works with 2 enemy manipulations
    unsafe:
      BreakWall=16, BreakWall=20, SentryJump=1, Hammer, DoubleJump                 # Hammer sentry jump to door skip platform, double jump up left wall, then dash/double jump across (done without opening the keystone door)
      BreakWall=16, BreakWall=20, SentryJump=2, Hammer, Dash                       # Hammer sentry jump to door skip platform, sentry jump again to get more height, then dash jump across (done without opening the keystone door)
      HowlsDen.KeystoneDoor:
        BreakWall=16, BreakWall=16, BreakWall=20, Damage=10, Hammer                # Combination of sideways hammer thrusts and hammer upthrusts to make the jumps required
        BreakWall=16, BreakWall=16, BreakWall=20, Bash, Grenade=2                  # Bash+Grenade the first jump, bash the slime off the wall and bash it again for second, Bash Grenade 3rd jump
        BreakWall=16, BreakWall=16, BreakWall=20, Grenade=4                        # Grenade jump for all jumps
  pickup HowlsDen.UpperEX:
    moki, HowlsDen.KeystoneDoor:
      # breaking one wall
      Launch, BreakWall=16
      # breaking all walls (this is good syntax!)
      BreakWall=16, BreakWall=16, BreakWall=16, DoubleJump
      BreakWall=16, BreakWall=16, BreakWall=16, Dash, Bash, Grenade=1
    gorlek:
      Launch                                                                       # Follow door skip path with launch (done without opening the keystone door)
      HowlsDen.KeystoneDoor:
        BreakWall=16, BreakWall=16, BreakWall=16, Dash OR Glide
        BreakWall=16, BreakWall=16, BreakWall=16, Damage=10, Sword
        BreakWall=16, BreakWall=16, BreakWall=16, SentryJump=4                     # Questionable relevance for anything other than 1hitko given that a sword path exists
        BreakWall=16, Bash, Grenade=4, Damage=10                                   # Might be a bit precise for gorlek, pretty free with damage=20
    unsafe:
      SentryJump=2, Hammer, DoubleJump                                             # Hammer sentry jump to door skip platform, double jump up left wall, sentry jump to pickup (done without opening the keystone door)
      SentryJump=3, Hammer, Dash                                                   # Hammer sentry jump to door skip platform, sentry jump again to get more height, then dash across, sentry jump to pickup (done without opening the keystone door)
      HowlsDen.KeystoneDoor:
        BreakWall=16, BreakWall=16, BreakWall=16, Damage=10, Hammer                # Combination of sideways hammer thrusts and hammer upthrusts to make the jumps required
        BreakWall=16, Bash, Grenade=2                                              # Bash+Grenade the first jump, bash the slime off the wall and bash it again for second, Bash Grenade 3rd jump, lure slime and bash off for 4th
        BreakWall=16, Grenade=5                                                    # Grenade jump for all jumps
  pickup HowlsDen.SwordTree: free
  pickup HowlsDen.MagnetShard:
    moki: BreakWall=10, BreakWall=16 OR Launch
  pickup HowlsDen.AboveTPEX:
    moki: BreakWall=16, BreakWall=10

  conn HowlsDen.Teleporter:
    moki: BreakWall=16
  conn HowlsDen.Entrance:
    moki, HowlsDen.KeystoneDoor, MarshSpawn.HowlBurnt:  # the path is blocked if howl fight is not done
      # breaking one wall
      Launch, BreakWall=16
      # breaking all walls (this is good syntax!)
      BreakWall=16, BreakWall=16, BreakWall=16, DoubleJump
      BreakWall=16, BreakWall=16, BreakWall=16, Dash, Bash, Grenade=1
    gorlek, MarshSpawn.HowlBurnt:
      Launch                                                                       # Follow door skip path with launch (done without opening the keystone door)
      HowlsDen.KeystoneDoor:
        BreakWall=16, BreakWall=16, BreakWall=16, Dash OR Glide
        BreakWall=16, BreakWall=16, BreakWall=16, Damage=10, Sword
        BreakWall=16, BreakWall=16, BreakWall=16, SentryJump=4                     # Questionable relevance for anything other than 1hitko given that a sword path exists
    unsafe, MarshSpawn.HowlBurnt:
      SentryJump=2, Hammer, DoubleJump                                             # Hammer sentry jump to door skip platform, double jump up left wall, sentry jump to pickup (done without opening the keystone door)
      SentryJump=3, Hammer, Dash                                                   # Hammer sentry jump to door skip platform, sentry jump again to get more height, then dash across, sentry jump to pickup (done without opening the keystone door)
      HowlsDen.KeystoneDoor:
        BreakWall=16, BreakWall=16, BreakWall=16, Damage=10, Hammer                # Combination of sideways hammer thrusts and hammer upthrusts to make the jumps required
        BreakWall=16, Grenade=6                                                    # Grenade jump for all jumps

# checkpoint at -511, -4479
# checkpoint at -476, -4441
# checkpoint at -446, -4436
# checkpoint at -404, -4450
# checkpoint at -407, -4434

anchor HowlsDen.Teleporter at -328, -4536:  # At the teleporter
  refill Full

  pickup HowlsDen.AboveTPEX:
    moki, BreakWall=10:
      DoubleJump OR Launch
      Bash  # bash the slime
    gorlek, BreakWall=10:
      Dash
      SentryJump=1
    unsafe, BreakWall=10:
      Grenade=1              # Grenade jump to platform
      Hammer                 # Very precise hammer upslash
      Sword
  pickup HowlsDen.LaserKS:
    moki:
      DoubleJump OR Dash OR Launch
      Bash, Grenade=1
    gorlek:
      SentryJump=1
    unsafe:
      Sword OR Hammer         # Can reach lever with air combos
      Bash                    # Luring or bashing the slime near the lever then bashing to the lever
      Grenade=1               # Grenade jump to platform
  # if someone manages to lower the platform, they'll manage to get over the gap as well. That's how it works in the base game, that's how it'll work here
  pickup HowlsDen.DoubleJumpEX:
    moki: Combat=Mantis+Lizard  # the game puts this before regen. It's why all the enemies drop tons of health

  conn Teleporters: free
  conn DenShrine:
    moki: Hammer OR Spear=1
  conn HowlsDen.DoubleJumpTreeArea:
    moki: Combat=Mantis+Lizard OR DoubleJump OR Dash OR Glide OR Launch
  conn HowlsDen.BoneBridge:
    unsafe: Hammer  # break a wall from behind

anchor DenShrine:
  refill Full
  pickup HowlsDen.CombatShrine:
    moki, Regenerate, Combat=Mantis+2xLizard+4xEnergyRefill+2xSneezeSlug+Mantis+Skeeto+4xEnergyRefill+7xSmallSkeeto+2xSkeeto+4xEnergyRefill+2xLizard+2xMantis:
      Damage=60
      Damage=40, Dash OR Bash OR Launch  # much better if you have good evasion
    unsafe: Combat=Mantis+2xLizard+4xEnergyRefill+2xSneezeSlug+Mantis+Skeeto+4xEnergyRefill+7xSmallSkeeto+2xSkeeto+4xEnergyRefill+2xLizard+2xMantis

# checkpoint at -514, -4549

anchor HowlsDen.DoubleJumpTreeArea at -555, -4552:  # At the Double Jump Tree
  pickup HowlsDen.DoubleJumpTree: free
  pickup HowlsDen.StickyShard: free  # origlow
  pickup HowlsDen.DoubleJumpEX:
    moki:
      DoubleJump, Bash  # not the most cooperative enemy, which is why there are assisting abilities
      Bash, Grenade=1, Dash OR Glide  # not the most cooperative enemy, which is why there are assisting abilities
      Launch
    gorlek:
      SentryJump=1                    # Sword combo from sticky shard to get over the initial gap
    unsafe:
      DoubleJump, TripleJump          # Triple jump from the right wall
      Grenade=2
      Bash

  conn HowlsDen.Teleporter:
    moki:
      DoubleJump
      Bash, Grenade=1, Dash OR Glide
      Launch
    gorlek:
      SentryJump=1                    # Sword combo from sticky shard to get over the initial gap
    unsafe:
      Sword                           # Sword combo from sticky shard to get over the initial gap
      Dash                            # As above but use Dash
      Glide                           # As above but use Glide
      Grenade=1                       # Grenade jump to get over initial gap

# checkpoint at -682, -4309

anchor MarshPastOpher.MillView at -596, -4293:  # Standing next to Opher, looking at the Millstone
  refill Checkpoint
  refill Energy=3:
    moki: Weapon  # to the left

  pickup MarshPastOpher.TrialLeftEX:
    moki: BreakWall=20, DoubleJump OR Dash OR Glide OR Launch
    gorlek:
      Sword OR Hammer  # Horizontal slash combo
      BreakWall=20, Damage=10
    unsafe: BreakWall=20, Sentry=1  # Use Sentry instead of DoubleJump

  conn OpherShop: free
  conn MarshPastOpher.TrialArea:
    moki: BreakWall=20
  conn MarshPastOpher.BowPath:
    moki: DoubleJump OR Dash OR Glide OR Launch
    gorlek: free
  conn MarshSpawn.Main:
    unsafe: Hammer OR Spear=1 OR ShurikenBreak=16  # break the wall from behind using clipping techniques
  conn MarshPastOpher.PoolsPathEast:
    gorlek: Water, Bash, Launch  # the enemies appear once you have water

# checkpoint at -603, -4316
# checkpoint at -573, -4339

anchor MarshPastOpher.TrialArea at -427, -4343:  # Next to the shrine
  refill Checkpoint
  refill Health=1:  # right below
    moki: DoubleJump OR Dash OR Glide OR Launch
    gorlek: free

  # state MarshPastOpher.TrialActivation:
  #   moki: Grapple, Dash OR Glide OR Launch
  #   gorlek: Grapple, DoubleJump OR Dash OR Glide OR Sword OR Hammer OR Damage=10
  #            Launch, DoubleJump OR Dash OR Damage=10
  #    unsafe: DoubleJump, TripleJump, Damage=10, Sword OR Glide  # Double Jump from the right wall to the small ledge under the spikes, then dmg boost to the wall on the left

  pickup MarshPastOpher.TrialLeftEX:
    moki:
      DoubleJump, Dash OR Glide
      Dash, Glide
      Grapple OR Launch
    gorlek:
      DoubleJump
      Damage=10, Dash OR Glide OR Sword OR Hammer
    unsafe: Sentry=1, Damage=10
  pickup MarshPastOpher.TrialOre: free
  pickup MarshPastOpher.TrialEC:
    moki: DoubleJump OR Dash OR Glide OR Launch
    gorlek:
      Sword  # Horizontal slashes
      Hammer, Damage=10
    unsafe: Hammer OR Sentry=1
  pickup MarshPastOpher.TrialHC:
    moki: Hammer OR Spear=1
    gorlek: Combat=Slug OR Bash OR Launch  # lure stomp
    unsafe: free  # lure stomp
  pickup MarshPastOpher.TrialRightEX:
    moki: DoubleJump OR Bash OR Launch  # bash uses the enemy
    gorlek:
      Sword  # Pogo the enemy
      SentryJump=1, Hammer
    unsafe:
      Dash

  conn MarshShrine: free
  conn MarshPastOpher.BowPath:
    moki, BreakWall=20:
      Bash, DoubleJump OR Dash OR Glide OR Grapple OR Launch
      Combat=Mantis+SneezeSlug, DoubleJump OR Dash OR Glide OR Grapple OR Launch
    gorlek, BreakWall=20:
      Bash, Sword OR Hammer
      Bash, Grenade=1
      Combat=Mantis+SneezeSlug, Sword OR Hammer
      Launch

anchor MarshShrine:
  refill Full
  pickup MarshPastOpher.CombatShrine:
    moki: Regenerate, Damage=20, Combat=2xSkeeto+2xEnergyRefill+Mantis+4xSmallSkeeto+2xEnergyRefill+Mantis+Skeeto
    unsafe: Combat=2xSkeeto+2xEnergyRefill+Mantis+4xSmallSkeeto+2xEnergyRefill+Mantis+Skeeto

anchor MarshPastOpher.BowPath at -494, -4294:  # checkpoint climbing up to Bow tree
  refill Checkpoint
  refill Health=1
  refill Energy=1:
    moki: Weapon

  pickup MarshPastOpher.SwingPoleEX:
    moki:
      Damage=10, DoubleJump OR Dash OR Glide OR Launch
      Damage=10, Bash, Grenade=2
    gorlek:
      DoubleJump OR Dash OR Glide OR Sword OR Hammer OR Launch  # it's notably harder to get without taking a hit. Up and/or Side combos with sword or hammer can make it to the horizontal branch from the launch pad.
      Bash, Grenade=1
    unsafe: Bash  # the mantis disappears if you die

  conn MarshPastOpher.BowApproach:
    moki: DoubleJump OR Launch
    gorlek:
      Dash OR Sword
      Bash, Grenade=2
    unsafe: Hammer OR Sentry=1
  conn MarshPastOpher.MillView:
    moki:
      DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=2
    gorlek:
      Sword OR Hammer
      Bash, Grenade=1
    unsafe: Bash  # befriend the slug
  conn MarshPastOpher.TrialArea:
    moki:
      BreakWall=20, DoubleJump OR Dash OR Glide OR Launch
      BreakWall=20, Bash, Grenade=1
    gorlek: BreakWall=20  # the one-way has 20 health as well, so there are no relevant shurikenbreak paths here

anchor MarshPastOpher.BowApproach at -490, -4245:  # On the right ledge above the scenic mill view
  refill Checkpoint
  refill Health=1

  pickup MarshPastOpher.SwingPoleEX:
    moki: Damage=10
    gorlek: free

  conn MarshPastOpher.BowPath: free
  conn MarshPastOpher.BowArea:
    moki:
      DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=1
    gorlek: Sword OR Damage=10
  conn MarshPastOpher.MillView:
    moki: Bash, Grenade=1  # this is the only non-redundant connection that will ever exist.
  conn MarshPastOpher.PoolsPathEast:
    moki:
      Bow=4, DoubleJump, Dash, Bash, Glide  # autoaim doesn't catch the second target, 2 is needed minimum
      Bow=4, Bash, Launch  # autoaim doesn't catch the second target, 2 is needed minimum
    gorlek:
      Bow=2, Bash, Launch  # the moki path, but without safety energy
      Bow=2, DoubleJump, Bash, TripleJump OR Dash OR Glide
      Launch, DoubleJump OR Dash OR Glide  # For the last part reset your Launch on the wall above the lantern
    unsafe:
      Bow=2, Bash, DoubleJump, Weapon

anchor MarshPastOpher.BowArea at -443, -4236:  # Ledge to the left of the pit with bow tree.
  refill Energy=1:
    moki: Weapon

  state MarshPastOpher.EyestoneDoor:
    moki: Keystone=2  # crosses where the water would usually be

  pickup MarshPastOpher.BowEC: free  # crosses where the water would usually be
  pickup MarshPastOpher.BowTree: free  # crosses where the water would usually be

  conn MarshPastOpher.UpperBowArea:
    moki:
      Combat=Skeeto, Bow=2, DoubleJump
      Launch
    gorlek:
      SentryJump=2 OR DoubleJump  # can kill the skeeto with your weapon if desired on the sentryjump path
      Combat=Skeeto, Bow=2, Dash OR Glide OR Sword OR Hammer
      Bash, Bow=2, Dash OR Glide OR Sword OR Hammer
      Bash, Grenade=2
  conn WestHollow.Entrance:
    moki: MarshPastOpher.EyestoneDoor  # crosses where the water would usually be
  conn MarshPastOpher.BowApproach:
    moki: DoubleJump OR Dash OR Launch
    gorlek: Bash OR Sword OR Damage=10
    unsafe: Glide

anchor MarshPastOpher.UpperBowArea at -437, -4211:  # Between the eyestones
  refill Checkpoint
  refill Energy=1:
    moki: Weapon

  pickup MarshPastOpher.LeftEyestone:
    moki: Combat=Skeeto, Bow=1
    gorlek: Bow=1
  pickup MarshPastOpher.RightEyestone:
    moki: Combat=Skeeto, Bow=1
    gorlek: Bow=1

  conn MarshPastOpher.BowArea: free
  conn MarshPastOpher.BowApproach: free

# checkpoint at -383, -4230

anchor MarshPastOpher.PoolsPathEast at -662, -4241:  # On the wood sticking out of the ledge at the top left of the large room with Opher
  refill Checkpoint
  refill Health=1:
    moki: Combat=Mantis+Bat
    gorlek: free
  refill Energy=3:
    moki: Weapon, Combat=Mantis+Bat
    gorlek: Weapon

  pickup MarshPastOpher.CeilingEX:  # the squonkey doesn't reappear if you respawn on this checkpoint
    moki:
      Bash, DoubleJump, Dash
      Launch
    gorlek:
      Bash, DoubleJump
      Bash, Grenade=1, Dash OR Sword OR Hammer
      SentryJump=1, DoubleJump OR Dash OR Sword
    unsafe:
      Bash, Dash              # Pretty precise to do without damage

  conn MarshPastOpher.PoolsPathMiddle:  # the squonkey doesn't reappear if you respawn on this checkpoint
    moki: Bash, DoubleJump OR Launch
    gorlek:
      Bash, Dash  # the bat is weird
      Combat=Bat, Launch, DoubleJump OR Dash
    unsafe:
      Bash, Glide
      Combat=Bat, Launch, Damage=10
  conn MarshPastOpher.MillView: free

anchor MarshPastOpher.PoolsPathMiddle at -709, -4181:  # Next to the breakable floor
  refill Checkpoint

  pickup MarshPastOpher.PoolsPathEC:
    moki:
      Bash, DoubleJump OR Dash OR Glide OR Grenade=1
      Launch
    gorlek:
      Bash
      SentryJump=1  # Sword should be fine for the enemy

  conn MarshPastOpher.PoolsPathWest:  # the squonkey doesn't reappear if you respawn on this checkpoint
    moki: Bash, DoubleJump OR Launch
    gorlek:
      Bash, Dash OR Glide
      Bash, Sword, Damage=10
      ShurikenBreak=20, Bash, Sword
      ShurikenBreak=20, Bash, Damage=10, Hammer OR Grenade=1
      ShurikenBreak=20, DoubleJump, Damage=10, TripleJump OR Dash OR Glide OR Sword OR Hammer
      ShurikenBreak=20, DoubleJump, TripleJump, Dash, Glide OR Sword  # enough tools to allow multiple approaches
      ShurikenBreak=20, Launch, DoubleJump OR Dash OR Bash OR Glide OR Sword OR Hammer OR Damage=10
    unsafe:
      Hammer, Bash                    # Fairly precise air combos needed
      Hammer, Sword, Bash             # Fairly precise air combos needed
  conn MarshPastOpher.PoolsPathEast:
    moki: Bash
    gorlek:
      Glide, DoubleJump OR Dash OR Launch
      Damage=10  # more other paths would exist, but seem difficult to do damageless themselves
    unsafe: DoubleJump OR Dash OR Glide OR Launch

# checkpoint at -740, -4168

anchor MarshPastOpher.PoolsPathWest at -803, -4187:  #  Right on top of MarshPastOpher.PoolsPathEX
  refill Checkpoint

  pickup MarshPastOpher.PoolsPathEX: free
  pickup PoolsApproach.MillPathHC:
    gorlek, ShurikenBreak=20:
      Water, WaterDash, DoubleJump OR Dash OR Glide OR Sword OR Hammer
      Water, Bash, Damage=20, DoubleJump OR Sword
      Water, Launch

  conn MarshPastOpher.PoolsPathMiddle:
    moki, BreakWall=20:
      DoubleJump, Bash, Dash OR Glide
      Bash, Grenade=1, Dash, Glide
      Launch, DoubleJump OR Dash OR Bash OR Glide
    gorlek:
      BreakWall=20:  # go above and open the shortcut
        DoubleJump, Bash, Sword OR Hammer OR Damage=10
        Dash, Bash, Glide OR Sword OR Hammer OR Damage=10
        Sword, Bash, Damage=10
        SentryJump=1, Hammer, Bash, Damage=10
        DoubleJump, TripleJump, Dash OR Glide OR Damage=10
        DoubleJump, TripleJump, SentryJump=1, Sword OR Hammer
        DoubleJump, Damage=10, Dash OR Glide OR Sword OR Hammer
        Dash, Damage=10, Sword OR Hammer
        Sword, Damage=10, SentryJump=1
        Bash, Grenade=1, DoubleJump OR Dash OR Damage=10
        Launch  # Reset Launch by hitting the ceiling
      Glide, DoubleJump, Hammer OR Spear=1  # go below and break the floor
      Glide, Dash, Hammer OR Spear=1  # go below and break the floor
    unsafe:
      SentryJump=1, Bash, Sword OR Hammer  # Hug the wall and the SentryJump, then horizontal slashes to the lantern; weapon breaks the wall
      Hammer, Damage=10, SentryJump=1  # hammer breaks the wall
  conn PoolsApproach.RightOfWheel:
    gorlek, ShurikenBreak=20:
      Water, Grapple, DoubleJump OR Dash OR Launch
      Water, Grapple, Damage=20, Glide OR Sword
      Water, Damage=20, DoubleJump, TripleJump, Dash OR Glide OR Sword OR Hammer
      Water, Launch, Glide OR Damage=20
      Water, Launch, DoubleJump, Dash
      Water, Launch, DoubleJump, Sword OR Hammer
      Water, Launch, Dash, Sword OR Hammer
    unsafe: ShurikenBreak=20, Water, Launch

region MidnightBurrows:
  moki: Danger=25
  gorlek: free
  unsafe: free

anchor MidnightBurrows.Teleporter at -945, -4582:  # At the teleporter
  refill Full

  pickup MidnightBurrows.LeftKS:
    moki: DoubleJump OR Dash OR Glide OR Launch
    gorlek: Sword OR Hammer OR Damage=15
  pickup MidnightBurrows.LupoMap:
    moki: Launch  # paths coming from the right side are on that anchor
    gorlek:
      Bash  # bait some shots
      DoubleJump, TripleJump
      DoubleJump, Dash, Sword OR Hammer

  conn Teleporters: free
  conn MidnightBurrows.Central:
    moki: DoubleJump OR Launch
    gorlek: Dash OR Bash OR Glide OR Sword OR Hammer

anchor MidnightBurrows.Central at -781, -4564:  # The ledge left of the big portal room
  refill Checkpoint

  state MidnightBurrows.KeystoneDoor:
    moki, Keystone=4:
      Bash, DoubleJump OR Dash OR Glide
      Launch
    gorlek: Keystone=4, Bash OR SentryJump=2
    unsafe: Keystone=4, DoubleJump, TripleJump, Damage=15
  state MidnightBurrows.Lever:
    moki:
      Glide
      DoubleJump, Dash
      Bash, DoubleJump OR Dash
      Launch, DoubleJump OR Dash OR Bash
    gorlek:
      Damage=15, DoubleJump OR Dash OR Bash OR Sword OR Hammer
      DoubleJump, Hammer OR TripleJump
      Dash, Hammer
      Launch
      Sword

  quest MidnightBurrows.TabletQI:
    moki, MidnightBurrows.KeystoneDoor:
      Bash, DoubleJump OR Dash OR Glide
      Launch
    gorlek: MidnightBurrows.KeystoneDoor, Bash OR SentryJump=2
    unsafe: MidnightBurrows.KeystoneDoor, DoubleJump, TripleJump, Damage=15

  pickup MidnightBurrows.LupoMap:
    moki: DoubleJump OR Dash OR Glide
    gorlek: free
  pickup MidnightBurrows.DeflectorShard:
    moki:
      Launch
      MidnightBurrows.Lever, DoubleJump, Dash OR Glide
    gorlek:
      DoubleJump, TripleJump
      MidnightBurrows.Lever, DoubleJump, Sword OR Hammer
      MidnightBurrows.Lever, Dash OR Glide
    unsafe:
      DoubleJump, Damage=15, Sword OR Hammer
      MidnightBurrows.Lever, DoubleJump
      MidnightBurrows.Lever, Damage=15, Sword OR Hammer
  pickup MidnightBurrows.LowerKS:
    moki:
      DoubleJump, Dash OR Glide
      Dash, Glide
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch, DoubleJump OR Dash OR Bash OR Glide
    gorlek:
      Glide
      Bash, Grenade=1, Sword OR Hammer OR Damage=15
      Bash, Damage=15, DoubleJump OR Dash OR Sword OR Hammer  # boost on the brambles below the keystone
      DoubleJump, Sword OR Hammer OR TripleJump
      Dash, Sword OR Hammer
      SentryJump=1 # use the sword for movement as well
      Launch
  conn MidnightBurrows.BelowUpperKS:
    moki: MidnightBurrows.Lever, Launch  # paths coming from the right side are on that anchor
    gorlek:
      MidnightBurrows.Lever, SentryJump=2, Dash OR DoubleJump OR Glide
      Launch
    unsafe:
      MidnightBurrows.Lever, SentryJump=2
      MidnightBurrows.Lever, SentryJump=1, DoubleJump, Damage=15
      MidnightBurrows.Lever, DoubleJump, Bash # use the slime
      Bash, Grenade=2, DoubleJump, TripleJump OR Damage=15  # resolves for both states / with MidnightBurrows.Lever bash the slime next to the last teleporter to get above it

  conn MidnightBurrows.Teleporter: free
  conn MidnightBurrows.East:
    moki:
      MidnightBurrows.Lever, DoubleJump OR Dash OR Glide
      Bash, Grenade=3, DoubleJump OR Dash OR Glide  # you never need the whole set, but this is for both states of portals lifted
      Launch
    gorlek:
      Bash, Grenade=1 # bash the lantern to reach the lever, grenade bash from there
      SentryJump=1  # use the sword to hover to the lever
    unsafe:
      MidnightBurrows.Lever, Sword OR Hammer

# checkpoint at -685, -4616
# checkpoint at -707, -4588
# checkpoint at -698, -4566

anchor MidnightBurrows.East at -597, -4549:  # At the wall connecting to Den
  refill Checkpoint

  pickup MidnightBurrows.RightKS: free
  conn MidnightBurrows.BelowUpperKS:
    moki:
      Combat=WeakSlug, DoubleJump, Glide
      Combat=WeakSlug, DoubleJump, Dash, Damage=15
      Launch, DoubleJump OR Dash OR Glide OR Damage=15
    gorlek:
      Glide, Combat=WeakSlug OR DoubleJump OR Dash
      Launch
      Sword, Damage=15
      DoubleJump, Dash OR Sword OR Hammer OR TripleJump
      Dash, Sword OR Hammer
    unsafe:
      DoubleJump
      Damage=15, Dash OR Hammer
  conn HowlsDen.DoubleJumpTreeArea:
    moki: BreakWall=10

anchor MidnightBurrows.BelowUpperKS at -724, -4524: # Just bellow the keystone, to avoid duplicating paths to Central and UpperKS
  pickup MidnightBurrows.UpperKS: free
  conn MidnightBurrows.Central: free
  # I believe connections up to here and then to the right would be always redundant currently?

region WestHollow:
  moki: Danger=20
  gorlek: free
  unsafe: free

anchor WestHollow.Entrance at -303, -4238:  # At Twillen
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  state WestHollow.UpperDrainLeverPulled:  # Lever that drains the first section of the hollow
    moki:
      Combat=2xSlug, BombSlug, Bow=3, DoubleJump OR Dash  # the camera only reliably moves to the tongues if you can kill the slugs
      Bash, Combat=BombSlug, Bow=1  # bashing up with the slug
      Bash, Combat=BombSlug, DoubleJump, Dash OR Glide  # bashing up with the slug
      Combat=BombSlug, DoubleJump, Dash, Glide
      Launch
    gorlek:
      Bow=2, DoubleJump OR Dash OR Glide OR Sword  # deal with the weird camera
      Bow=3, Damage=10  # deal with the weird camera
      Bash, Bow=1 OR DoubleJump OR Dash OR Glide OR Sword  # bait the bombslug
      DoubleJump, Sword  # Pogo the slime to get to the upper part or go the casual way using Sword slashes
      DoubleJump, TripleJump OR Dash
      DoubleJump, Glide, Damage=10
      SentryJump=1, Bow=1 OR DoubleJump OR Dash OR Glide OR Sword
    unsafe:
      SentryJump=1, Hammer
  state WestHollow.PurpleDoorOpen:
    moki, WestHollow.UpperDrainLeverPulled:
      Bow=1, DoubleJump, Dash
      Bow=1, Launch
      Bow=1, Bash, Grenade=1
    gorlek, WestHollow.UpperDrainLeverPulled:
      Bow=1, SentryJump=1, DoubleJump
      Bow=1, DoubleJump, TripleJump
      Bow=1, Glide, DoubleJump OR Dash
    unsafe, WestHollow.UpperDrainLeverPulled:
      Bow=1, DoubleJump, Sword OR Hammer

  pickup WestHollow.CrusherHC: free

  conn TwillenShop: free
  conn MarshPastOpher.BowArea:
    moki, MarshPastOpher.EyestoneDoor:
      DoubleJump OR Launch
      Bash, Grenade=1
    gorlek, MarshPastOpher.EyestoneDoor:
      Dash OR Glide OR Sword OR Hammer OR Damage=10  # Go through the lower part
  conn EastHollow.Teleporter:
    moki, WestHollow.PurpleDoorOpen:
      Combat=2xSlug, Bow=1, DoubleJump OR Dash  # the camera only reliably moves to the tongue if you can kill the slug
      DoubleJump, Dash OR Glide
      Bash, Combat=BombSlug OR DoubleJump OR Dash OR Glide  # bashing up with the slug
      Launch
    gorlek, WestHollow.PurpleDoorOpen:
      Bow=1, DoubleJump OR Dash OR Glide OR Sword OR Hammer OR Damage=10  # deal with the camera
      DoubleJump, TripleJump OR Sword
      SentryJump=1  # Go up to the moki, then poles and then jump down
      Bash  # bash the slime to get up
    unsafe, WestHollow.PurpleDoorOpen:
      Dash, Sword  # Easier with upslash
      Hammer, DoubleJump OR Dash  # Easier with upslash
      Hammer, Glide  # Press Glide then before reaching the wall upslash with Hammer and hold Glide again
  conn WestHollow.HollowDrainMiddle:
    moki: WestHollow.UpperDrainLeverPulled

anchor WestHollow.HollowDrainMiddle at -197, -4275:  # At the crystal below the purple eye
  refill Checkpoint
  refill Energy=3:
    moki: WestHollow.UpperDrainLeverPulled, Weapon
  refill Energy=1:  # no matter which direction you come to or go from here, you should be able to grab this crystal without having to go back
    moki: WestHollow.FullyDrained, Weapon

  # this anchor doesn't assume drained water because that should make it usable for weird dirty water swim paths
  pickup WestHollow.HiddenEC:
    moki: WestHollow.FullyDrained, BreakWall=10

  conn WestHollow.RockPuzzle:
    moki, WestHollow.UpperDrainLeverPulled:
      Bow=2, DoubleJump OR Dash
      DoubleJump, Dash
      Glide OR Launch
      # fully drained paths seem kind of irrelevant?
    gorlek, WestHollow.UpperDrainLeverPulled:
      Bow=2, Sword OR Hammer
      DoubleJump, TripleJump OR Sword OR Hammer
      Dash, Sword OR Hammer
      Damage=20  # dboost on the water if it's there and on the spikes of not
    unsafe, WestHollow.UpperDrainLeverPulled:
      Sword OR Hammer
  conn WestHollow.HollowDrainLower:
    moki: WestHollow.FullyDrained
  conn WestHollow.Entrance:
    moki, WestHollow.UpperDrainLeverPulled:
      DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=1
    gorlek, WestHollow.UpperDrainLeverPulled:
      Sword OR Hammer  # Hammer is a bit particular; you can use upslash and horizontal slashes instead

anchor WestHollow.RockPuzzle at -249, -4275:  # At the right ledge of the rock puzzle room
  refill Checkpoint
  refill Health=1
  refill Energy=3:
    moki: Weapon, DoubleJump OR Dash OR Bash OR Glide OR Launch
    gorlek: Weapon

  state WestHollow.RockPuzzleSolved:  # You can get the puzzle into some weird constellations, but teleporting out works in the worst cases
    moki, WestHollow.UpperDrainLeverPulled:
      Combat=Skeeto, Bow=4, DoubleJump OR Dash OR Glide
      Bow=4, Bash OR Launch
    gorlek, WestHollow.UpperDrainLeverPulled:
      Bow=1, SentryJump=1 OR Launch  # Get up to the rock and push it to use only one Bow shot
      Bow=1, Bash, Grenade=1  # Get up to the rock and push it to use only one Bow shot
      Combat=Skeeto, Bow=6  # Stand to the left of energy crystal, look up and aim for the target, minimum 4 shots needed

  pickup WestHollow.RockPuzzleEX:
    moki: WestHollow.FullyDrained
    unsafe: WestHollow.UpperDrainLeverPulled, Damage=100  # should probably be 40 damage considering the checkpoint?
  pickup WestHollow.HiddenEC:
    moki: WestHollow.FullyDrained, BreakWall=10

  conn WestHollow.FarLeftRoom:
    moki, WestHollow.UpperDrainLeverPulled, WestHollow.RockPuzzleSolved:
      Combat=Skeeto+Slug, Bow=1, DoubleJump OR Dash
      Bash OR Launch  # bashing off the skeeto
    gorlek, WestHollow.UpperDrainLeverPulled, WestHollow.RockPuzzleSolved:
      Combat=Skeeto+Slug, Bow=1, Glide OR Sword
      Combat=Skeeto, SentryJump=1
      DoubleJump, Combat=Slug OR Damage=10  # Jump to the left wall and wrap around to the top
    unsafe:
      Sword  # Pogo the skeeto
  conn WestHollow.HollowDrainMiddle:
    moki:
      WestHollow.UpperDrainLeverPulled, Launch, DoubleJump OR Dash OR Glide OR Bow=1
      WestHollow.FullyDrained, Bow=3, DoubleJump  # one for the slime, two for the tongues
      WestHollow.FullyDrained, Bash, Grenade=1
      WestHollow.FullyDrained, Launch
    gorlek:
      WestHollow.UpperDrainLeverPulled, DoubleJump, TripleJump  # Jump to the pole, then wrap around to the eye and jump to the ground
      WestHollow.UpperDrainLeverPulled, Launch
      WestHollow.FullyDrained, Bow=1, DoubleJump  # wrap around instead of using the other tongue
      WestHollow.FullyDrained, SentryJump=1, Sword OR Hammer  # After SentryJump you need horizontal slashes
      WestHollow.UpperDrainLeverPulled, WaterDash, Damage=20, DoubleJump, Bow=1, DoubleJump  # use the bow path if the water is gone
      WestHollow.UpperDrainLeverPulled, WaterDash, Damage=20, Dash, Bash, Grenade=1  # use the bashnade path if the water is gone
      WestHollow.UpperDrainLeverPulled, WaterDash, Damage=20, Dash, SentryJump=1, Sword OR Hammer  # use the sjump path if the water is gone
  conn WestHollow.HollowDrainLower:
    moki: WestHollow.FullyDrained

anchor WestHollow.FarLeftRoom at -357, -4284:  # ledge below and to the right of second drain lever
  refill Energy=3:  # fast respawning crystal
    moki: Weapon
  # energy crystal below not considered because it doesn't seem relevant for anything

  state WestHollow.FullyDrained:
    moki, WestHollow.UpperDrainLeverPulled:
      Bow=2, DoubleJump OR Dash OR Glide
      Launch
    gorlek, WestHollow.UpperDrainLeverPulled:
      Bow=1, SentryJump=1
      Bow=1, DoubleJump, Sword OR Hammer  # DoubleJump and upslash to get on the wall to the right
      Bow=1, Bash, Grenade=1
      Bow=2, Sword OR Hammer
      DoubleJump, TripleJump  # Jump off the exe to the left
      DoubleJump, Bash, Grenade=1, Damage=10, Dash  # You can jump on the top of the exe on the left and use BashGrenade
      Damage=20, WaterDash, DoubleJump OR Dash OR Glide OR Sword OR Hammer  # these paths aren't meaningful anymore if the water is gone, so this does not softlock

  pickup WestHollow.FarLeftEX:
    moki, WestHollow.FullyDrained:
      Bash OR Launch
      Bow=1, DoubleJump, Dash
    gorlek, WestHollow.FullyDrained:
      DoubleJump, TripleJump OR Dash OR Glide OR Sword OR Hammer OR Damage=10
      Bow=1, Dash  # there are more options, this was the most lenient
      SentryJump=1
  # backwards connection blocked by the door

# checkpoint at -356, -4306

anchor WestHollow.HollowDrainLower at -216, -4329:  # Next to the jumppad left of Lupo
  refill Checkpoint

  pickup WestHollow.QuickshotShard:
    moki, WestHollow.FullyDrained:  # middle water state can softlock this, so you have to be able to fully lower the water. DoubleJump is for lenience on the bowshot
      DoubleJump, Bow=1, Dash, Combat=2xSkeeto OR Bash
      DoubleJump, Bow=1, Launch
    gorlek, WestHollow.FullyDrained:  # middle water state can softlock this, so you have to be able to fully lower the water.
      Bow=1, Dash OR Launch
      Bow=1, Water, WaterDash  # opted against writing the equivalent dboost path because it would be more obscure
  pickup WestHollow.SwimEC:
    moki: Water
  pickup WestHollow.LupoMap:
    moki:  # All the path options here include a way to get past the enemy
      DoubleJump, Dash
      Bash  # bash off the slug
      Launch
    gorlek:  # All the path options here include a way to get past the enemy
      DoubleJump, TripleJump OR Sword OR Hammer  # all have alternate paths from the right or from below
      SentryJump=1
    unsafe:
      Sword  # Pogo the slug
  pickup WestHollow.BelowLupoEX:
    moki:  # All the path options here include a way to get past the enemies
      DoubleJump, Dash
      Launch
    gorlek:  # All the path options here include a way to get past the enemies
      DoubleJump, TripleJump OR Sword OR Hammer OR Damage=10
    unsafe:
      Damage=10, SentryJump=1, Sword
      Dash, Sword OR Hammer

  conn WestHollow.TrialApproach:
    moki, WestHollow.FullyDrained:  # middle water state can softlock this, so you have to be able to fully lower the water.
      Combat=Slug+2xSkeeto, DoubleJump, Dash OR Glide
      Combat=Slug+2xSkeeto+Hornbug, Dash, Glide
      Bash, Damage=10, DoubleJump OR Dash OR Glide  # bash off the skeetos
      Water, WaterDash, Combat=Slug, Combat=Hornbug OR DoubleJump
      Water, WaterDash, Bash
      Launch
    gorlek, WestHollow.FullyDrained:  # middle water state can softlock this, so you have to be able to fully lower the water.
      Combat=Slug+2xSkeeto, DoubleJump OR Dash OR Glide OR Sword
      Bash  # bash off the skeetos
      SentryJump=1
  conn WestHollow.DashApproach:
    moki: Combat=SneezeSlug OR DoubleJump OR Bash OR Launch
  # no backwards connection through the water

anchor WestHollow.TrialApproach at -155, -4298:  # after getting past the beetle, at the bottom of the shaft next to trial start
  refill Checkpoint

  pickup WestHollow.TrialHC:
    moki:  # middle water state can softlock this, so you have to be able to fully lower the water.
      Combat=Slug, DoubleJump, Dash OR Glide
      DoubleJump, Bash  # bash off the slug
      Launch
    gorlek:  # middle water state can softlock this, so you have to be able to fully lower the water.
      Combat=Slug, DoubleJump OR Dash
      Bash, DoubleJump OR Dash
      Combat=Slug, Damage=10, Glide OR Sword OR Hammer
      Bash, Damage=10, Glide

  conn WestHollow.HollowDrainLower:
    moki: WestHollow.FullyDrained

# checkpoint at -124, -4377

anchor WestHollow.DashApproach at -111, -4429:  # To the left of the lever door
  refill Checkpoint
  refill Energy=3:
    moki:
      Weapon
      Bow=1

  # state WestHollow.TrialActivation:
  #   moki, Combat=Slug:
  #     DoubleJump OR Dash OR Launch
  #     Bash, Grenade=1
  #  gorlek:
  #     Glide OR Sword OR Hammer
  #     SentryJump=1
  state WestHollow.DoorLever:  # The door blocking Dash area
    moki:
      Combat=Skeeto+Mantis+2xLizard+Hornbug, DoubleJump OR Dash
      Combat=Skeeto+Mantis+2xLizard+Hornbug, Bash, Grenade=1
      Bash, DoubleJump OR Dash
      Launch
    gorlek:
      DoubleJump OR Dash OR Bash
      Combat=Skeeto+2xLizard+Hornbug, Glide OR Sword OR SentryJump=1
    unsafe: Hammer

  conn WestHollow.HollowDrainLower:
    moki:
      Combat=Slug, DoubleJump, Dash
      Bash, Grenade=2, DoubleJump OR Dash
      Launch
    gorlek:
      SentryJump=3, Sword OR Hammer  # Possible with 2 SentryJumps
      Combat=Slug, DoubleJump, TripleJump OR Glide OR Sword OR Hammer  # Take the vanilla path up, but use Sword or Hammer slashes as a substitute to Dash/DoubleJump
      Bash, Grenade=2, Damage=10, Glide OR Sword
    unsafe:
      Dash, Sword OR Hammer  # Take the vanilla path up, but use Sword or Hammer slashes as a substitute to Dash/DoubleJump
  conn WestHollow.DashArea:
    moki: WestHollow.DoorLever

anchor WestHollow.DashArea at -88, -4423:  # To the right of the lever door
  refill Checkpoint

  pickup WestHollow.DashTree: free
  pickup WestHollow.CrusherEX:
    moki: Dash
    gorlek: Launch
  pickup WestHollow.DashRightEX:
    moki:
      DoubleJump, Dash
      Launch
    gorlek:
      DoubleJump, TripleJump, Damage=10, Bash, Grenade=1  # There are two ledges above the tree, stand on the right one, throw Grenade from there
      DoubleJump, TripleJump, Damage=10, SentryJump=1
      WestHollow.DoorLever, DoubleJump, TripleJump, Damage=10, Sword  # Lure and pogo the jumper
      WestHollow.DoorLever, DoubleJump, TripleJump, Damage=10, Bash  # Lure the mantis
      Dash, Bash, Grenade=2, Glide OR Sword OR Hammer OR Damage=10  # around the right
    unsafe:
      Damage=10, SentryJump=2, Dash, Sword OR Hammer
      SentryJump=2, DoubleJump, Damage=10, Sword OR Hammer  # Go up with the first SentryJump, then jump into spikes, SentryJump over and continue
  pickup WestHollow.AboveDashEX:
    moki:  # there's some funny Bashgrenade paths here, but they're not moki-safe
      DoubleJump, Dash
      Launch
    gorlek:
      DoubleJump, Bash, Grenade=1  # There are two ledges above the tree, stand on the right one, throw Grenade from there
      SentryJump=1
      Dash, Bash, Grenade=1, Glide OR Sword OR Hammer OR Damage=10  # around the right
      WestHollow.DoorLever, DoubleJump, Sword  # Lure and pogo the jumper
      WestHollow.DoorLever, Bash  # Lure the mantis
    unsafe:
      Dash, Damage=10, Sword OR Hammer  # Take the path right from the Dash tree

  # backwards connections pointless with the lever

# checkpoint at -21, -4411

region EastHollow:
  moki: Danger=20
  gorlek: free
  unsafe: free

anchor EastHollow.Teleporter at -150, -4238:  # the teleporter
  refill Full

  # paths through the purple door exist mainly because of historical reasons, but might be a candidate for future open mode as well
  state WestHollow.UpperDrainLeverPulled:  # Lever that drains the first section of the hollow
    moki, WestHollow.PurpleDoorOpen:
      Combat=Slug+BombSlug, Bow=1, DoubleJump OR Dash  # the camera only reliably moves to the tongue if you can kill the slug
      Combat=BombSlug, DoubleJump, Dash, Glide
      Launch

  conn Teleporters: free
  conn BeetleFight: free
  conn EastHollow.AboveBash:
    moki: EastHollow.BeetleDefeated, Combat=Mantis+Skeeto OR Bash OR Launch  # Didn't consider avoiding the beetle fight for moki, so this connection should cover all paths going up
    unsafe:
      Bash, DoubleJump OR Dash OR Glide
      Launch
  conn WestHollow.Entrance:
    moki, WestHollow.PurpleDoorOpen:
      WestHollow.UpperDrainLeverPulled OR Bow=1 OR DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=1
  conn WestHollow.HollowDrainMiddle:
    moki: WestHollow.PurpleDoorOpen, WestHollow.UpperDrainLeverPulled

anchor BeetleFight:
  refill Full
  state EastHollow.BeetleDefeated:
    moki: Boss=250, Regenerate, Damage=35, Dash OR Launch  # Kinda tight on assumed damage, but that's literally what the base game throws you at. It isn't too difficult to avoid the beetle's attacks without Dash, but this is what the base game taught.
    unsafe: Boss=250

# checkpoint at -106, -4221

anchor EastHollow.AboveBash at -28, -4233:  # At the breakable floor to Bash tree
  refill Checkpoint

  state EastHollow.DepthsLever:
    moki: Bash, DoubleJump OR Dash OR Glide OR Launch  # just Bash is treacherous
  state GladesTown.EntryWallBroken:  # for the shop unlocks
    moki: EastHollow.BeetleDefeated, EastHollow.Voice, Bash, DoubleJump OR Launch
    gorlek: EastHollow.Voice, Bash, DoubleJump OR Launch
    unsafe, EastHollow.Voice:
      Bash, Grenade=1
      Bash, Damage=10
    # Bash, EastHollow.BeetleDefeated, Sword  # Long Squonkey Lure using Bash Climbing
      Grenade=5, Damage=10, EastHollow.BeetleDefeated    # Grenade Redirect and Grenade Jumps

  quest EastHollow.HandToHandMap:
    moki, EastHollow.BeetleDefeated, EastHollow.Voice:
      Bash, DoubleJump OR Dash OR Glide
      Launch
    unsafe:
      Bash, DoubleJump OR Dash OR Glide
      Launch
      EastHollow.BeetleDefeated, DoubleJump, Dash, Glide

  pickup EastHollow.GladesApproachOre:
    moki: EastHollow.BeetleDefeated, EastHollow.Voice, Bash, DoubleJump OR Dash OR Glide OR Launch
    unsafe: EastHollow.Voice, Bash, DoubleJump OR Dash OR Glide OR Launch
  pickup EastHollow.HornBeetleFightEX:
    moki, EastHollow.BeetleDefeated:
      DoubleJump, Dash, Bash
      Bash, Grenade=1, DoubleJump OR Dash OR Glide  # the nearby skeeto loses interest in you if you go to the ledge below this pickup
      Launch
    unsafe:
      DoubleJump, Dash, Bash
      Bash, Grenade=1, DoubleJump OR Dash OR Glide  # the nearby skeeto loses interest in you if you go to the ledge below this pickup
      Launch
  pickup EastHollow.SpikeLanternEX:
    moki: DoubleJump, Bash  # there's a couple small awkward things adding up if you do this without Double Jump
  pickup EastHollow.SecretRoofEX:
    moki:
      Bash OR Launch
      Grapple, DoubleJump, Dash OR Glide
  pickup EastHollow.MortarEX:
    moki: Bash OR Launch  # Bash only needs some slight creativity, but there are many ways to solve it
  pickup EastHollow.BashEC:
    moki:
      Bash, DoubleJump, Dash
      Bash, Grenade=1
      Launch
    gorlek:
      SentryJump=3
  pickup EastHollow.BashTree:
    moki:
      Combat=2xSneezeSlug, DoubleJump OR Dash
      Bash, DoubleJump OR Dash
      Glide OR Launch
  pickup EastHollow.BashEX:
    moki:
      DoubleJump, Bash
      Launch

  conn BeetleFight: free
  conn EastHollow.Teleporter:
    moki, EastHollow.BeetleDefeated:
      DoubleJump, Dash
      Bash, DoubleJump OR Dash OR Grenade=1
      Glide OR Launch
  conn GladesTown.Teleporter:  # using the wall state here could have relevance if it was to fall under some open mode
    moki: EastHollow.BeetleDefeated, EastHollow.Voice, GladesTown.EntryWallBroken, Bash, DoubleJump OR Launch
    gorlek: EastHollow.Voice, GladesTown.EntryWallBroken
  conn EastHollow.AboveDepths:
    moki:
      EastHollow.DepthsLever, Combat=2xSneezeSlug, DoubleJump OR Dash OR Glide  # just Bash is treacherous
      EastHollow.DepthsLever, Bash, DoubleJump OR Dash OR Glide  # just Bash is treacherous
      EastHollow.DepthsLever, Launch
  conn EastHollow.Kwolok:
    moki:
      Bash, DoubleJump OR Dash OR Glide OR Launch
      Launch, DoubleJump, Dash OR Glide
      Launch, Dash, Glide

# checkpoint at 21, -4220

anchor EastHollow.Kwolok at 177, -4215:  # Between Ku and Kwolok
  refill Checkpoint

  state EastHollow.Voice: free

  quest EastHollow.KwolokAmuletQuest:
    moki: EastPools.KwolokAmuletQI, WestPools.ForestsStrength

  pickup EastHollow.RightKwolokEX:
    moki: Bash OR Launch
  pickup EastHollow.SilentSwimEC:
    moki: Water, WaterDash OR Launch
  pickup EastHollow.KwolokSwimOre:
    moki: Water, Bash OR Damage=10  # enemy in the way
  pickup EastHollow.KwolokSwimLeftEX:
    moki: Water, WaterDash OR Launch
  pickup EastHollow.KwolokSwimRightEX:
    moki: Water

  conn EastHollow.AboveBash:
    moki:  # since the ability culprit is right at the start, these should account for paths to the pickups on the way
      Bash, DoubleJump OR Dash OR Glide
      DoubleJump, Dash OR Glide
      Dash, Glide, Damage=10
      Launch
  conn WoodsEntry.ShriekMeet:
    moki:
      Water, Launch
      Water, Grapple, DoubleJump, Dash OR Glide
      Water, Grapple, Dash, Glide

# checkpoint at -8, -4327

anchor EastHollow.AboveDepths at 47, -4302:  # To the right of the lever door blocking Depths access
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  pickup EastHollow.BashHC:
    moki: Bash OR Launch
  pickup EastHollow.SplinterShard: free
  pickup EastHollow.DepthsExteriorEX:
    moki: Glide, Launch  # ...what even is intended here?

  conn UpperDepths.Entry:
    moki: Glide
  # backwards paths through the door seem pointless

anchor GladesTown.Teleporter at -307, -4153:  # The glades teleporter
  refill Full

  state GladesTown.BuildHuts:
    moki: Ore=15
  state GladesTown.RoofsOverHeads:
    moki: GladesTown.BuildHuts, Ore=21
  state GladesTown.OnwardsAndUpwards:
    moki: GladesTown.RoofsOverHeads, Ore=29
  state GladesTown.ClearThorns:
    moki: Ore=23
  state GladesTown.CaveEntrance:
    moki: GladesTown.ClearThorns, Ore=29
  # decoration not accounted for
  # state GladesTown.RatherPlay:  # talking to the Moki that allows to build decoration
  #   moki:
  #     Flap, Glide
  #     Launch
  #     TuleyShop.Lightcatchers, Bash:
  #       Grenade=1
  #       TuleyShop.BlueMoon, Grapple, DoubleJump OR Dash
  #       TuleyShop.StickyGrass, Grapple, DoubleJump OR Dash
  #       TuleyShop.SpringPlants
  #     TuleyShop.SpringPlants, DoubleJump
  #     GladesTown.RoofsOverHeads:
  #       Bash, Grenade=2
  #       TuleyShop.BlueMoon, Grapple, Bash, Grenade=1
  #       TuleyShop.SpringPlants, Bash, Grenade=1

  # silent woods map quest doesn't exactly make sense
  quest GladesTown.HandToHandPouch:
    moki: EastHollow.HandToHandMap
  quest GladesTown.RebuildTheGlades:
    moki: Ore=40  # Eiko told me not to modify this so orishrug ~Cosmic

  pickup GladesTown.UpdraftCeilingEX:
    moki:
      Flap, Glide
      Bash, Grenade=1, DoubleJump
      Launch
      TuleyShop.Lightcatchers, Bash, Grenade=1
      TuleyShop.BlueMoon, DoubleJump, Grapple
      TuleyShop.BlueMoon, TuleyShop.Lightcatchers, Bash, Grapple
      TuleyShop.SpringPlants, DoubleJump OR Dash OR Glide
      TuleyShop.SpringPlants, TuleyShop.Lightcatchers, Bash
    gorlek:
      DoubleJump, TripleJump
      Bash, Grenade=1, Hammer
      SentryJump=2
      SentryJump=1, DoubleJump OR Hammer
      TuleyShop.Lightcatchers, Bash, SentryJump=1
      TuleyShop.BlueMoon, Grapple, Hammer OR SentryJump=1
      TuleyShop.StickyGrass, TuleyShop.Lightcatchers, Bash, Grapple  # go up on bridge then drop down
      TuleyShop.SpringPlants, Sword OR Hammer
    unsafe:
      Bash, Grenade=2  # for kii
      SentryJump=1, Sword  # sentry jump into the exp
      Grenade=1, Sword     # Grenade Pogos
      Grenade=2            # Grenade Jumps
      TuleyShop.SpringPlants, Grenade=1 OR Sword
      TuleyShop.BlueMoon, Grapple, Sword
  pickup GladesTown.AboveTpEX:
    moki:
      Launch  # probably fine?
      TuleyShop.Lightcatchers, Bash:
        Grenade=1
        DoubleJump, Flap, Glide
        TuleyShop.StickyGrass, Grapple
        TuleyShop.BlueMoon, DoubleJump, Grapple
        TuleyShop.SpringPlants, DoubleJump
    gorlek:
      DoubleJump, TripleJump
      TuleyShop.Lightcatchers, Bash:
        Flap, Glide  # bashglide over to the other side
        SentryJump=1
        TuleyShop.BlueMoon, Grapple, Dash OR Glide
        TuleyShop.SpringPlants, Dash OR Glide
    unsafe:
      DoubleJump, Sword
      Bash, Grenade=2, Sword    # hard strat
      Bash, Grenade=2, Dash     # completely different strat, hence separation from Bash Grenade=2 Sword
      Grenade=3, DoubleJump     # Midair Grenade Jumps
      SentryJump=2, Sword       # Midair Sentry Jumps
      TuleyShop.StickyGrass, Grapple, DoubleJump  # hard jump
  pickup GladesTown.BountyShard:
    moki:
      Launch  # probably fine?
      TuleyShop.Lightcatchers, Bash:
        Grenade=1
        DoubleJump, Flap, Glide
        TuleyShop.StickyGrass, Grapple
        TuleyShop.BlueMoon, DoubleJump, Grapple
        TuleyShop.SpringPlants, DoubleJump
    gorlek:
      DoubleJump, TripleJump
      SentryJump=2, Sword, DoubleJump
      Bash, Grenade=3, Dash, DoubleJump OR Glide
      TuleyShop.Lightcatchers, Bash:  # paths are the exact same because you can get up to the shard using the lightcatcher on the right and nothing else
        Flap, Glide  # bashglide over to the other side
        SentryJump=1
        TuleyShop.BlueMoon, Grapple, Dash OR Glide
        TuleyShop.SpringPlants, Dash OR Glide
    unsafe:
      DoubleJump, Sword
      Bash, Grenade=3, Sword    # hard strat
      Bash, Grenade=3, Dash     # completely different strat, hence separation from Bash Grenade=3 Sword
      Grenade=3, DoubleJump     # Midair Grenade Jumps
      SentryJump=3, Sword       # Midair Sentry Jumps
      TuleyShop.StickyGrass, Grapple, DoubleJump  # hard jump
  pickup GladesTown.ArcingShard:
    moki, GladesTown.ClearThorns:
      Bash, Grenade=1  # probably fine?
      Launch
      TuleyShop.Lightcatchers, Bash, DoubleJump OR Dash OR Glide
    gorlek, GladesTown.ClearThorns:
      SentryJump=1, DoubleJump, TripleJump
      TuleyShop.Lightcatchers, Bash  # bashglide
    unsafe, GladesTown.ClearThorns:
      Grenade=1  # Grenade Jump
      DoubleJump, TripleJump
  pickup GladesTown.LupoSoupEX:
    moki: Water OR Burrow
  pickup GladesTown.LupoSwimHC:
    moki: Water, Burrow
  pickup GladesTown.LupoSwimMiddleEX:
    moki: Water, WaterDash OR Launch
    gorlek: Water, DoubleJump
    unsafe: Water  # just wall jump between both walls. not hard.
  pickup GladesTown.LupoSwimLeftEX:
    moki: GladesTown.ClearThorns, Water, WaterDash OR Launch
    gorlek: GladesTown.ClearThorns, Water, DoubleJump, TripleJump
    unsafe, GladesTown.ClearThorns:
      Water, Bash, Grenade=1  # unsafe because of precision. Good for kii.
      Water, Grenade=2  # Grenade Water Jumps

  conn Teleporters: free
  conn GladesTown.TwillenHome: free
  conn GladesTown.UpperWest:
    moki:
      Launch, DoubleJump OR Dash OR Glide
      TuleyShop.BlueMoon, Grapple:
        Bash, Grenade=1
        Launch
        TuleyShop.Lightcatchers, Bash, DoubleJump OR Dash OR Glide
    gorlek:
      Launch
      TuleyShop.BlueMoon, Grapple:
        SentryJump=1
        TuleyShop.Lightcatchers, Bash
    unsafe:
      SentryJump=2, Sword  # Midair Sentry Jumps
      TuleyShop.Lightcatchers, Bash, Grenade=1, Grapple  # grenadebash
      GladesTown.ClearThorns, DoubleJump, TripleJump  # hardcore parkour
  conn GladesTown.HoleHut:
    moki:
      Flap, Glide:
        DoubleJump
        Bash, Grenade=1
        Grapple, TuleyShop.BlueMoon OR TuleyShop.StickyGrass
        TuleyShop.SpringPlants
      Launch
      TuleyShop.Lightcatchers, Bash:
        Grenade=2
        Grenade=1, DoubleJump
        TuleyShop.BlueMoon, Grapple, DoubleJump OR Dash
        TuleyShop.BlueMoon, Grapple, Grenade=1, Glide
        TuleyShop.StickyGrass, Grapple, DoubleJump, Dash OR Glide
        TuleyShop.StickyGrass, Grapple, Grenade=1, DoubleJump OR Dash OR Glide
        TuleyShop.SpringPlants
      TuleyShop.SpringPlants, DoubleJump
      GladesTown.RoofsOverHeads:
        Bash, Grenade=3
        DoubleJump, Bash, Grenade=2
        TuleyShop.BlueMoon, Grapple, Bash, Grenade=1, DoubleJump OR Dash
        TuleyShop.BlueMoon, Grapple, Bash, Grenade=2, Glide
        TuleyShop.StickyGrass, Grapple, Bash, Grenade=2, Dash OR Glide
        TuleyShop.SpringPlants, Bash, Grenade=1
    gorlek:
      Flap, Glide, SentryJump=1 OR Hammer
      DoubleJump, TripleJump
      SentryJump=2:
        DoubleJump OR SentryJump=1 OR Hammer
        TuleyShop.BlueMoon, Grapple
        TuleyShop.StickyGrass, Grapple, Dash OR Glide
      TuleyShop.Lightcatchers, Bash:
        SentryJump=2
        SentryJump=1, DoubleJump
        TuleyShop.BlueMoon, Grapple, Grenade=1 OR SentryJump=1
        TuleyShop.BlueMoon, Grapple, Glide OR Sword OR Hammer  # uphammer harder than upslash
        TuleyShop.StickyGrass, Grapple, DoubleJump OR Dash OR Glide OR Sword OR Hammer
        TuleyShop.StickyGrass, Grapple, Grenade=1, Sword OR Hammer
        TuleyShop.StickyGrass, Grapple, SentryJump=1, Sword OR Hammer
        TuleyShop.SpringPlants
      TuleyShop.SpringPlants, SentryJump=1 OR Hammer
      GladesTown.RoofsOverHeads:
        Bash, Grenade=2, Hammer
        TuleyShop.BlueMoon, Grapple, Bash, Grenade=1, Glide OR Sword OR Hammer
        TuleyShop.StickyGrass, Grapple, Bash, Grenade=1, DoubleJump, Dash OR Glide OR Sword OR Hammer
        TuleyShop.StickyGrass, Grapple, Bash, Grenade=2, Sword
    unsafe:
      Flap, Glide, Sword OR Hammer OR Grenade=1  # grenade jump, upslash, uphammer
      TuleyShop.SpringPlants, Sword OR Grenade=1  # increased height bounces
      TuleyShop.SpringPlants, Sentry=1 OR Flash  # sentry and flash short hops give you juuuuuust enough height to get up using the springboard by the hut with the crates
      TuleyShop.Lightcatchers, Bash, TuleyShop.BlueMoon, Grapple
  conn GladesTown.ReachPath:
    moki: TuleyShop.Lightcatchers, TuleyShop.StickyGrass, Bash, Grapple, DoubleJump OR Dash  # other paths should be redundant with HoleHut
  conn OpherShop: free
  conn TuleyShop:
    moki, InnerWellspring.WaterEscape:
      DoubleJump OR Launch
      Flap, Glide
      Bash, Grenade=1
    gorlek: InnerWellspring.WaterEscape, SentryJump=1 OR Burrow OR Dash
    unsafe: InnerWellspring.WaterEscape, Shuriken=1 OR Sword OR Hammer OR Grenade=1 OR Sentry=1 OR Flash OR Spear=1
    # seed paths tbd if ever necessary
# connection to hollow currently redundant with the wall in the way

# checkpoint at -297, -4139

anchor GladesTown.TwillenHome at -414, -4160:  # At Twillen in Glades
  refill Checkpoint

  quest GladesTown.HandToHandLantern:
    moki: LowerReach.HandToHandHat
  quest GladesTown.FamilyReunionKey:
    moki: GladesTown.BuildHuts
  quest GladesTown.AcornQI:
    moki, GladesTown.ClearThorns, GladesTown.CaveEntrance:
      Flash, Water, Glide
      Flash, Water, DoubleJump, Dash
      Flash, Bash, Grenade=1
      Flash, Launch
    gorlek, GladesTown.ClearThorns, GladesTown.CaveEntrance:
      Flash:
        Water, DoubleJump OR Dash OR Sword OR Hammer
        SentryJump=1
      Bow=4:  # bow refills light
        Launch
        Bash, Grenade=1
        SentryJump=1
    unsafe, GladesTown.ClearThorns, GladesTown.CaveEntrance:
      Flash:
        # Water, Sentry=2 OR Damage=10  # use the flash hop to make it across the first spikes (good for kii)
        # Water, Sword  # difficult sword float (good for kii)
        Water  # double flash hop (not good for kii)
        Grenade=1  # grenade jump
        DoubleJump, TripleJump  # off the left wall
      Bow=2:
        Launch
        Bash, Grenade=1
        SentryJump=1
        Grenade=1  # grenade jump
        DoubleJump, TripleJump  # off the left wall
      # Grenade=4  # grenade jumps and light refills, very nasty strat
      DoubleJump, TripleJump, Grenade=2, Water OR Damage=10  # light refills, NO GRENADE JUMPS, Small Dirty Water Dboost
      DoubleJump, TripleJump, Grenade=1, Sword, Water OR Damage=10
  quest GladesTown.MokiAcornQuest:
    moki: GladesTown.ClearThorns, GladesTown.AcornQI

  pickup GladesTown.LowerOre:
    moki:
      Hammer, DoubleJump OR Dash OR Glide OR Launch
      Spear=1, DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=1, Hammer OR Spear=1
    gorlek:
      Hammer  # hammer float
      Spear=1, Sword OR Damage=10  # sword float
    unsafe: Spear=1  # tricky jump over the coals damageless
  pickup GladesTown.AboveCaveEX:
    moki: GladesTown.ClearThorns
  pickup GladesTown.CaveBurrowEX:
    moki: GladesTown.ClearThorns, Burrow, DoubleJump OR Launch
    gorlek: GladesTown.ClearThorns, Burrow  # Burrow Dash out of the sand
  pickup GladesTown.KeyMokiHutEX:
    moki: GladesTown.BuildHuts, WoodsEntry.DollQI  # changed RoofsOverHeads to BuildHuts
  pickup GladesTown.DamageTree:
    moki: TuleyShop.LastTree

  conn TwillenShop: free
  conn GladesTown.West:
    moki:
      DoubleJump OR Launch
      Bash, Grenade=1
      TuleyShop.StickyGrass, Grapple
    gorlek:
      SentryJump=1
      TuleyShop.SpringPlants, Sword OR Hammer  # upslash or uphammer
      TuleyShop.Lightcatchers, Bash
    unsafe: Grenade=1
  conn GladesTown.Teleporter:
    moki:
      Bash, Grenade=1
      GladesTown.ClearThorns OR DoubleJump OR Launch
    gorlek: Damage=10 OR SentryJump=1

anchor GladesTown.West at -430, -4135:  # At Motay
  refill Checkpoint

  quest GladesTown.HandToHandCanteen:
    moki: EastPools.HandToHandSpyglass

  pickup GladesTown.UpperOre:
    moki:
      Bash, Grenade=1, Launch
      Launch, DoubleJump  # different ways to solve this, should be fine...
      TuleyShop.StickyGrass:
        Grapple OR Launch
        Bash, Grenade=1, DoubleJump, Dash OR Glide
        Bash, Grenade=1, Dash, Glide
        TuleyShop.Lightcatchers, Bash, DoubleJump, Dash
        TuleyShop.Lightcatchers, Bash, Glide
      GladesTown.BuildHuts:
        DoubleJump, Bash, Grenade=2
        Bash, Grenade=3
        Launch
        TuleyShop.StickyGrass:
          DoubleJump, Bash, Grenade=1
          TuleyShop.Lightcatchers, Bash, DoubleJump OR Dash OR Glide
        TuleyShop.Lightcatchers, Bash, Grenade=1
    gorlek:
      Launch
      TuleyShop.Lightcatchers, Bash, DoubleJump, TripleJump
      TuleyShop.StickyGrass:
        Bash, Grenade=1, DoubleJump OR Glide  # glide somehow still a bit precise even though you just hold right
        SentryJump=1, DoubleJump OR Glide  # glide somehow still a bit precise even though you just hold right
        SentryJump=1, Dash, Sword OR Hammer
        DoubleJump, TripleJump, Sword OR Hammer  # upswing to the moss
        TuleyShop.Lightcatchers, Bash, Grenade=1 OR SentryJump=1  # can still do this with the huts up
        TuleyShop.Lightcatchers, Bash, DoubleJump  # wrap around
      GladesTown.BuildHuts:
        Bash, Grenade=2
        SentryJump=3  # just two seems a bit precise in gorlek, even though gorlek height is technically barely enough
        SentryJump=2, DoubleJump
        TuleyShop.Lightcatchers, Bash, SentryJump=1
        TuleyShop.StickyGrass:
          Bash, Grenade=1, Dash OR Glide OR Sword  # hammer mildly inconsistent
          SentryJump=2
          SentryJump=1, Sword  # hammer mildly inconsistent
          TuleyShop.Lightcatchers, Bash
    unsafe:
      SentryJump=2, Sword OR Hammer  # Midairs
      GladesTown.BuildHuts, TuleyShop.BlueMoon, Grapple, DoubleJump, TripleJump
      GladesTown.BuildHuts, Grenade=3  # Grenade Jumps
      TuleyShop.Lightcatchers, Bash, Grenade=1, Grapple  # Grenadebash
  pickup GladesTown.MotayHutEX:
    moki, GladesTown.BuildHuts:
      DoubleJump, Dash OR Glide
      Bash, Grenade=1
      Launch
      Grapple, TuleyShop.StickyGrass OR TuleyShop.BlueMoon
      TuleyShop.Lightcatchers, Bash
    gorlek, GladesTown.BuildHuts:
      SentryJump=1
      DoubleJump, TripleJump OR Sword OR Hammer
    unsafe, GladesTown.BuildHuts:
      Grenade=1  # grenade jumps
      Bash  # slime lure
      TuleyShop.SpringPlants, Hammer, Dash  # uphammer bounce
  pickup WestGlades.GrappleEX:
    unsafe: SentryJump=1, Sword, Damage=10

  conn WestGlades.Lower:
    moki:
      Bash, DoubleJump OR Dash
      Combat=2xWeakSlug, DoubleJump, Dash, Glide  # this path is too nice to not be moki... right?
      Launch
    gorlek:
      Bash, Glide
      Bash, Damage=10, Sword OR Hammer
      Combat=2xWeakSlug, DoubleJump, Dash
      Combat=2xWeakSlug, DoubleJump, TripleJump  # can either wrap around or grab the bottom of the last wall
      DoubleJump, Sword, Damage=10
    unsafe:
      Combat=2xWeakSlug, DoubleJump, Damage=20
      Bash, Sword OR Hammer  # weapon floating, yes verified with hammer
  conn GladesTown.TwillenHome: free
  conn GladesTown.Teleporter:
    moki:
      TuleyShop.Lightcatchers, Bash, Glide
      TuleyShop.BlueMoon, Grapple
      TuleyShop.StickyGrass, Grapple, Glide
    gorlek: TuleyShop.Lightcatchers, Bash, Dash, Sword OR Hammer
    # kii will probably have a free conection from TwillenHome, not needing any paths here
  conn GladesTown.UpperWest:
    moki:
      TuleyShop.StickyGrass, Launch
      TuleyShop.Lightcatchers, Bash:
        DoubleJump, Dash OR Glide
        Dash, Glide
        Launch
        TuleyShop.StickyGrass, Grapple, DoubleJump OR Dash OR Glide
      TuleyShop.BlueMoon, Grapple, DoubleJump OR Dash OR Glide OR Launch  # extra abilities because it's harder if the huts are there
      GladesTown.BuildHuts:
        Bash, Grenade=2  # has an alternate solution if the lightcatcher is there
        Bash, Grenade=1, DoubleJump, Dash OR Glide
        Launch
        TuleyShop.Lightcatchers, Bash, DoubleJump OR Dash OR Glide
    gorlek:
      # Launch already connects over the teleporter
      TuleyShop.Lightcatchers, Bash:
        Glide
        DoubleJump, TripleJump OR Dash OR Sword OR Hammer
        Dash, Sword OR Hammer
        SentryJump=1, Sword OR Hammer
        TuleyShop.StickyGrass, Grapple
      TuleyShop.BlueMoon, Grapple, Sword OR Hammer
      TuleyShop.StickyGrass:
        DoubleJump, TripleJump, Sword  # upslash to the moss
        DoubleJump, TripleJump, Hammer, Dash OR Glide  # upswing to the moss
        Grapple, DoubleJump, Dash, Glide OR TripleJump OR Sword
        Grapple, DoubleJump, TripleJump, Glide
      GladesTown.BuildHuts:
        Bash, Grenade=1, DoubleJump, TripleJump OR Sword OR Hammer
        Bash, Grenade=1, Dash, Glide OR Sword
        SentryJump=1, DoubleJump, TripleJump OR Dash
    unsafe:
      Grenade=2, DoubleJump, Sword  # Midair Grenade Pogo
      TuleyShop.BlueMoon, Grapple
      TuleyShop.Lightcatchers, Bash, Glide OR Grenade=1  # Bash Gliding
      GladesTown.BuildHuts:
        Bash, Grenade=1  # Grenade Jump that auto-cancels by entering the hut
        Grenade=1, DoubleJump OR Dash  # Midair Grenade Jump with auto-cancel  # dash is much harder
  # all other paths should be redundant with the connection to tp

anchor GladesTown.UpperWest at -357, -4126:  # Where Mokk lives
  pickup GladesTown.ArcingShard:
    moki, GladesTown.ClearThorns:
      DoubleJump OR Dash OR Glide OR Launch
      TuleyShop.Lightcatchers, Bash  # somehow I don't think this path is very relevant
      TuleyShop.BlueMoon, Grapple
    gorlek: GladesTown.ClearThorns, Sword OR Hammer
    unsafe, GladesTown.ClearThorns:
      Sentry=2
      Shuriken=1
  pickup GladesTown.BraveMokiHutEX:
    moki: GladesTown.OnwardsAndUpwards, DoubleJump OR Launch
    gorlek: GladesTown.OnwardsAndUpwards, SentryJump=1
    unsafe, GladesTown.OnwardsAndUpwards:
      Sword OR Hammer  # upslash or uphammer
      Grenade=1  # grenade jump
      Bash, Spear=1  # spearbash off of the pots
  pickup GladesTown.UpperLeftEX:
    moki:
      Bash, Grenade=1
      Launch
      TuleyShop.StickyGrass, DoubleJump, Grapple
    gorlek:
      SentryJump=1
      DoubleJump, TripleJump
      TuleyShop.StickyGrass, Grapple
    unsafe:
      DoubleJump
      Sword, Grenade=1 OR Shuriken=2  # pogo
  pickup GladesTown.AboveGromHC:
    moki:
      DoubleJump, Bash, Grenade=1
      Launch
      TuleyShop.StickyGrass, Grapple
    gorlek:
      DoubleJump, SentryJump=1
      DoubleJump, TripleJump OR Dash OR Glide  # just assisting abilities
    unsafe:
      DoubleJump
      Bash, Grenade=1
      SentryJump=1
      Sword, Grenade=1
  pickup GladesTown.MotayHutEX:
    moki, GladesTown.BuildHuts:
      DoubleJump OR Dash OR Glide
      TuleyShop.BlueMoon, Grapple
    gorlek, GladesTown.BuildHuts:
      Sword OR Hammer  # Weapon Float
      TuleyShop.StickyGrass, Grapple
    unsafe: GladesTown.BuildHuts, Sentry=1 OR Spear=1 OR Flash OR Blaze=1
  pickup GladesTown.UpperOre:
    moki: GladesTown.BuildHuts, Bash, Grenade=2, Dash OR Glide
    gorlek, GladesTown.BuildHuts:
      TuleyShop.StickyGrass, Grapple
      TuleyShop.StickyGrass, SentryJump=1, Sword OR Hammer
      SentryJump=2, Sword OR Hammer
      SentryJump=1, Sword, DoubleJump, TripleJump OR Dash
    unsafe: GladesTown.BuildHuts, Grenade=2, Sentry=1 OR Spear=1 OR Flash OR Blaze=1 OR Sword OR Hammer OR Dash OR DoubleJump OR Glide

  conn GladesTown.West:
    moki:
      Dash OR Glide
      TuleyShop.BlueMoon, Grapple
    gorlek:
      Sword OR Hammer
      TuleyShop.StickyGrass, Grapple
    unsafe: GladesTown.BuildHuts, Sentry=1 OR Spear=1 OR Flash OR Blaze=1
  conn GladesTown.TwillenHome: free
  conn GladesTown.Teleporter:
    moki:
      Dash OR Glide
      TuleyShop.Lightcatchers, Bash
      TuleyShop.BlueMoon, Grapple
    gorlek: Sword OR Hammer
    unsafe: Grenade=1 OR Sentry=1 OR Flash OR Blaze=1 OR Spear=1 OR Shuriken=1

anchor GladesTown.HoleHut at -214, -4111:  # The ledge below Hole Hut
  pickup GladesTown.BelowHoleHutEX: free
  pickup GladesTown.HoleHutEX:
    moki, GladesTown.RoofsOverHeads:
      Bash, Grenade=1
      TuleyShop.SpringPlants OR DoubleJump OR Dash OR Launch
    gorlek: GladesTown.RoofsOverHeads, Glide OR SentryJump=1 OR Sword
    unsafe, GladesTown.RoofsOverHeads:
      Grenade=1  # grenade jump
      Hammer OR Sentry=1 OR Flash=1 OR Shuriken=1
  pickup GladesTown.HoleHutEC:
    moki, GladesTown.RoofsOverHeads:
      Bash, Grenade=1
      TuleyShop.SpringPlants OR DoubleJump OR Dash OR Launch
    gorlek: GladesTown.RoofsOverHeads, Glide OR SentryJump=1 OR Sword
    unsafe, GladesTown.RoofsOverHeads:
      Grenade=1  # grenade jump
      Hammer OR Sentry=1 OR Flash=1 OR Shuriken=1

  conn GladesTown.ReachPath:
  # Sword, Dash, Glide, DoubleJump, Lightcatchers Bash, Grenade, Hammer, Blaze, Shuriken, Sentry, and Flash can all individually get you from branch to reachpath
    moki:
      Launch, DoubleJump OR Dash OR Glide  # Can go either to the right wall or through the semisolid branch
      Launch, Grapple, TuleyShop.BlueMoon OR TuleyShop.StickyGrass
      TuleyShop.SpringPlants, Launch
      TuleyShop.BlueMoon, Grapple, DoubleJump OR Dash
      TuleyShop.StickyGrass, Grapple, DoubleJump OR Dash
      TuleyShop.Lightcatchers, TuleyShop.BlueMoon, Bash, Grapple
      TuleyShop.Lightcatchers, TuleyShop.StickyGrass, Bash, Grapple, Glide
    gorlek:
      Launch
      DoubleJump, TripleJump
      SentryJump=1, Sword OR Hammer  # Weapon Float, works from a standing sjump on the ledge
      TuleyShop.BlueMoon, Grapple, Glide OR Sword OR Hammer
      TuleyShop.StickyGrass, Grapple, Glide OR Sword
    unsafe:
      Grenade=1, DoubleJump OR Dash OR Glide OR Sword OR Hammer OR Blaze=1 OR Shuriken=1 OR Sentry=1 OR Flash
      Grenade=2
      TuleyShop.Lightcatchers, Bash, Grenade=1
      TuleyShop.SpringPlants, Hammer  # Uphammer Bounce
      TuleyShop.StickyGrass, Grapple, Sword OR Hammer OR Blaze=1 OR Shuriken=1 OR Sentry=1 OR Flash
  conn TuleyShop:
    moki: InnerWellspring.WaterEscape, Dash OR Glide  # seed paths tbd if ever necessary
    gorlek: Sword OR Hammer  # getting up there with just a weapon from below is not written in gorlek. The weapon floats from hole hut, however, are probably gorlek difficulty.
    # everything else is redundant
  conn GladesTown.Teleporter: free

anchor GladesTown.ReachPath at -140, -4096:  # At the soup
  refill Checkpoint

  # state GladesTown.RatherPlay:  # talking to the Moki that allows to build decoration
  #   moki:  # free if you know the whole branch is semisolid, but you probably don't as a moki player
  #     DoubleJump OR Dash OR Glide OR Launch
  #     TuleyShop.BlueMoon, Grapple

  quest GladesTown.HandToHandSoup:
    moki: InnerWellspring.HandToHandHerbs

  pickup GladesTown.LeafPileEX:
    moki: Flap
  pickup LowerReach.CatalystShard:
    moki:
      Water, Bash, Flap  # seems to be a casual strat the game suggests you to do
      Water, Grenade=1
  # unsafe: Water, Flap, Sentry=2  # theoretical double redirect, still in testing
  pickup GladesTown.UpdraftCeilingEX:
    moki: DoubleJump  # other (non-redundant) paths exist, but this has free retries, otherwise you'd have to go through entire reach to get another attempt
    gorlek: Dash OR Glide OR Sword OR Hammer  # weapon float woo
    unsafe: Grenade=1

  conn GladesTown.HoleHut:
    moki:
      DoubleJump OR Dash OR Glide OR Launch
      TuleyShop.BlueMoon, TuleyShop.SpringPlants, Grapple
      TuleyShop.BlueMoon, Grapple, Bash, Grenade=1
    gorlek: free  # free if you know the whole branch is semisolid, but you probably don't as a moki player
  conn GladesTown.Teleporter: free
  conn TuleyShop:
    moki: InnerWellspring.WaterEscape
  conn LowerReach.Trial:
    moki:
      Glide, Bash, Flap OR Grenade=1  # derived from the catalyst path
      Glide, Launch
    gorlek:
      Glide, SentryJump=1
      Launch, Damage=20, DoubleJump OR Dash OR Glide OR Sword OR Hammer
    unsafe:
      SentryJump=3, Sword, DoubleJump, Damage=20
      Glide, Grenade=1
      Glide, DoubleJump, TripleJump
      Grenade=4, DoubleJump, TripleJump, Damage=20
      Launch, Damage=40

region WestGlades:
  moki: Danger=20
  gorlek: free
  unsafe: free

anchor WestGlades.Lower at -545, -4113:  # The right edge of the first pool past glades
  refill Checkpoint
  refill Energy=3:
    moki, Weapon:
      DoubleJump, Dash OR Glide
      Launch
#     gorlek:
#       Water, RangedWeapon OR Sentry=1  # break the crystal from afar and jump into the water to get the energy
#       DoubleJump, TripleJump, RangedWeapon OR Sentry=1 OR Blaze=1  # break the crystal from afar and use triple jump to collect the energy midair
#       Launch, RangedWeapon OR Sentry=1 OR Blaze=1  # launch up to the crystal. Note that breaking the crystal with launch causes the energy crystals to go very far out of bounds.
#       SentryJump=1
#     unsafe:
#       Dash, RangedWeapon OR Sentry=1
#       DoubleJump, RangedWeapon OR Sentry=1 OR Bash
#       Glide, RangedWeapon OR Sentry=1
#       Sword, RangedWeapon OR Sentry=1  # Sword Float over then back
#       Hammer, Sentry=2
#       Hammer, RangedWeapon, Sentry=1  # Midair Hammer Sentry
# procrastinating these a bit

  pickup WestGlades.GrappleEX:
    moki:
      Grapple OR Launch
      Bash, Grenade=1
    gorlek:
      DoubleJump, TripleJump
      Bash, DoubleJump
      SentryJump=1
    unsafe:
      Grenade=1  # grenade jump
  pickup WestGlades.AbovePlantEX:
    moki:
      Bash, DoubleJump, Dash OR Glide
      Bash, Dash, Glide
      Water, Bash
      Launch
    gorlek:
      Bash, DoubleJump OR Dash OR Grenade=1
      Bash, WaterDash, Damage=20
      Bash, SentryJump=1, Glide
      SentryJump=1, Combat=Tentacle, DoubleJump OR Dash OR Water
      SentryJump=1, Combat=Tentacle, WaterDash, Damage=20
      SentryJump=2, Glide, Combat=Tentacle
    unsafe:
      SentryJump=1, Sword, Damage=20  # defeating the enemy. Should replace with Combat= once applicable
      # DiveLaunch, DoubleJump OR Dash OR Glide OR Sword OR Hammer OR Flap OR Spear=1 OR Shuriken=1 OR Blaze=1 OR Flash=1 OR Sentry=1
  pickup WestGlades.LowerPoolEX:
    moki: Water
  pickup WestGlades.SwimEC:
    moki: Water
  pickup WestGlades.LeftOre:
    moki:
      Combat=Tentacle, Grapple, DoubleJump, Dash OR Glide
      Bash, Grapple, DoubleJump, Dash OR Glide
      Grapple, Launch
      Water, Grapple, DoubleJump
      Water, Grapple, WaterDash, Dash OR Glide
    gorlek:
      DoubleJump, Grapple, Bash OR Damage=10 OR Combat=Tentacle
      Dash, Grapple, Bash OR Damage=10 OR Combat=Tentacle
      Bash, Damage=10, DoubleJump, TripleJump, Dash OR Glide
      Combat=Tentacle, Damage=10, DoubleJump, TripleJump, Dash, Glide
      WaterDash, Damage=20, Bash, Grapple, Glide OR Sword OR Hammer
      WaterDash, Damage=20, Combat=Tentacle, Grapple, Glide OR Sword OR Hammer
      Bash, Grenade=1, Grapple, Glide OR Sword OR Hammer
      Bash, Grenade=1, DoubleJump, TripleJump
      Bash, Grenade=1, DoubleJump, Dash, Damage=10
      SentryJump=1, Glide, Grapple, Bash OR Damage=10 OR Combat=Tentacle
      Water, Grapple, Dash OR Glide OR Sword OR Hammer
      Launch
    unsafe:
      Water, Grapple, Sentry=1 OR Flash OR Shuriken=1 OR Blaze=1 OR Damage=30

  conn WestGlades.Center:
    moki:
      DoubleJump, Bash, Water OR Dash OR Glide OR Grenade=1
      Launch
    gorlek:
      Bash, DoubleJump OR Dash
      Grapple, DoubleJump, TripleJump, Dash, Glide, Water OR Damage=10 OR Combat=Tentacle
      Grapple, DoubleJump, TripleJump, Dash, Sword  # solves the enemy as per Combat=Tentacle definition
      SentryJump=1, DoubleJump, Water OR Damage=10 OR Combat=Tentacle
    unsafe:
      Bash  # verified
      SentryJump=2, Sword, Damage=20  # defeating the enemy and sword floating, FANTASTIC for kii
      DoubleJump, TripleJump, Grapple, Dash, Damage=10  # verified
  conn GladesTown.West:
    moki:
      Bash, DoubleJump OR Dash OR Glide
      DoubleJump, Dash, Glide
      Launch
    gorlek:
      Bash
      DoubleJump, TripleJump OR Dash
      DoubleJump, Damage=10, Glide OR Sword
      SentryJump=1, DoubleJump OR Dash OR Glide OR Sword
      SentryJump=1, Hammer, Damage=10
    unsafe:
      DoubleJump, Sword OR Glide  # verified damageless

anchor WestGlades.Center at -612, -4083:  # At the middle room connecting upper and lower Glades
  refill Checkpoint

  pickup WestGlades.LeftOre:
    moki: Grapple, DoubleJump OR Dash OR Glide OR Launch
    gorlek: Grapple, Sword OR Hammer
    unsafe: Grapple, Sentry=1 OR Flash OR Shuriken=1 OR Blaze=1 OR Damage=30
  pickup WestGlades.RightOre:
    moki:
      Bash, DoubleJump OR Dash
      Launch
    gorlek:
      Bash, Glide OR Sword OR Hammer OR Grenade=1
      SentryJump=1, Dash, Sword OR Hammer

  conn WestGlades.Upper:
    moki:
      Bash, DoubleJump OR Dash OR Glide OR Grenade=1
      Launch
    gorlek:
      Bash
      SentryJump=1, DoubleJump
  conn WestGlades.Lower:
    moki:
      Combat=Tentacle, DoubleJump OR Dash OR Glide
      Water, DoubleJump OR Dash OR Bash OR Glide OR Damage=10
      Launch
    gorlek:
      Water OR Bash OR Damage=10 OR Combat=Tentacle

anchor WestGlades.Upper at -618, -4054:  # At the sign that gives you directions to Wellspring, Reach, and Pools
  refill Checkpoint
  refill Health=1

  state LowerReach.BearSneezed:
    moki: Flap

  pickup WestGlades.UpperPoolEX:
    moki: Water
  pickup WestGlades.RightOre:
    moki:
      Glide, DoubleJump OR Dash
      DoubleJump, Dash
    gorlek:
      DoubleJump, TripleJump OR Sword OR Hammer
      Dash, Sword OR Hammer
      Glide, Combat=Tentacle, SentryJump=1
    unsafe:
      Bash
      Glide, Shuriken=1 OR Sword OR Hammer OR Flash OR Sentry=1

  conn WestGlades.Center: free
  conn LowerReach.Entry:
    moki: LowerReach.BearSneezed
  conn WestGlades.MillApproach:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Bash OR Launch
      Water, WaterDash
    gorlek:
      Grapple  # grapple up to the second hook and drop down
      DoubleJump, TripleJump, Dash OR Glide OR Sword
      WaterDash, Damage=20
      SentryJump=1
    unsafe:
      Grenade=1  # grenade jump

anchor WestGlades.ShrineArea at -664, -4026:
  refill Checkpoint

  pickup WestGlades.ShrineHC:
    moki:
      Grapple, DoubleJump, Dash OR Glide
      Bash, Grenade=1
      Launch
    gorlek:
      Grapple, DoubleJump, TripleJump
      SentryJump=1
    unsafe:
      Bash, DoubleJump OR Dash OR Glide OR Sword  # use the shrine enemies

  conn GladesShrine: free
  conn WestGlades.MillApproach: free

anchor WestGlades.MillApproach at -703, -4064:  # At the ledge of the room opening up to Wellspring
  refill Checkpoint
  refill Health=1

  # any paths to the ore above would be redundant with connection to outerentrance so far

  conn WestGlades.ShrineArea:
    moki:
      Grapple, DoubleJump
      Grapple, Dash, Glide
      Bash, Grenade=1, DoubleJump
      Launch, Bash, Grenade=1
      Launch, DoubleJump OR Grapple
    gorlek:
      Grapple, Dash OR Glide OR Sword
      SentryJump=1, DoubleJump, TripleJump
      Launch
    unsafe:
      Bash, Grenade=1, Grapple  # Grenadebash
  conn WestGlades.Upper:
    moki:  # realizing the semisolid not considered for moki
      Bash, DoubleJump OR Dash OR Glide OR Grenade=1
      Grapple, DoubleJump OR Dash OR Glide
      DoubleJump, Dash, Glide
      Launch
      Water, WaterDash
    gorlek:
      Water OR DoubleJump OR Dash OR Glide OR Sword OR Damage=20  # wall jump through the semisolid
      Hammer, Bash OR SentryJump=1 OR Grapple
    unsafe:
      Bash
      Grenade=1, Sentry=1 OR Flash OR Blaze=1 OR Shuriken=1
      Sentry=2
  conn OuterWellspring.EntranceDoor:
    moki:
      Launch OR Water
      DoubleJump, Grapple
      DoubleJump, Dash OR Glide
      Dash, Glide
    gorlek:
      DoubleJump OR Dash
      Damage=20, Glide OR Sword
      Bash, Grenade=1, Glide OR Sword OR Damage=20
      Bash, Grenade=2
      SentryJump=1, Glide OR Sword OR Damage=20
      SentryJump=2, Sword OR Hammer
      # Other Grapple options don't seem very consistent
    unsafe:
      Bash, Grenade=1, Grapple  # requires holding up, good for kii
      Glide OR Sword
      Grenade=2, Hammer  # grenade jumps and hammer floats
      Grapple, Sentry=1 OR Flash OR Spear=1 OR Shuriken=1
  conn PoolsApproach.MillPathCheckpoint:  # this makes more sense here than at OuterWellspring
    moki:
      Damage=15, Water, Grapple, DoubleJump, Dash OR Glide  # you can make this path harder on yourself by not using the wall, but really the fail case is you taking 15 damage
      Water, Grapple, WaterDash OR Launch
      Water, Launch, DoubleJump, Dash
      Water, Launch, Glide
    gorlek:  # hopefully didn't go too far for gorlek?
      Water, Grapple, DoubleJump OR Dash OR Bash OR Damage=15  # non-damage variants pretty risky
      Water, WaterDash, DoubleJump, TripleJump
      Water, WaterDash, Dash OR Glide OR Sword OR Damage=15
      Water, Bash, DoubleJump, TripleJump
      Water, Bash, Dash OR Glide OR Sword OR Damage=15
      Water, Launch, DoubleJump OR Dash OR Bash OR WaterDash OR Sword OR Hammer OR Damage=15

anchor GladesShrine:
  refill Full
  pickup WestGlades.CombatShrine:
    moki, Regenerate, Combat=2xCrab+Bee+3xEnergyRefill+Hornbug+2xTentacle+3xEnergyRefill+2xSpinCrab+2xBee+3xEnergyRefill+2xMantis+Tentacle+SpinCrab:
      Damage=65                     # the crabs are terrifying!
      Damage=55, DoubleJump OR Dash  # these can help
      Damage=30, Launch             # if you're op, nothing's terrifying
    unsafe: Combat=2xCrab+Bee+3xEnergyRefill+Hornbug+2xTentacle+3xEnergyRefill+2xSpinCrab+2xBee+3xEnergyRefill+2xMantis+Tentacle+SpinCrab

region OuterWellspring:
  moki: Danger=25
  gorlek: free
  unsafe: free

anchor OuterWellspring.EntranceDoor at -856, -4058:  # Outside the door where you enter the first room
  refill Checkpoint
  refill Health=1:
    gorlek: Combat=Slug
    unsafe: free  # barely out of sight, also past an enemy...
  refill Energy=3:
    unsafe: Weapon  # pretty far to the left

  # ommited a lot of paths in moki including most bash-related paths because of how complex this place is to navigate (as in, more paths were omitted than were taken into moki...)
  state OuterWellspring.EntranceDoorOpen:
    moki, BreakWall=16:
      DoubleJump, Dash OR Glide
      Dash, Glide
      Grapple, Bash, DoubleJump OR Dash
      Grapple, Glide
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch
    gorlek, BreakWall=16:
      DoubleJump, TripleJump OR Sword OR Hammer
      Dash, Sword OR Hammer OR Damage=15
      Glide, Sword OR Hammer
      Grapple, Sword
      Grapple, Damage=15, DoubleJump OR Hammer
      Bash, DoubleJump OR Dash OR Glide OR Sword OR Hammer OR Damage=15  # different ways to solve using the many bash targets around
      SentryJump=1, Sword OR Damage=15
    unsafe, BreakWall=16:
      Damage=15, Sword
      Dash OR Bash OR Glide

  pickup OuterWellspring.EntranceRoofEX:
    moki:
      DoubleJump, Grapple, Dash OR Glide
      Grapple, Launch
    gorlek:
      Grapple, DoubleJump, TripleJump
      Grapple, Dash, Sword OR Hammer  # upswing into the pickup
      Launch, Bash, Grenade=1  # other launch paths are covered from the anchor above
  pickup OuterWellspring.WheelEX:
    moki: OuterWellspring.EntranceDoorOpen
  pickup OuterWellspring.BasementEC:
    moki:
      Water:  # mirror of the entrancedooropen paths
        DoubleJump, Dash OR Glide
        Dash, Glide
        Grapple, Bash, DoubleJump OR Dash
        Grapple, Glide
        Bash, Grenade=1, DoubleJump OR Dash OR Glide
        Launch
      OuterWellspring.EntranceDoorOpen  # casual strat I guess?
    gorlek:
      Damage=15, DoubleJump OR Dash OR Grapple OR Glide OR Sword OR Hammer  # go around the moss wheel
      Water:  # mirror of the entrancedooropen paths
        DoubleJump, TripleJump OR Sword OR Hammer
        Dash, Sword OR Hammer
        Glide, Sword OR Hammer
        Grapple, Sword
        Bash, DoubleJump OR Dash OR Glide OR Sword OR Hammer OR Damage=15  # different ways to solve using the many bash targets around
        SentryJump=1, Sword
      Bash, Glide, DoubleJump, TripleJump OR Grapple  # bashglide
      Bash, DoubleJump, TripleJump, Grapple
      Bash, Launch, DoubleJump OR Glide
  pickup OuterWellspring.LifeHarvestShard:
    moki, BreakWall=20:
      DoubleJump, Bash
      Launch
    gorlek, BreakWall=20:
      SentryJump=1, DoubleJump OR Dash OR Glide OR Damage=15
      Bash, Dash  # other options are somewhere on the border between difficulties
      Bash, Grenade=1  # this would be in moki if the camera didn’t put ori right at the top of the screen, making it hard to aim/catch the grenade
    unsafe, BreakWall=20:
      Bash, Hammer     # not gorlek due to a non trivial combo attack
      DoubleJump, TripleJump
  pickup OuterWellspring.SwimEX:
    moki: Water
  pickup OuterWellspring.SwimOre:
    moki:
      Water, Grapple OR WaterDash OR Launch
    gorlek:
      Water, Bash, Grenade=1          # stand on the spinny wheel and bash-grenade up
      Water, SentryJump=1             # ooooor use a SentryJump
      Water, DoubleJump, TripleJump   # ooooor just some regular jumps!
      Water, DoubleJump, Sword OR Hammer  # oooooooooooor double jump then upslash
    unsafe:
      Water, DoubleJump               # or just be a madman

  conn InnerWellspring.EntranceDoor:
    moki: OuterWellspring.EntranceDoorOpen
  conn OuterWellspring.AboveEntranceDoor:
    moki: DoubleJump, Grapple  # save all the other ways for gorlek...
    gorlek:
      Grapple                                         # Grapple up using the right hanging plant
      Launch                                          # Launch up using left side (possible with either wheel state)
      SentryJump=1, DoubleJump, TripleJump            # Sentry Jump up to the wheel on the left side of entrance door, then jump across and use sword or hammer stall to finish
      Bash, Grenade=2, DoubleJump OR Dash             # Go up the left side; works for either wheel state
      Bash, Grenade=1, Damage=15, DoubleJump OR Dash  # As above but damage boost to get to the pole
      Bash, Grenade=3, Glide OR Damage=15             # As above but Glide needs an extra bashnade in case the wheel is down
    unsafe:
      SentryJump=1, Bash, Grenade=1                   # Throw the greande, sentry jump to it, then bash off it, on right side (do a small lure on bottom slime to get to platform)
      SentryJump=1, Damage=15, Dash OR Glide          # Slightly different methods needed for hammer vs sentry, hammer is similar to above, sword goes left side
      SentryJump=2, Dash OR Glide                     # Sentry Jump then Glide/Dash to finish the gap
      SentryJump=2, Sword
      SentryJump=2, Hammer, Damage=15
  conn OuterWellspring.WestDoor:  # going directly up the left wall
    gorlek:
      Bash, Grenade=2, DoubleJump, Dash OR Glide
      Bash, Grenade=3, DoubleJump
      Launch
  # connections using the left wall wheel would be pointless
  conn WestGlades.MillApproach:
    moki:
      DoubleJump, Dash
      Bash, Grenade=2, DoubleJump OR Dash OR Glide
      Launch
      Water
    gorlek:
      DoubleJump, TripleJump OR Glide
      Damage=20, DoubleJump OR Dash OR Glide
      SentryJump=2, Sword OR DoubleJump OR Dash OR Glide OR Damage=20
      Bash, Grenade=1, DoubleJump OR Dash OR Sword OR Damage=20
      Bash, Grenade=2
    unsafe:
      Bash, Glide
      Bash, DoubleJump, Sword
      Bash, DoubleJump, Hammer, Damage=20
      Bash, SentryJump=1, DoubleJump OR Dash

# checkpoint at -978, -4042

anchor OuterWellspring.AboveEntranceDoor at -837, -4026:  # at the crystal above the entrance door
  refill Energy=3:
    moki: Weapon

  pickup OuterWellspring.EntranceRoofEX:
    gorlek: Launch, DoubleJump OR Dash OR Glide OR Sword OR Hammer
  pickup OuterWellspring.RightWallOre:
    moki: Grapple
    gorlek:
      DoubleJump, Bash OR Glide
      DoubleJump, TripleJump, Damage=15  # go above the wheel to the right, damage not mandatory
      DoubleJump, Dash, Sword
      Bash, Grenade=1, Glide
      Bash, Grenade=2, Dash OR Sword
      SentryJump=2, Glide
      SentryJump=2, Sword, DoubleJump OR Dash
      SentryJump=1, Dash, Glide
    unsafe: Glide
  pickup OuterWellspring.RightWallEC:
    gorlek: BreakWall=20, DoubleJump, TripleJump, Damage=15  # go above the wheel to the right, damage not mandatory

  conn OuterWellspring.EastDoor:  # going to the right
    moki:
      Grapple, DoubleJump, Dash OR Glide
      Launch
    gorlek: Grapple, DoubleJump, TripleJump OR Sword OR Hammer
    unsafe:
      Grapple
      DoubleJump, TripleJump, Damage=15, Sword OR Hammer
      SentryJump=1, DoubleJump, Damage=15, Dash OR Glide
      SentryJump=1, Bash, Grenade=1, DoubleJump
      SentryJump=2, Bash, Grenade=1, Glide, Dash
  conn OuterWellspring.WestDoor:  # going to the left
    moki:
      Grapple, DoubleJump, Dash
      Grapple, Glide
    gorlek:
      Grapple, DoubleJump OR Dash OR Glide OR Sword OR SentryJump=1 OR Damage=10
      Grapple, Bash, Grenade=1
      DoubleJump, TripleJump  # climb the far left wall
      Bash, Grenade=1, DoubleJump, Dash, Glide
      Bash, Grenade=2, DoubleJump, Dash OR Glide
      Bash, Grenade=3, DoubleJump
  conn WestGlades.MillApproach:
    gorlek: Grapple OR Glide
  conn OuterWellspring.EntranceDoor: free

anchor OuterWellspring.WestDoor at -892, -3992:  # Outside the door where you exit the first room
  refill Checkpoint

  # the wheel is only a shortcut, at least in moki doesn't open up anything new
  state OuterWellspring.WestDoorBlueMoonFree:
    moki: BreakWall=3, Launch
    gorlek, BreakWall=3, Bow OR Spear OR Shuriken OR Grenade OR Blaze OR Grapple:
      Bash, Grenade=1
      SentryJump=1
      Grapple, Damage=15, DoubleJump, TripleJump OR Dash  # go up on the left to get into range and then grapple to the corruption

  pickup OuterWellspring.HiddenHC:
    moki, OuterWellspring.WestDoorBlueMoonFree:
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Grapple, Launch
    gorlek:
      OuterWellspring.WestDoorBlueMoonFree:
        Grapple, DoubleJump, TripleJump OR Damage=15
        Grapple, Damage=15, Dash OR Glide
      Grapple, Bash, Grenade=1, DoubleJump, TripleJump OR Glide OR Damage=15
      Grapple, Bash, Grenade=1, Damage=15, Dash OR Glide
      Grapple, SentryJump=1, DoubleJump, TripleJump OR Glide OR Damage=15
      Grapple, SentryJump=1, Damage=15, Dash OR Glide
      Bash, Grenade=1, Launch
      SentryJump=1, Launch
    unsafe:
      Bash, Grenade=1, SentryJump=1, DoubleJump, TripleJump
  pickup OuterWellspring.EntranceRoofEX:
    moki: DoubleJump, Launch, Dash OR Glide

  conn InnerWellspring.WestDoor:
    moki: InnerWellspring.MiddleDoorsOpen
  conn OuterWellspring.EastDoor:
    moki:
      Bash, Grenade=1, DoubleJump, Dash OR Glide
      Bash, Grenade=1, Launch
      Launch, DoubleJump OR Dash OR Glide
      OuterWellspring.WestDoorBlueMoonFree, Grapple, DoubleJump, Dash OR Glide
      OuterWellspring.WestDoorBlueMoonFree, Grapple, Launch
    gorlek:
      Bash, Grenade=1, DoubleJump, TripleJump OR Sword OR Hammer
      SentryJump=1, DoubleJump, TripleJump OR Dash OR Glide OR Sword OR Hammer
      Launch, Sword OR Hammer OR Damage=15
      OuterWellspring.WestDoorBlueMoonFree, Grapple, DoubleJump, TripleJump OR Sword OR Hammer
      Grapple, Damage=15, DoubleJump, TripleJump OR Dash  # mirror from breaking the blue moon free since you don't need wall breakage to perform this
  conn OuterWellspring.AboveEntranceDoor:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      DoubleJump, Dash, Glide
      Launch
  conn OuterWellspring.EntranceDoor: free

anchor OuterWellspring.EastDoor at -814, -3973:  # Outside the door leading to the spin puzzle
  refill Checkpoint

  state OuterWellspring.WestDoorBlueMoonFree:
    moki, BreakWall=3, Bow OR Spear OR Grenade:
      DoubleJump OR Dash OR Glide
      Bash, Grenade=1
      InnerWellspring.TopDoorOpen, Grapple
    gorlek: BreakWall=3  # each weapon has its way of dealing with the spikes below

  quest OuterWellspring.TheLostCompass:
    moki: InnerWellspring.NeedleQI

  pickup OuterWellspring.RightWallOre:
    moki: DoubleJump OR Dash OR Glide OR Grapple OR Launch
    gorlek:
      Sword OR Hammer
      Bash, Grenade=1
  pickup OuterWellspring.RightWallEC:
    moki, BreakWall=20:
      DoubleJump, Dash
      Glide OR Launch
      Grapple, DoubleJump OR Dash
      Grapple, Bash, Grenade=1
    gorlek:
      BreakWall=20, DoubleJump, TripleJump
      DoubleJump, Sword
      Grapple, Sword OR Hammer
      BreakWall=20, Bash, Grenade=1, DoubleJump OR Dash
      Bash, Grenade=1, Sword OR Hammer
      BreakWall=20, Bash, Grenade=2
    unsafe: DoubleJump, Hammer, Damage=15

  conn InnerWellspring.EastDoor:
    moki: InnerWellspring.MiddleDoorsOpen
  conn OuterWellspring.AboveWestDoor:
    moki:
      InnerWellspring.TopDoorOpen, Grapple OR Launch
      InnerWellspring.TopDoorOpen, Bash, Grenade=1, DoubleJump
      Bash, Grenade=1, Launch
    gorlek:
      InnerWellspring.TopDoorOpen:
        SentryJump=1, DoubleJump OR Dash OR Glide OR Sword
        SentryJump=1, Hammer, Damage=10
        Bash, Grenade=1, Dash OR Glide OR Sword
        Bash, Grenade=1, Hammer, Damage=10
      Bash, Grenade=1, DoubleJump, TripleJump
      Bash, Grenade=1, Grapple
  conn OuterWellspring.WestDoor:
    moki: DoubleJump OR Dash OR Launch
    gorlek: Glide OR Sword OR Hammer
    unsafe: free
  conn OuterWellspring.RightWall:
    moki: Grapple OR Launch
    gorlek:
      DoubleJump, TripleJump, Dash OR Glide OR Sword OR Hammer OR Damage=10
      DoubleJump, TripleJump, Bash, Grenade=1
      DoubleJump, Dash, Glide OR Sword OR Hammer OR Damage=10
      DoubleJump, Dash, Bash, Grenade=1
      DoubleJump, Glide
      SentryJump=2  # follow up the second sentryjump with a weapon hover
      Bash, Grenade=2, DoubleJump OR Dash OR Glide OR Sword OR Hammer
  conn OuterWellspring.AboveEntranceDoor: free
  conn WestGlades.MillApproach:
    gorlek:
      DoubleJump OR Dash OR Sword OR Damage=20
      Bash, Grenade=1

anchor OuterWellspring.AboveWestDoor at -866, -3949:  # on the platform arcing over west door
  refill Energy=3:
    moki: Weapon

  pickup OuterWellspring.HiddenHC:
    moki:
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Launch, DoubleJump OR Dash OR Grapple OR Glide
    gorlek:
      Grapple, DoubleJump, TripleJump OR Damage=15
      Grapple, Damage=15, Dash OR Glide
      Launch, Sword OR Damage=15

  conn OuterWellspring.TopDoor:
    moki:
      Grapple OR Launch
      Bash, Grenade=1
    gorlek:
      Bash OR SentryJump=1
      InnerWellspring.TopDoorOpen, DoubleJump
  conn OuterWellspring.WestDoor:
    moki: Combat=Miner OR DoubleJump OR Dash OR Grapple OR Glide OR Launch
    gorlek: Sword OR Hammer OR Damage=15
  conn OuterWellspring.EastDoor:  # paths with top door open seem rather pointless?
    moki:
      DoubleJump, Dash
      Glide
    gorlek:
      Damage=15, DoubleJump OR Dash OR Sword OR Hammer
      DoubleJump, TripleJump
      Dash, Sword OR Hammer
  conn OuterWellspring.AboveEntranceDoor: free

anchor OuterWellspring.TopDoor at -836, -3927:  # Outside the door leading to the teleporter
  # state OuterWellspring.TrialActivation:
  #   moki:
  #     DoubleJump, Grapple, Dash OR Glide
  #     DoubleJump, Grapple, Bash, Grenade=1
  #     Bash, Grenade=2
  #     Launch

  pickup OuterWellspring.UltraGrappleShard:
    moki:
      Grapple, DoubleJump, Dash OR Glide
      Bash, Grenade=1
      Launch
    gorlek:
      SentryJump=1, DoubleJump OR Dash OR Glide  # generous extra abilities
      Grapple, DoubleJump, TripleJump OR Sword
      Grapple, Dash, Sword
      Grapple, Glide

  conn InnerWellspring.Teleporter:
    moki: InnerWellspring.TopDoorOpen
  conn OuterWellspring.EastDoor: free
  conn OuterWellspring.AboveWestDoor: free

# checkpoint at -973, -3949
# checkpoint at -969, -3910
# checkpoint at -902, -3895

anchor OuterWellspring.RightWall at -727, -3961:  # at the ledge going towards the trial room
  refill Checkpoint

  pickup OuterWellspring.RightWallEX:
    moki:
      Grapple, DoubleJump, Dash OR Glide
      DoubleJump, Bash, Grenade=1
      Launch
    gorlek:
      Grapple, DoubleJump, TripleJump
      SentryJump=1, DoubleJump OR Dash OR Glide
      Bash, Grenade=1, Dash OR Glide
    unsafe:
      Grapple, Dash, Glide  # Might be a bit tight for gorlek
  pickup OuterWellspring.RightWallOre:
    moki: DoubleJump OR Dash OR Glide OR Grapple OR Launch
    gorlek: free
  pickup OuterWellspring.RightWallEC:
    moki, BreakWall=20:
      DoubleJump, Dash
      Glide OR Launch
      Grapple, DoubleJump OR Dash
    gorlek:
      BreakWall=20, DoubleJump OR Dash
      Sword OR Hammer

  conn OuterWellspring.TrialRoom:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Launch
    gorlek:
      Grapple
      SentryJump=1
      Bash, Grenade=1
  conn OuterWellspring.EastDoor:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Launch
    gorlek:
      Grapple OR Glide
      Bash, Grenade=1, DoubleJump OR Dash OR Sword OR Hammer
      DoubleJump, TripleJump OR Dash OR Sword
      DoubleJump, Hammer, Damage=15
      SentryJump=1, DoubleJump OR Dash
  conn OuterWellspring.AboveEntranceDoor:
    moki: DoubleJump OR Dash OR Glide OR Grapple OR Launch
    gorlek:
      Sword OR Hammer
      Bash, Grenade=1
      SentryJump=1
      Damage=15
  conn WestGlades.MillApproach:
    gorlek:
      Sword
      Bash, Grenade=1
      SentryJump=1 OR Damage=20

anchor OuterWellspring.TrialRoom at -684, -3947:  # checkpoint on the way to trial start
  refill Checkpoint
  refill Health=1
  refill Energy=1:
    moki: Weapon

  pickup OuterWellspring.TrialOre:
    moki:
      Grapple, DoubleJump
      Launch
    gorlek:
      Dash OR Glide
      DoubleJump, Sword OR Hammer
    unsafe: DoubleJump

  conn OuterWellspring.RightWall: free

region InnerWellspring:
  moki: Danger=25
  gorlek: free
  unsafe: free

anchor InnerWellspring.EntranceDoor at -1263, -3952:  # Inside the door where you enter the first room
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  state InnerWellspring.ShortCutWheel:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Launch
    gorlek:
      DoubleJump, TripleJump, Damage=15  # bit tricky
      Grapple, Damage=15  # bit tricky
      Grapple, Sword OR Hammer
  state InnerWellspring.ThreeWheels:
    moki: BreakWall=3

  pickup InnerWellspring.ThornShard:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1
      Launch
      InnerWellspring.ThreeWheels, DoubleJump OR Dash OR Glide
    gorlek:
      Bash, Grenade=1, Dash OR Glide OR Sword OR Hammer  # Bash grenade up right side, jump to left side vines, use abilities to reach platform
      SentryJump=1, Sword OR Hammer                      # As above but use sentry jump on right side, then use sword/hammer to reach platform
      DoubleJump, TripleJump
      Grapple, Sword OR Hammer
    unsafe:
      DoubleJump, Hammer, Dash OR Glide
      Grapple  # seems like a fun kii path
  pickup InnerWellspring.ThornEX:
    moki:
      Grapple, DoubleJump, Dash OR Glide
      Launch
    gorlek:
      Bash, Grenade=1, DoubleJump, TripleJump  # two working grenade angles to solve
      Bash, Grenade=2, DoubleJump, Damage=15, Dash OR Glide  # two working grenade angles to solve
      DoubleJump, TripleJump, Damage=15
      SentryJump=1, DoubleJump, TripleJump, Dash OR Glide
      SentryJump=2, Damage=15, DoubleJump, Dash OR Glide
      SentryJump=2, Damage=15, Dash, Glide
      Grapple, Damage=15, DoubleJump OR Dash OR Glide OR Sword
      Grapple, DoubleJump, Sword OR Hammer
      Grapple, Dash, Glide OR Sword OR Hammer
    unsafe:
      Dash, DoubleJump, Sword OR Hammer
      SentryJump=2, Damage=15, Sword
  pickup InnerWellspring.ThreeWheelsEX:
    moki:
      Bash, Grenade=1
      Launch
      InnerWellspring.ThreeWheels
    gorlek:
      DoubleJump, TripleJump
      SentryJump=1
    unsafe:
      Grenade=1
  pickup InnerWellspring.WaterSwitchEX:
    moki: Water, WaterDash

  conn OuterWellspring.EntranceDoor: free
  conn InnerWellspring.DrainRoom:
    moki:
      DoubleJump OR Dash OR Glide OR Launch
      InnerWellspring.ThreeWheels, Grapple
      InnerWellspring.ThreeWheels, Bash, Grenade=1
    gorlek:
      Sword OR Hammer
      Bash, Grenade=1, Damage=15  # kii would do this damageless
      InnerWellspring.ThreeWheels, Damage=15
  conn InnerWellspring.WestDoor:
    moki:  # this in combination with the ShortCutWheel state accounts for all paths to the EX in the wheel
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Launch
    gorlek:
      DoubleJump, TripleJump, Damage=15
      Grapple, DoubleJump OR Dash  # pretty tight
      Grapple, Damage=15, Glide OR Sword OR Hammer
    unsafe:
      Grapple, Hammer, Glide

# checkpoint at -1336, -3943

anchor InnerWellspring.DrainRoom at -1167, -3946:  # Left of the water you can drain
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  conn InnerWellspring.EntranceDoor:
    moki:
      DoubleJump OR Dash OR Grapple OR Glide OR Launch
      Bash, Grenade=1
    gorlek: free
  conn InnerWellspring.DrainRoomCenter:
    moki:
      DoubleJump, Glide
      Grapple OR Launch
      Glide, Bash, Grenade=2
      InnerWellspring.ThreeWheels, BreakWall=16, DoubleJump  # break the wheel to the right free - threewheels state is free enough that alternatives don't seem worth noting
      InnerWellspring.ThreeWheels, BreakWall=16, Dash, Bash, Grenade=1  # break the wheel to the right free - threewheels state is free enough that alternatives don't seem worth noting
      Water, DoubleJump  # if you drained the water, you can use the bottom of the wheel instead
      Water, WaterDash, Dash, Bash, Grenade=1  # if you drained the water, you can use the bottom of the wheel instead
    gorlek:
      # if you have a weapon here, you can break the three wheels free. Redundant paths without the three wheels state were removed.
      DoubleJump, TripleJump OR Dash OR Sword OR Damage=15
      Dash, Glide OR Damage=15
      Glide, Damage=15
      Bash, Grenade=1, DoubleJump OR Glide
      SentryJump=1, Glide
      InnerWellspring.ThreeWheels, BreakWall=16:  # break the wheel to the right free - threewheels state is free enough that alternatives don't seem worth noting
        Dash
        Damage=15, Sword OR Hammer
        Bash, Grenade=1, Sword OR Hammer
        SentryJump=1, Sword OR Hammer
      Water, Dash  # if you drained the water, you can use the bottom of the wheel instead
      Water, Bash, Grenade=4  # if you drained the water, you can use the bottom of the wheel instead
      Water, WaterDash, Bash, Grenade=3, BreakWall=10  # if you drained the water, you can go through through the drained room instead
      Water, WaterDash, Bash, Grenade=2, Damage=15, BreakWall=10  # if you drained the water, you can go through through the drained room instead
    unsafe:
      InnerWellspring.ThreeWheels, BreakWall=16, Bash, Grenade=4  # not hard, but grenades can vanish on rotating objects sometimes
  conn InnerWellspring.DrainAreaEntrance:
    moki: InnerWellspring.DrainLever, DoubleJump OR Dash OR Grapple OR Glide OR Launch
    gorlek, InnerWellspring.DrainLever:
      Sword OR Hammer OR Damage=15
      Bash, Grenade=1
    unsafe: InnerWellspring.DrainLever
  conn InnerWellspring.DrainAreaExit:
    gorlek:
      # if you have a weapon here, you can break the three wheels free. Redundant paths without the three wheels state were removed.
      ShurikenBreak=10:  # cross the gap going over
        Grapple OR Glide OR Launch
        DoubleJump, TripleJump
        Damage=15, DoubleJump OR Dash
        Bash, Grenade=1, DoubleJump, Dash
      InnerWellspring.DrainLever, ShurikenBreak=10:  # use the bottom of the wheel, don't have to free it
        DoubleJump OR Dash
        Bash, Grenade=2
      InnerWellspring.ThreeWheels, BreakWall=16, ShurikenBreak=10, DoubleJump OR Dash OR Sword OR Hammer  # break the wheel to the right free - threewheels state is free enough that alternatives don't seem worth noting
      ShurikenBreak=10, Water, DoubleJump OR Dash  # if you drained the water, you can use the bottom of the wheel instead
      ShurikenBreak=10, Water, Bash, Grenade=1, Damage=15  # if you drained the water, you can go through through the drained room instead
      ShurikenBreak=10, Water, Bash, Grenade=2  # if you drained the water, you can go through through the drained room instead
    unsafe:
      InnerWellspring.ThreeWheels, BreakWall=16, ShurikenBreak=10, Bash, Grenade=2  # not hard, but grenades can vanish on rotating objects sometimes

anchor InnerWellspring.DrainAreaEntrance at -1128, -3968:  # On the wall after dropping through the gate draining the water
  pickup InnerWellspring.DrainHC:
    moki:
      Water OR DoubleJump OR Grapple OR Launch  # bit of a weird pickup
      Bash, Grenade=1  # seems fine
    gorlek: Dash OR Bash OR Glide OR Damage=20
    unsafe: free

  conn InnerWellspring.DrainAreaExit:
    moki:  # the skeetos just want to be bashed here
      DoubleJump, Water OR Bash
      Dash, Bash, Grenade=1
      Water, Bash, Grenade=1, Grapple OR Glide
      Launch
    gorlek:
      DoubleJump, Water OR TripleJump OR Dash OR Bash OR Glide OR Sword OR Hammer OR Damage=20
      Bash, Dash, Sword OR Hammer
      Bash, Grenade=1, Water OR Dash OR Damage=20
      Bash, SentryJump=1, Water, Sword OR Hammer
      Bash, SentryJump=1, Damage=20, Sword OR Hammer
    unsafe: Dash, Hammer, Damage=20  # Technically possible without damage

# checkpoint at -1093, -3950
# checkpoint at the drained room below somewhere

anchor InnerWellspring.DrainAreaExit at -1064, -3961:  # At DrainEX
  pickup InnerWellspring.DrainEX: free
  pickup InnerWellspring.DrainHC:
    moki: Water OR Launch
    gorlek:
      DoubleJump, TripleJump
      DoubleJump, Dash, Sword
      Bash, DoubleJump OR Dash  # luring the skeetos with other abilities seems tricky

  conn InnerWellspring.DrainRoom:
    moki, BreakWall=10:
      DoubleJump, Dash OR Glide OR Grapple
      Dash, Glide, Water
      Bash, Grenade=2, Grapple
      Bash, Grenade=2, Dash, Glide
      Bash, Grenade=1, Dash, Grapple
      Launch
    gorlek, BreakWall=10:
      Glide, Water OR Damage=20
      Water, Sword
      Water, Grapple, Damage=15, Bash OR Hammer
      Water, Bash, Grenade=2
      Water, Bash, Grenade=1, Damage=15
      Water, SentryJump=1, Damage=15
  conn InnerWellspring.DrainRoomCenter:
    moki, BreakWall=10:
      DoubleJump OR Launch
      Dash, Bash, Grenade=2
      Bash, Grenade=3
    gorlek, BreakWall=10:
      Dash
      Glide, Grapple OR SentryJump=1 OR Damage=15
      Sword, Grapple OR SentryJump=1 OR Damage=15
      Bash, Grenade=1, Grapple OR Glide OR Sword OR Damage=15
      Bash, Grenade=2
      SentryJump=2, Grapple OR Damage=15
      SentryJump=3

# checkpoint at the anchor below, just hard to reach

anchor InnerWellspring.DrainRoomCenter at -1116, -3924:  # Standing on the wheel in the center of the room
  state InnerWellspring.DrainRoomTopWheel:  # breaking the top wheel free; has a state because it can be used to connect from top right to top left
    moki:
      BreakWall=16, Bow OR Grenade OR Spear
      Launch, BreakWall=16
    gorlek: BreakWall=16

  conn InnerWellspring.DrainRoom:
    moki:
      DoubleJump, Dash
      Grapple OR Glide OR Launch
    gorlek:
      DoubleJump OR Dash OR Sword
      Hammer, Damage=20
      Hammer, Water, Damage=15
    unsafe: Bash, Grenade=1  # could've been gorlek maybe, just seems a bit awkward
  conn InnerWellspring.DrainAreaEntrance:
    moki: InnerWellspring.DrainLever
  conn InnerWellspring.DrainAreaExit:
    gorlek: ShurikenBreak=10
  conn InnerWellspring.DrainRoomTop:
    moki: InnerWellspring.DrainRoomTopWheel OR Grapple OR Launch
    gorlek:
      DoubleJump OR Dash
      Bash, Grenade=1

anchor InnerWellspring.DrainRoomTop at -1086, -3908:  # At the right ledge on top of the drain room
  refill Checkpoint
  refill Health=1

  pickup InnerWellspring.LaserOre:
    moki:
      DoubleJump, Dash OR Glide
      Dash, Glide, Combat=Miner OR Bash
      Launch
    gorlek:
      DoubleJump OR Dash OR Sword
      Glide, Combat=Miner OR Bash
    unsafe: Bash, Grenade=1

  conn InnerWellspring.DrainRoomCenter: free
  conn InnerWellspring.BelowDrainLever:
    moki:
      DoubleJump, Dash OR Glide
      InnerWellspring.DrainRoomTopWheel, Grapple
      Launch
    gorlek:
      DoubleJump, TripleJump OR Sword OR Hammer OR Damage=15
      Dash, Glide OR Sword OR Hammer OR Damage=15
      Grapple, Damage=15
      Grapple, SentryJump=1, Sword OR Hammer
      Bash, Grenade=1, DoubleJump OR Dash OR Grapple
      Bash, Grenade=1, Glide, Damage=15
      SentryJump=1, Sword, Glide
      InnerWellspring.DrainRoomTopWheel, Bash, Grenade=1
      InnerWellspring.DrainRoomTopWheel, SentryJump=1
    unsafe: DoubleJump OR Dash OR Grapple

anchor InnerWellspring.BelowDrainLever at -1153, -3895:  # In the first room below the drain lever
  refill Checkpoint

  state InnerWellspring.UpperCorruption:  # the fourth corruption you see on your way
    moki, BreakWall=16:
      DoubleJump, Dash OR Glide
      Launch
    gorlek, BreakWall=16:
      Damage=15
      DoubleJump, TripleJump OR Sword OR Hammer
  state InnerWellspring.DrainLever:
    moki:
      Bash, Grenade=1  # not softlockable: UpperCorruption solves this
      InnerWellspring.UpperCorruption, DoubleJump
      Launch
    gorlek:
      DoubleJump, TripleJump, Damage=15
      InnerWellspring.UpperCorruption OR SentryJump=1
    unsafe: Grenade=1

  pickup InnerWellspring.LupoEX:
    moki:
      DoubleJump, Dash OR Glide
      Launch
    gorlek:
      Damage=15
      DoubleJump, TripleJump OR Sword OR Hammer
  pickup InnerWellspring.LeverEC:
    moki:
      Bash, Grenade=2  # not softlockable: UpperCorruption solves this
      Bash, Grenade=1, Grapple, DoubleJump OR Dash OR Glide  # not softlockable: UpperCorruption solves this
      InnerWellspring.UpperCorruption, DoubleJump, Bash, Grenade=1
      InnerWellspring.UpperCorruption, DoubleJump, Grapple
      Launch
    gorlek:
      DoubleJump, TripleJump, Damage=15, Bash, Grenade=1
      DoubleJump, TripleJump, Damage=15, Grapple OR SentryJump=1
      Bash, Grenade=1, Grapple
      SentryJump=2
      SentryJump=1, Grapple
      InnerWellspring.UpperCorruption, Bash, Grenade=1
      InnerWellspring.UpperCorruption, Grapple OR SentryJump=1
      InnerWellspring.UpperCorruption, DoubleJump, TripleJump, Damage=15
    unsafe:
      DoubleJump, TripleJump, Damage=15
      Grenade=2

  conn InnerWellspring.WestDoor:
    moki:
      DoubleJump, Bash, Grenade=1
      InnerWellspring.UpperCorruption OR Launch
    gorlek:
      DoubleJump, TripleJump, Damage=15
      Bash, Grenade=1
      SentryJump=1, Damage=15
      SentryJump=1, DoubleJump, Glide
      SentryJump=2
    unsafe: Grenade=2
  conn InnerWellspring.DrainRoomTop:
    moki: DoubleJump OR Dash OR Glide OR Launch
    gorlek: free
  conn InnerWellspring.DrainRoomCenter: free

anchor InnerWellspring.WestDoor at -1216, -3897:  # Inside the door where you exit the first room
  refill Checkpoint
  refill Health=2
  refill Energy=3:
    moki: Weapon

  state InnerWellspring.MiddleDoorsOpen:
    moki:
      Grapple
      Bash, Grenade=1, Launch
    gorlek:
      Bash, DoubleJump, TripleJump  # entertain the mantis
      SentryJump=1, DoubleJump, TripleJump  # solvable through wraparound if you don't sjump well
      Launch
    unsafe:
      Hammer, DoubleJump, TripleJump
      SentryJump=1

  pickup InnerWellspring.ShortcutWheelEX:
    moki: InnerWellspring.ShortCutWheel
  pickup InnerWellspring.LupoMap:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Bash  # bash the skeeto
      InnerWellspring.UpperCorruption
    gorlek:
      Grapple
      SentryJump=1, Sword  # hammer locking your movement makes this awkward
    unsafe: DoubleJump  # kind of easy
  pickup InnerWellspring.GrappleTreeEX:
    moki:
      DoubleJump, Grapple
      Bash, Grenade=2
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Launch
    gorlek:
      Bash, Grenade=1
      DoubleJump, TripleJump OR Hammer
      SentryJump=1
      Grapple, Dash
    unsafe:
      DoubleJump, Sword
      Grenade=1
  pickup InnerWellspring.GrappleTree:
    moki:
      DoubleJump OR Dash OR Glide OR Grapple OR Launch
      Bash, Grenade=1  # jumper would be a lure
    gorlek: free  # kind of weird that this works

  conn OuterWellspring.WestDoor:
    moki: InnerWellspring.MiddleDoorsOpen
  conn InnerWellspring.BelowDrainLever: free

anchor InnerWellspring.EastDoor at -1190, -3733:  # Inside the door leading to the spin puzzle
  refill Checkpoint
  refill Health=1
  refill Energy=4:
    moki: Weapon

  state InnerWellspring.SpinArena:  # finishing the arena and destroying the corruption that open the door to spin puzzle
    moki: Combat=2xLizard+3xMantis+Miner, DoubleJump OR Dash OR Glide OR Launch
    gorlek: Combat=2xLizard+3xMantis+Miner  # different ways to solve
  state InnerWellspring.SpinPuzzleSolved:  # Having Water changes this room (not considered in moki)
    moki, InnerWellspring.SpinArena:
      Grapple, DoubleJump OR Dash
      Grapple, Bash, Grenade=1
      Launch
    gorlek, InnerWellspring.SpinArena:
      Grapple, Glide OR Sword OR Hammer
      Water, DoubleJump OR Grapple OR SentryJump=1
      Water, Bash, Grenade=1
      Water, Damage=15, Dash OR Sword
    unsafe, InnerWellspring.SpinArena:
      Grapple
      DoubleJump, TripleJump, Hammer
      Water, Glide, Damage=15
      Water, Hammer

  quest InnerWellspring.HandToHandHerbs:
    moki: GladesTown.HandToHandPouch
  quest InnerWellspring.NeedleQI:
    moki, InnerWellspring.TopDoorOpen:
      Grapple, DoubleJump OR Launch
      Bash, Grenade=1, DoubleJump OR Launch
      Launch, DoubleJump
    gorlek, InnerWellspring.TopDoorOpen:
      Bash, Grenade=1
      Grapple OR Launch

  pickup InnerWellspring.AboveSpinArenaEX:
    moki:
      Grapple, DoubleJump OR Dash
      Launch
    gorlek:
      Grapple, Sword OR SentryJump=1 OR Damage=15
      DoubleJump, TripleJump, SentryJump=1 OR Damage=15
      ShurikenBreak=10
    unsafe: DoubleJump
  pickup InnerWellspring.RotateRoomEX:  # after pulling two of the three levers, this pickup is blocked off. Due to that, fully solving the puzzle is the only non-softlockable solution for this pickup
    moki: InnerWellspring.SpinArena, InnerWellspring.SpinPuzzleSolved
  pickup InnerWellspring.RotateRoomOre:  # blocked off until you fully solve the puzzle
    moki: InnerWellspring.SpinArena, InnerWellspring.SpinPuzzleSolved

  conn OuterWellspring.EastDoor: free
  conn InnerWellspring.PastSpinPuzzle:  # while there are abilitysets to get through the spinning room regardless of state, they are more expensive than just solving the puzzle
    moki: InnerWellspring.SpinArena, InnerWellspring.SpinPuzzleSolved, Grapple OR Launch
    gorlek: InnerWellspring.SpinArena, InnerWellspring.SpinPuzzleSolved, Water  # gorlek is fun

anchor InnerWellspring.PastSpinPuzzle at -1101, -3778:  # Right after exiting the spin puzzle room
  refill Checkpoint

  state InnerWellspring.TopDoorOpen:
    moki, BreakWall=16:
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Grapple, Launch
    gorlek, BreakWall=16:
      Grapple, DoubleJump OR Dash OR Glide OR Sword OR Hammer
      Water, Grapple, Damage=15
      Launch, DoubleJump, TripleJump
      Launch, Damage=15, DoubleJump OR Dash OR Glide
      Water, WaterDash, Launch, DoubleJump
    unsafe, BreakWall=16:
      Water, WaterDash, Launch, Damage=15
      Grapple, Damage=15

  quest InnerWellspring.NeedleQI:
    moki, InnerWellspring.TopDoorOpen:
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Grapple, Launch
    gorlek, InnerWellspring.TopDoorOpen:
      Grapple, DoubleJump OR Dash OR Glide OR Sword OR Hammer
      Water, Grapple, Damage=15
      Launch, DoubleJump, TripleJump
      Launch, Damage=15, DoubleJump OR Dash OR Glide
      Water, WaterDash, Launch, DoubleJump
    unsafe, InnerWellspring.TopDoorOpen:
      Water, WaterDash, Launch, Damage=15
      Grapple, Damage=15

  conn InnerWellspring.EastDoor:
    moki, InnerWellspring.TopDoorOpen:
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Grapple, Launch
    gorlek, InnerWellspring.TopDoorOpen:
      Grapple, DoubleJump OR Dash OR Glide OR Sword OR Hammer
      Water, Grapple, Damage=15
      Launch, DoubleJump, TripleJump
      Launch, Damage=15, DoubleJump OR Dash OR Glide
      Water, WaterDash, Launch, DoubleJump
    unsafe, InnerWellspring.TopDoorOpen:
      Water, WaterDash, Launch, Damage=15
      Grapple, Damage=15
  # backwards connections would be cool here someday

# checkpoint at -1103, -3725

anchor InnerWellspring.Teleporter at -1308, -3675:  # At the teleporter
  refill Full

  quest InnerWellspring.BlueMoonSeed:
    moki:
      DoubleJump, Dash
      Bash, Grenade=1
      Launch
    gorlek:
      DoubleJump, TripleJump OR Glide OR Sword OR Hammer
      SentryJump=1
    unsafe: Dash, Hammer

  pickup InnerWellspring.LibraryEX: free
  pickup InnerWellspring.AboveTpEX:
    moki:
      DoubleJump, Dash OR Glide
      Bash, Grenade=1
      Launch
    gorlek:
      DoubleJump, TripleJump                 # Can be done with just double jump but the first jump is precise
      SentryJump=1, Sword
    unsafe:
      DoubleJump, Sword OR Hammer            # Sword path uses platform on the right, Hammer path uses the wall to the left of tp
  pickup InnerWellspring.SwimOre:
    moki: Water

  conn Teleporters: free
  conn OuterWellspring.TopDoor: free
  conn OpherShop: free
  conn InnerWellspring.EscapeSequence:
    moki:
      DoubleJump, Dash, Grapple
      Bash, Grenade=1, Grapple
      Bash, Grenade=1, DoubleJump, Dash
      Bash, Grenade=2
      Launch
    gorlek:
      DoubleJump, TripleJump OR Dash OR Glide OR Sword OR Hammer
      Bash, Grenade=1, DoubleJump
      SentryJump=1, DoubleJump OR Grapple
      SentryJump=2
    unsafe:
      DoubleJump OR SentryJump=1
      Dash, Hammer

# checkpoint at -1249, -3641

anchor InnerWellspring.EscapeSequence:
  refill Full
  quest InnerWellspring.WaterEscape:
    moki:
      Bash, Grapple, DoubleJump, Dash OR Glide
      Bash, Grapple, Dash, Glide
      Grapple, Launch
    gorlek:
      Grapple, DoubleJump, Dash  # bit spicy
      Bash, Grapple, DoubleJump OR Dash OR Glide
      Launch, Damage=15  # Assumes at least one damage is taken in the final grapple section, probably possible without
    unsafe:
      Grapple, DoubleJump
      Grapple, Dash
  pickup InnerWellspring.EscapeRevisitEX:
    moki: InnerWellspring.WaterEscape

region WoodsEntry:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor WoodsEntry.ShriekMeet at 391, -4198:  # The ledge after swimming through the Hollow connection
  refill Checkpoint

  pickup WoodsEntry.LedgeOre:
    gorlek: Launch
  pickup WoodsEntry.MudPitEX:
    moki:
      Combat=Tentacle+Balloon, DoubleJump OR Dash OR Glide
      Bash, DoubleJump OR Dash OR Glide
      Launch
      Bash, Grenade=2
    gorlek: Combat=Tentacle+Balloon OR Bash OR Damage=10  # Jump on the bubble

  conn WoodsEntry.BelowTeleporter:
    moki:
      Combat=Balloon, Bash, DoubleJump OR Dash OR Glide
      Combat=Balloon, Launch
    gorlek:  # for the last balloon, lure it away or use the checkpoint to despawn it
      Combat=Tentacle+Balloon, DoubleJump OR Dash OR Glide
      Bash, DoubleJump OR Dash OR Glide
      Damage=10, DoubleJump OR Dash OR Glide
      Launch
    unsafe: Sword OR Hammer  # Careful with sword and hammer because it can break bubbles
  conn EastHollow.Kwolok:
    gorlek: Water, Bash, Damage=10  # bit hard but important for random spawn

# checkpoint at 478, -4205
# checkpoint at 525, -4205

anchor WoodsEntry.BelowTeleporter at 591, -4198:  # Read the name
  refill Checkpoint

  conn WoodsEntry.ShriekMeet:
    moki:
      Combat=Balloon, Bash, DoubleJump, Dash OR Glide
      Combat=Balloon, Bash, Launch
    gorlek:
      Combat=Tentacle, DoubleJump, TripleJump OR Dash OR Glide OR Sword
      Bash, DoubleJump, TripleJump OR Dash OR Glide OR Sword
      Damage=10, DoubleJump, TripleJump OR Dash OR Glide OR Sword
      Launch
    unsafe:
      Dash, Sword OR Hammer  # Jump on the first bubble, dash into the corner, dash again then up slash
      Glide, Sword OR Hammer  # Jump on the first bubble, glide then up slash near the 2nd bubble (not too close, you can pop the bubble with an upslash)
  conn WoodsEntry.Teleporter:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch
    gorlek:
      Grapple, Sword
      Grapple, Hammer, Damage=15  # the plant can be a bit awkward
      SentryJump=1, Sword
      SentryJump=1, Hammer, Damage=15  # again mildly awkward
      DoubleJump, TripleJump  # Either optimize the triplejump or use the bubble for a more lenient setup
    unsafe:
      Bash  # the tentacle despawns if you die at the checkpoint next to it
      DoubleJump, Hammer  # Double jump to the right wall, upslash to start climbing it (?)
  conn WoodsEntry.TwoKeystoneRoom:
    moki: Combat=2xBalloon, DoubleJump OR Dash OR Glide OR Launch
    gorlek:
      Damage=20, DoubleJump OR Dash OR Glide OR Launch  # both baloons are sort of dangerous, damage is for them
      Combat=2xBalloon, Sword OR Hammer

anchor WoodsEntry.Teleporter at 611, -4162:  # At the West Woods Teleporter
  refill Full

  quest WoodsEntry.LastTreeBranch: free
  quest WoodsEntry.DollQI:
    moki: GladesTown.FamilyReunionKey
  quest WoodsEntry.TreeSeed:
    moki: TuleyShop.LastTreeBranchRejected

  pickup WoodsEntry.TpEX: free
  pickup WoodsEntry.LeafPileEX:
    moki: Flap
  pickup WoodsEntry.LedgeOre:
    moki:
      Glide, DoubleJump OR Launch
      Bash, Grenade=1, Glide OR Launch
      DoubleJump, Dash, Launch  # coming from below you'd just need Launch
    gorlek:
      Glide, Dash OR Sword OR Hammer  # from the kind of pillar
      DoubleJump, TripleJump, Dash, Sword OR Hammer
      SentryJump=1, DoubleJump, Dash, Sword OR Hammer  # Dash after the apex of the sjump then sword's full combo + up slash
      Bash, Grenade=1, DoubleJump, TripleJump OR Sword OR Hammer
      Bash, Grenade=1, Dash
    unsafe:
      Bash, Grenade=1, DoubleJump OR Sword  # Need a bash glide

  conn Teleporters: free
  conn WoodsEntry.ShriekMeet: free
  conn WoodsEntry.BelowTeleporter: free

anchor WoodsEntry.TwoKeystoneRoom at 672, -4183:  # In front of the keystone door
  refill Checkpoint
  refill Energy=3:
    moki: WoodsEntry.KeystoneDoor, Weapon

  state WoodsEntry.KeystoneDoor:
    moki: Keystone=2

  pickup WoodsEntry.LowerKS:
    moki: DoubleJump OR Dash OR Glide  # Launch is awful
    gorlek: Launch OR Sword OR Hammer  # different ways to solve
    unsafe: free  # Jump on the first bubble just before it disappears
  pickup WoodsEntry.UpperKS:
    moki: DoubleJump OR Launch
    gorlek:
      Hammer, Dash
      Bash, Grenade=1
    unsafe:
      SentryJump=1

  conn WoodsMain.AfterKuMeet:
    moki: WoodsEntry.KeystoneDoor, Combat=2xSkeeto+Tentacle OR Bash OR Launch
    gorlek: WoodsEntry.KeystoneDoor, Damage=10
  conn WoodsEntry.BelowTeleporter:
    moki: Combat=2xBalloon, DoubleJump OR Glide OR Launch
    gorlek: DoubleJump OR Dash OR Sword
    unsafe: Hammer OR Flash=1 OR Sentry=1 OR Shuriken=1

region WoodsMain:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor WoodsMain.AfterKuMeet at 856, -4192:  # At the upper ledge opening up to the room after finding Ku
  refill Checkpoint
  state WoodsEntry.KeystoneDoor:
    moki: Keystone=2, Combat=2xSkeeto+Tentacle OR Bash OR Launch
    gorlek: Keystone=2, Damage=10

  conn WoodsMain.BelowFourKeystoneRoom:
    moki:
      DoubleJump, Dash
      Bash OR Glide OR Launch  # bash uses the enemy
    gorlek:
      DoubleJump, Sword  # many others work, but this lines up so beautifully oriGlow
      Dash, Sword OR Hammer
      SentryJump=1, Sword  # sjump then full sword combo
    unsafe:
      Dash  # Dash close to the edge, coyote jump, dash again; or triple dash
  conn WoodsEntry.TwoKeystoneRoom:
    moki: WoodsEntry.KeystoneDoor, Combat=2xSkeeto+Tentacle OR Bash OR Launch
    gorlek: WoodsEntry.KeystoneDoor, Damage=10

anchor WoodsMain.BelowFourKeystoneRoom at 951, -4210:  # At the first leaf pile after meeting Ku
  pickup WoodsMain.LowerLeafPileEX:
    moki: Flap

  conn WoodsMain.FourKeystoneRoom:
    moki: Combat=2xBalloon, Flap, Glide
    gorlek: Flap, Glide  # Flap kills these
  conn WoodsMain.HiddenOreLedge:
    moki, Combat=2xBalloon:
      Bash, Grenade=3, DoubleJump  # different ways to solve
      Bash, Grenade=1, DoubleJump, Dash, Glide  # different ways to solve
      Launch
    gorlek:
      Combat=2xBalloon, DoubleJump, TripleJump, Dash OR Bash OR Glide OR Sword OR Hammer OR Damage=15
      Combat=Balloon, SentryJump=1, DoubleJump, TripleJump
      SentryJump=1, Sword, DoubleJump, Bash  # bash the plant above and sword hover
      Damage=20, Bash, Grenade=2, DoubleJump OR Dash OR Glide
      Damage=20, Launch
    unsafe:
      DoubleJump, Dash  # Perform wrap-around double jumps on the far right wall under the ore
      DoubleJump, SentryJump=1  # DoubleJump + full sword combo + up slash from the breakable wall to reach the left platform
      DoubleJump, TripleJump, Dash OR Bash OR Glide OR Sword OR Hammer OR Damage=15
      DoubleJump, Dash, Bash OR Glide OR Sword OR Hammer OR Damage=15
      Launch  # Bait an enemy near the wall then launch away to avoid damage thanks to launch invincibility
  conn WoodsMain.AfterKuMeet:
    moki:
      Bash, Grenade=2, Damage=10  # uses the enemy
      Bash, Grenade=1, Damage=10, DoubleJump OR Dash  # uses the enemy
      Launch, DoubleJump OR Dash OR Bash OR Glide  # bash uses the enemy
    gorlek:
      Bash, DoubleJump, TripleJump
      Bash, Grenade=1 OR SentryJump=1
      Launch, Sword OR Hammer
    unsafe:
      DoubleJump, Sword  # Keep hitting the tentacle with sword to reset your double jump
      Launch  # precise angle

anchor WoodsMain.HiddenOreLedge at 982, -4175:  # Next to hidden ore, without the wall being broken - paths would be complicated otherwise
  pickup WoodsMain.BehindWallOre:
    moki: BreakWall=20
  pickup WoodsMain.BelowKeystonesEX:
    moki:
      Glide, DoubleJump
      Bash, DoubleJump OR Dash OR Glide OR Launch
    gorlek:
      DoubleJump, TripleJump OR Dash
      Glide, Dash OR Sword OR Hammer  # for the weapons, glide below and use the up attack
    unsafe:
      Damage=15, DoubleJump OR Dash  # slides off the wall, take a damage boost and djump/dash when near the pickup
      Dash  # Dash against the wall to reset it
  pickup WoodsMain.LowerKS:
    gorlek:
      Launch  # launch on the wall near WoodsMain.BelowKeystonesEX then launch again
      Glide, Bash  # glide above the tentacle and bash its projectiles to reach the floating platform
      Glide, DoubleJump, TripleJump  # glide and triple jump to reach the floating platform
      Glide, Dash, DoubleJump, Sword OR Hammer  # glide, dash when just bellow the pickup, double jump and up slash to reach the floating platform

  conn WoodsMain.BelowFourKeystoneRoom: free
  conn WoodsMain.FourKeystoneRoom:
    moki:
      DoubleJump, Dash, Glide
      Launch
    gorlek:
      DoubleJump, TripleJump OR Dash
      Bash, Grenade=1, Dash  # Shoot a grenade from the breakable wall. Dash to reach the grenade and bash it to get on the left platform
  conn WoodsMain.AfterKuMeet:  # paths gliding to the left, either from above or below
    gorlek:
      Glide, DoubleJump, TripleJump
      Glide, SentryJump=1

# checkpoint at 906, -4136

anchor WoodsMain.FourKeystoneRoom at 944, -4137:  # In front of the four keystone door
  refill Checkpoint

  state WoodsMain.KeystoneDoor:
    moki: Keystone=4

  pickup WoodsMain.MiddleLeafPileEX:
    moki: Flap
  pickup WoodsMain.RightKS:
    moki:
      Glide OR Launch
      Bash, Grenade=1
    gorlek:
      Bash  # so many skeeto friends oriGlow
      SentryJump=1
      DoubleJump, TripleJump
    unsafe: DoubleJump  # Climb the left wall to get on the right wall, let ori slide slowly then double jump and quickly turn around to catch the other side of the wall
  pickup WoodsMain.UpperKS:
    moki, BreakWall=3:
      Glide OR Launch
      Bash, Grenade=1, DoubleJump OR Dash
    gorlek:
      DoubleJump, TripleJump
      Combat=3xSkeeto, SentryJump=1, Sword OR DoubleJump OR Dash
      Bash, Grenade=1 OR DoubleJump OR Dash
    unsafe: BreakWall=3, DoubleJump OR Bash OR SentryJump=2  # start your double jump from the higher floor near the spikes / bash the mosquitos / sjump from the platform next to the door to reach the platformtform above the door, sjump from there and sword combo + up slash
  pickup WoodsMain.LeftKS:
    moki: Combat=Balloon, Glide
    gorlek, Combat=Balloon:
      Damage=15, DoubleJump, TripleJump OR Dash
      Launch
    unsafe:
      DoubleJump, Damage=15  # Doublejump as far as possible, take a damage boost then wall jump + doublejump to get the key and return to safety
      DoubleJump, TripleJump  # tjump on the wall above
  pickup WoodsMain.LowerKS:
    moki, Flap:  # Flap being the casual way of breaking the yellow barrier
      Glide OR Launch
      DoubleJump, Dash
      Bash, DoubleJump OR Dash
    gorlek, Flap:
      DoubleJump OR Dash OR Sword
      Hammer, Bash
    unsafe: Flap, Bash, Damage=15  # Flap to break the yellow wall, precise jump to avoid damage in the first spikes, fall in the last spikes. Bash glide from the bashable plant to the platform before the pickup (~20° angle)

  conn WoodsMain.GiantSkull:
    moki: WoodsMain.KeystoneDoor
  conn WoodsMain.HiddenOreLedge:
    moki: DoubleJump OR Dash OR Glide OR Launch
    gorlek: Sword OR Hammer
    unsafe: Sentry=1 OR Flash=1 OR Blaze=1 OR Shuriken=1 OR Spear=1 OR Grenade=1 OR Bow=1
  conn WoodsMain.BelowFourKeystoneRoom: free

anchor WoodsMain.GiantSkull at 957, -4138:  # Behind the four keystone room door
  refill Checkpoint

  state WoodsMain.KeystoneDoor:
    moki: Keystone=4

  pickup WoodsMain.UpperLeafPileEX:
    moki: Flap
  pickup WoodsMain.BehindDoorRoofEX:
    moki, Combat=Balloon:
      Bash OR Launch
      DoubleJump, Dash, Glide
    gorlek, Combat=Balloon:
      SentryJump=1
      DoubleJump, Glide, TripleJump OR Sword OR Hammer
    unsafe:
      Glide, DoubleJump  # need a really precise vertical boost from the wind

  conn WoodsMain.BalloonLure:
    moki: Combat=Balloon, Bash, DoubleJump OR Dash OR Glide OR Launch  # bash for the rude placement of the tentacle
    gorlek, Combat=Balloon:
      Bash, Sword
      Bash, Hammer, SentryJump=1
  conn WoodsMain.FourKeystoneRoom:
    moki: WoodsMain.KeystoneDoor

anchor WoodsMain.BalloonLure at 1056, -4144:  # At the bottom of the shaft you lure a balloon through to break a yellow wall - mostly exists for the lure specifically since paths for it would otherwise be awkward
  refill Checkpoint

  pickup WoodsMain.YellowWallEX:
    moki: BreakWall=3, Flap, Glide OR Launch
    gorlek:  # sword or hammer implies being able to break the corruption
      DoubleJump, TripleJump, Sword, Combat=Balloon OR Flap OR Damage=20
      DoubleJump, TripleJump, Hammer, Combat=Balloon OR Flap OR Damage=20
    unsafe: BreakWall=3, DoubleJump, Dash, Bash, Grenade=1  # Bait the enemy by jumping and imediately dashing against the left wall, double wall off the wall to  get to the edge near the spikes and bash grenade. Launch the grenade near the right edge and bash it to get to the left edge. If you are too slow, the enemy will die from the explosion after your bash

  conn WoodsMain.BelowHiddenOre:
    moki: BreakWall=3, Glide OR Launch
    gorlek: DoubleJump, TripleJump, Sword OR Hammer  # sword or hammer implies being able to break the corruption
    unsafe, BreakWall=3:
      DoubleJump, Bash, Grenade=1  # land on the ledge near the spikes bellow the breakable wall
      DoubleJump, SentryJump=1  # land on the ledge near the spikes bellow the breakable wall
      Dash, Bash, Grenade=2
      Bash, Grenade=3  # bash grenade to get on the skull, bash a tentacle projectile and the bashable plant to get to the blowing enemy level, 2nd bash grenade to get near the spikes and last one to reach the connection
      SentryJump=3  # jump + sword combo to reach the skull, sword combo to reach the tentacle. use your sjumps to get to the connection
  conn WoodsMain.GiantSkull:
    moki:
      Glide OR Launch
      DoubleJump, Dash
    gorlek:
      DoubleJump, TripleJump OR Sword
      Bash, DoubleJump OR Dash

anchor WoodsMain.BelowHiddenOre at 1038, -4101:  # Below and to the right of the hidden ore, close to the yellow wall
  pickup WoodsMain.HiddenOre:
    moki: Flap, Glide
    gorlek:
      Launch  # Launch straight up from the right side of the fire pit to touch the ceiling, go a bit to the left, launch again on the right wall, wall jump and launch to the pickup. Launch again to return to safety
      DoubleJump, TripleJump, Bash, Damage=15  # can either use the plant or the skeeto
    unsafe:
      SentryJump=1, DoubleJump, TripleJump, Damage=15  # sjump from a micro ledge at very edge of the fire pit

  conn WoodsMain.PetrifiedHowl:
    moki: Glide
    gorlek: Launch  # launch on the wall just bellow the ceiling's spikes, wall jump and lauch again to get to the right wall after the ceiling's spikes
    unsafe: DoubleJump, TripleJump, Hammer, Damage=15  # Triple jump to get to the wall just bellow the ceiling's spikes, wall jump and triplejump, land on the spikes. Triple jump and up slash to get to the wall on the right.
  conn WoodsMain.BalloonLure:
    moki: BreakWall=3, Combat=Tentacle OR Bash

anchor WoodsMain.PetrifiedHowl at 910, -4071:  # At silenced Howl
  refill Checkpoint
  refill Health=1

  pickup WoodsMain.PetrifiedHowlEX: free

  conn WoodsMain.TrialStart:
    moki: BreakWall=3, Bash, Glide
    gorlek:
      BreakWall=3, Glide, Damage=10  # just easy to catch a projectile
      BreakWall=3, DoubleJump, Bash, Damage=15  # different ways to solve
      Bash, DoubleJump, TripleJump
      Dash, DoubleJump, TripleJump, Damage=10  # just easy to catch a projectile
  conn WoodsMain.AboveHowl:
    moki: Launch, DoubleJump OR Dash OR Bash OR Glide  # if you don't think of going straight up, these can also carry you through the way around
    gorlek:
      Launch
      Bash, Grenade=1  # it's a checkpoint, you have retries to figure it out
      SentryJump=1, DoubleJump, TripleJump
      SentryJump=1, DoubleJump, Dash, Sword OR Hammer
  conn WoodsMain.BelowHiddenOre:
    moki:
      Glide
      Launch, DoubleJump OR Dash
    gorlek:
      DoubleJump OR Dash OR Sword OR Launch  # just holding right works so nicely
      Hammer, Damage=15  # if you swing too much you'll take the damage

# checkpoint at 824, -4068

anchor WoodsMain.TrialStart at 848, -4052:  # At the collapsing petrified Owl
  refill Checkpoint

  # state WoodsMain.TrialActivation:
  #   this would just be on an anchor with the shard...

  pickup WoodsMain.OverflowShard:
    moki:
      DoubleJump, Bash, Grapple, Burrow, Dash OR Glide
      Launch, Grapple, Bash, DoubleJump OR Dash OR Glide
    gorlek:
      Launch, DoubleJump OR Dash OR Bash OR Glide
      Launch, Damage=15, Sword OR Hammer OR Burrow
      DoubleJump, Bash, Grapple, Burrow, TripleJump OR Sword
      DoubleJump, Bash, Grapple, Burrow, Hammer, Damage=15
      DoubleJump, Bash, Grapple, Grenade=2, Damage=15, TripleJump OR Dash OR Glide OR Sword  # You can either damage boost at the first sand ball or grenade bash from below

  conn WoodsMain.AboveHowl:
    moki:
      DoubleJump OR Launch
      Bash, Grenade=2
    gorlek:
      Dash, Damage=15
      Bash OR SentryJump=1
      Grapple, Glide

anchor WoodsMain.AboveHowl at 916, -4047:  # At the semisolid above silenced Howl
  pickup WoodsMain.HiddenEX: free

  conn WoodsMain.Teleporter:
    moki:
      Combat=4xBalloon, DoubleJump OR Launch
      Combat=4xBalloon, Bash, Grenade=1
    gorlek: SentryJump=1, Combat=Balloon OR Dash OR Damage=20
  conn WoodsMain.PetrifiedHowl: free
  conn WoodsMain.TrialStart: free
  conn WoodsMain.AbovePit:  # pass over the tree
    gorlek:
      Launch
      DoubleJump, Bash, Grenade=1
      DoubleJump, SentryJump=1, Sword OR Hammer  # an upswing should make the final jump fine
      Bash, Grenade=2

# checkpoint at 873, -3980
# checkpoint at 868, -3952
# checkpoint at 980, -4015

anchor WoodsMain.Teleporter at 1083, -4052:  # At the East Woods Teleporter
  refill Full

  conn Teleporters: free
  conn WoodsMain.AbovePit:
    moki:
      Glide
      DoubleJump, Bash, Launch  # :)
    gorlek: Launch, Damage=15
    unsafe: DoubleJump, TripleJump, Hammer, Damage=15  # climb the right wall, triple jump in the spikes, triple jump + up slash to climb the right wall
  conn WoodsMain.AboveHowl:
    moki:
      Glide, Launch
      DoubleJump, Glide, Bash, Grenade=1
      DoubleJump, Bash, Launch  # :)
    gorlek, Sword OR Hammer:  # these can break the corruption from behind
      DoubleJump, TripleJump, Combat=2xBalloon OR Dash
      SentryJump=1, Combat=2xBalloon OR Dash
      Bash, Grenade=1, Combat=2xBalloon OR Dash
      Launch, Combat=2xBalloon OR Dash

# checkpoint at the anchor below, could split another anchor off for the crystal and move it over

anchor WoodsMain.AbovePit at 1234, -3985:  # To the left of the pit before feeding grounds
  refill Energy=3:  # the crystal in the pit
    unsafe: Weapon, Bash, DoubleJump OR Dash OR Glide OR Launch  # technically just Bash

  conn WoodsMain.Teleporter:  # a dead end in moki
    gorlek: DoubleJump OR Dash OR Glide OR Launch OR Sword OR Damage=15
  conn WoodsMain.AboveHowl:
    moki:
      DoubleJump, Bash, Grenade=1
      Launch
    gorlek: SentryJump=1, DoubleJump, TripleJump  # also able to kill enemies if you wish to
  conn WoodsMain.FeedingGrounds:
    moki:
      DoubleJump, Dash OR Bash
      Glide OR Launch
      Bash, Grenade=1
    gorlek:
      DoubleJump, Hammer
      Bash, Dash OR Hammer
      Sword
  conn WoodsShrine:  # in moki these are covered by the feeding grounds connection
    gorlek: Damage=15, DoubleJump OR Dash OR Sword OR Hammer

anchor WoodsMain.FeedingGrounds at 1292, -3993:  # At the left entrance to feeding grounds
  refill Checkpoint

  # having the initial escape completed is a negative, not a positive. The paths going through it are the connections to Wastes.
  # if you complete the initial escape, rocks fall and block most of the connection paths to WestTP. This is equally true for the base game though and solved by the fact that if you complete the escape, you unlock the teleporter, making these paths not softlockable

  conn WoodsShrine:
    moki:
      Glide OR Launch
      DoubleJump, Dash
    gorlek: Damage=15, DoubleJump OR Dash OR Sword OR Hammer
  conn LowerWastes.WestTP:
    moki:
      Grapple, Glide, DoubleJump OR Dash OR Launch  # this solves with Seir as well
      WindtornRuins.Seir:  # these wouldn't solve without Seir
        DoubleJump, Bash, Grenade=1, Grapple
        Grapple, Glide
        Burrow
        Launch
    gorlek:
      Launch
      Burrow  # If doing cat and mouse, burrow below first to reset shriek aggression then burrow to the TP
      Glide, DoubleJump, TripleJump
      Glide, Grapple, DoubleJump OR Dash
      Grapple, SentryJump=1, DoubleJump
      WindtornRuins.Seir:  # these wouldn't solve without Seir
        SentryJump=1, DoubleJump, TripleJump, Sword OR Hammer  # tjump+up slash to reach the grappable surface
        Bash, Grenade=1, Grapple
        Bash, Grenade=2, Dash  # Dash to get in bash range on the 2nd grenade to get on the grappable surface
        Bash, Grenade=1, DoubleJump, TripleJump, Dash OR Sword OR Hammer
  conn WoodsMain.AbovePit:
    moki:
      DoubleJump, Bash
      Launch
    gorlek:
      Bash, Grenade=1, Dash OR Glide OR Sword OR Hammer
      SentryJump=1, DoubleJump OR Dash OR Glide
    unsafe: DoubleJump  # fall then good old glide skip

anchor WoodsShrine:
  refill Full
  pickup WoodsMain.ShrineEX: free
  pickup WoodsMain.CombatShrine:
    moki, Regenerate, Combat=Hornbug+Lizard+3xSkeeto+4xEnergyRefill+2xCrystalMiner+Bat+4xEnergyRefill+9xBalloon+4xEnergyRefill+4xMantis+Bat:  # this one has it all -_-
      Damage=80
      Damage=65, DoubleJump OR Dash
      Damage=50, Launch
    unsafe: Combat=Hornbug+Lizard+3xSkeeto+4xEnergyRefill+2xCrystalMiner+Bat+4xEnergyRefill+9xBalloon+4xEnergyRefill+4xMantis+Bat

region LowerReach:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor LowerReach.Entry at -390, -4025:  # Behind Baur
  refill Checkpoint
  refill Health=1

  state LowerReach.BearSneezed:
    moki: Flap
  state LowerReach.HeatBaurFurnace:
    moki, LowerReach.BearSneezed, LowerReach.BearBridgeBroken:
      Bash, Flap
      Grenade=1
  state LowerReach.CoolBaurFurnace:
    moki: LowerReach.BearSneezed, LowerReach.BearBridgeBroken, Flap

  pickup LowerReach.BelowBaurEX:
    moki, LowerReach.BearSneezed, LowerReach.BearBridgeBroken:
      DoubleJump, Dash, Bash, Flap
      Bash, Grenade=1
      Launch
    gorlek, LowerReach.BearSneezed, LowerReach.BearBridgeBroken:
      SentryJump=1
      Bash  # using the slime
      Dash, DoubleJump, Sword OR Hammer  # Stick to the right wall, dash right when ori falls then double jump + up slash
      DoubleJump, TripleJump, Sword
      DoubleJump, TripleJump, Hammer, Glide
    unsafe:
      Dash, DoubleJump, Shuriken=1 OR Flash=1 OR Spear=1 OR Sentry=1 OR Blaze=1  # A single activation of flash
      DoubleJump, TripleJump, Hammer OR Flash=1 OR Sentry=1 OR Shuriken=1

  conn LowerReach.AboveEntry:
    moki:
      DoubleJump, Launch  # Can't rely on the sleeping bear to be there
      Bash, DoubleJump OR Launch
      Bash, Grenade=1
      Bash, Dash  # @Validator new path
    gorlek:
      Launch  # Launch straight up, stick to the wall then  launch again
      Bash, Glide OR Sword OR Hammer  # There is a safe spot at the left of the spike before the first lantern
      SentryJump=1, DoubleJump
    unsafe:
      Bash, Shuriken=1 OR Flash=1 OR Sentry=1 OR Blaze=1 OR Spear=1
      SentryJump=1  # Needs good sentry jump, dependent on how you cap your game
  conn WestGlades.Upper:
    moki: LowerReach.BearSneezed

anchor LowerReach.AboveEntry at -401, -4000:  # On the platform above Baur inside the tree trunk
  refill Checkpoint

  state LowerReach.Lever:
    moki:
      Launch
      LowerReach.HeatBaurFurnace, DoubleJump
    gorlek:
      SentryJump=1  # Need to use the plant as a platform
      Bash, DoubleJump OR Dash OR Glide OR Sword OR Hammer  # Use the spitter off camera on the left of the platform
      DoubleJump, TripleJump, Damage=20
      LowerReach.HeatBaurFurnace, DoubleJump OR Dash OR Glide OR Sword OR Hammer
    unsafe:
      Dash, DoubleJump, Damage=20, Sword OR Hammer  # djump+upslash+ dash in the spikes, grab the plant then djump + upslash to reach the left wall. Sword much harder, need to get a ramp
      Bash, Spear=1 OR Shuriken=1 OR Blaze=1 OR Flash=1 OR Sentry=1
      DoubleJump, TripleJump, Sword OR Hammer  # you need first to get on the first plant on the left
      LowerReach.HeatBaurFurnace, Spear=1 OR Shuriken=1 OR Blaze=1 OR Flash=1 OR Sentry=1

  pickup LowerReach.AboveBaurLowerEX:
    moki:
      Launch
      LowerReach.CoolBaurFurnace, Bash, Grenade=1  # seemed a bit hectic without cooling the furnace
      LowerReach.HeatBaurFurnace OR Grenade=1:  # these use a grenadebash if they can't use the unfrozen tongue plant
        DoubleJump, Bash
        Dash, Bash, Glide
    gorlek:
      DoubleJump, TripleJump  # Climbing frozen tongue with TripleJump
      SentryJump=2
      SentryJump=1, DoubleJump  # sjump, climb the left wall then sword combo + djump to reach the xp
      Bash
      DoubleJump, Dash  # Use a coyote jump from the left of the frozen tongue
      LowerReach.HeatBaurFurnace, DoubleJump, TripleJump OR Sword OR Hammer
    unsafe:
      LowerReach.HeatBaurFurnace, DoubleJump
  pickup LowerReach.AboveBaurUpperEX:
    moki:
      Launch
      LowerReach.HeatBaurFurnace, DoubleJump, Dash, Bash
    gorlek:
      DoubleJump, Bash, Glide  # Hold glide, bash up and double jump
      LowerReach.HeatBaurFurnace:
        DoubleJump, TripleJump OR Sword OR Hammer
        Bash  # one bash to get where LowerReach.AboveBaurLowerEX is, wait for a second mortar shot and bash it to grab the tongue
        SentryJump=1, Dash
    unsafe:
      TripleJump, DoubleJump  # TripleJump frozen tongue climbing
      LowerReach.HeatBaurFurnace, SentryJump=2  # Sentry Jump ramp on the left wall
      DoubleJump, Bash, Sword  # Gain height bashing a shot up and use sword to stall

  conn LowerReach.Entry: free
  conn LowerReach.Icefall:
    moki:
      DoubleJump OR Launch
      LowerReach.HeatBaurFurnace
      # could use bashgrenades to get past the frozen tongue plant, but seems a bit unintuitive
    gorlek:
      Bash, Grenade=1  # a bit tricky, you throw a grenade, jump on the tongue and bash the grenade after falling off of it
      Dash
      Glide
      Sword  # Stall with 2 sword hit before tongue and one after the tongue
    unsafe:
      Sentry=2
      Shuriken=2
  conn LowerReach.Central:
    moki, LowerReach.Lever:
      Bash, DoubleJump OR Dash OR Glide
      Launch
    gorlek, LowerReach.Lever:
      Bash, Sword OR Hammer OR Damage=20
      Glide, Sword OR Hammer OR Damage=20
      DoubleJump, TripleJump OR Glide OR Sword OR Hammer OR Damage=20
      Dash, DoubleJump OR Glide OR Sword OR Hammer OR Damage=20
      Sword, Damage=20
    unsafe, LowerReach.Lever:
      Glide, Sentry=1 OR Shuriken=1
      Dash, Shuriken=1 OR Sentry=2
      Hammer, Damage=20
      SentryJump=1

anchor LowerReach.Icefall at -448, -3999:  # Where you drop the rock on Baur's nose
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  state LowerReach.BearBridgeBroken:
    moki, LowerReach.BearSneezed  # the game behaves weird when dropping the rock on Baur, so not making that moki
  state LowerReach.LeftFurnace:
    moki:
      Grenade=1, Bash, DoubleJump OR Dash OR Glide  # Grenade to light the furnace
      Grenade=1, Launch  # Grenade to light the furnace
    gorlek:
      Grenade=1, DoubleJump
      Grenade=1, SentryJump=1
      Grenade=1, Damage=20
      Grenade=1, Bash
      Grenade=1, Grapple, Dash OR Glide OR Sword OR Hammer
    unsafe:
      Grenade=1, Grapple, Sentry=1 OR Shuriken=1

  pickup LowerReach.IcefallOre:
    moki, LowerReach.LeftFurnace:
      Bash, Grapple OR Launch  # bash the enemies
      Combat=2xSlug, Grapple, Damage=10, DoubleJump OR Dash  # grapple past the enemies and probably get hit by them
      Water, Launch  # swim past the enemies
    gorlek, LowerReach.LeftFurnace:  # You can QTM at the checkpoint if you need to despawn the ennemies
      Launch
      Bash
      Grapple, DoubleJump OR Dash OR Glide OR Sword OR Hammer
      SentryJump=1, DoubleJump, TripleJump  # up slash to reach the left wall
      WaterDash, Water, DoubleJump, TripleJump OR Sword OR Hammer OR SentryJump=1  # With sjump, wdash on the plant and sjump from here. Then doublejump + upslash to reach the wall
      WaterDash, Damage=20, DoubleJump, TripleJump OR Sword OR Hammer OR SentryJump=1  # With sjump, wdash on the plant and sjump from here. Then doublejump + upslash to reach the wall
    unsafe:
      SentryJump=1, DoubleJump, Dash OR Glide
  pickup LowerReach.IcefallEX:
    moki, LowerReach.LeftFurnace:
      DoubleJump, Bash  # bash the enemies
      Combat=2xSlug, DoubleJump, Grapple, Damage=10  # grapple past the enemies and probably get hit by them
      Combat=2xSlug, Water, DoubleJump, WaterDash  # swim past the enemies
      Launch
    gorlek, LowerReach.LeftFurnace:
      Water, Sword  # Pogo a fish
      Water, WaterDash, DoubleJump OR Hammer OR Damage=20
      Damage=20, DoubleJump, TripleJump OR Sword OR Hammer
      Damage=20, WaterDash, DoubleJump OR Sword OR Hammer
      Grapple, DoubleJump OR Sword OR Hammer
      Grapple, Damage=20, Dash OR Glide
      Bash, Sword OR Hammer OR Damage=20
      SentryJump=1, DoubleJump OR Dash OR Glide
    unsafe, LowerReach.LeftFurnace:
      Water, WaterDash, Flash
      Water, WaterDash, Sentry=1
      Water, WaterDash, Spear=1
      Water, WaterDash, Bash  # Using moskitos lure

  conn LowerReach.Entry: free
  conn LowerReach.AboveEntry:
    moki:
      DoubleJump OR Launch
      LowerReach.HeatBaurFurnace
    gorlek:
      Dash
      Glide
      Sword
    unsafe:
      Sentry=2, Shuriken=2

anchor LowerReach.Central at -335, -4010:  # After the lever door
  refill Checkpoint

  pickup LowerReach.AboveDoorEX:
    moki:
      LowerReach.CentralFurnace:
        DoubleJump, Dash, Bash OR Hammer OR Spear=1
        Bash, Grenade=1
      Launch
    gorlek:
      DoubleJump, TripleJump OR LowerReach.Lever
      SentryJump=1
      Bash, Grenade=1
      LowerReach.CentralFurnace:
        DoubleJump, Sword, Bash OR Spear=1
        DoubleJump, Hammer  # use the plant up slash and directly wall jump on the left wall
        Dash, Glide, Hammer
    unsafe:
      Bash  # unsafe because the checkpoint is actually on the slime so he wont spawn if you reload from this checkpoint
      DoubleJump, Sword  # Pogo on the slime
      LowerReach.CentralFurnace:
        Dash, Sword, Bash OR Hammer OR Spear=1
        DoubleJump, Glide, Bash OR Spear=1  # Really precise wall jump
        Dash, Glide, Sword, Bash OR Spear=1  # Need a ramp
  pickup LowerReach.LupoMap:
    moki:
      Launch
      DoubleJump, Dash
      LowerReach.CentralFurnace, Bash, Grenade=1, DoubleJump OR Dash OR Glide
    gorlek:
      SentryJump=1
      DoubleJump, TripleJump OR Sword OR Hammer  # With Hammer, use the plant up slash and directly wall jump on the left wall instead of air stalling
      Bash, Grenade=1
    unsafe:
      Bash  # unsafe because the checkpoint is actually on the slime so he wont spawn if you reload from this checkpoint
      DoubleJump, Glide  # Really precise wall jump
  pickup LowerReach.TPLeftEX:
    moki:
      Launch
      LowerReach.CentralFurnace:
        DoubleJump, Dash
        Bash, Grenade=1, DoubleJump OR Dash OR Glide
    gorlek:
      SentryJump=2, Hammer OR Spear=1  # Hammer or spear to break the ceiling above LowerReach.AboveDoorEX
      Grenade=1, Bash, Spear=1 OR Hammer  # Juggle the mortar shot to use 1 bash grenade instead of two / Hammer or spear to break the ceiling above LowerReach.AboveDoorEX
      LowerReach.CentralFurnace:
        DoubleJump, TripleJump OR Sword OR Hammer  # With Hammer, need to wall jump to get on the branch near the mortal then jump out of it and air stall
        Dash, Glide, Sword OR Hammer
        Grenade=1, Bash
    unsafe:
      SentryJump=1, Spear=1  # Full Height Sentry Jump

  conn LowerReach.SecondSoup: free
  conn LowerReach.OutsideTPRoom:
    moki:
      Launch
      LowerReach.CentralFurnace:
        DoubleJump, Dash, Bash
        Bash, Grenade=1
    gorlek:
      DoubleJump, TripleJump, Hammer OR Spear=1
      SentryJump=3, Hammer OR Spear=1
      Bash, Grenade=1, Hammer OR Spear=1
      LowerReach.CentralFurnace:
        Bash, Grenade=1
        SentryJump=2
        DoubleJump, TripleJump OR Dash OR Sword OR Hammer
    unsafe:
      LowerReach.CentralFurnace, Dash, Sword OR Hammer

anchor LowerReach.OutsideTPRoom at -311, -3970:  # To the left of the teleporter room
  refill Checkpoint
  refill Full:  # use the teleporter
    moki: Grenade=1
    gorlek: Sentry=1
  refill Health=1
  refill Energy=3:
    moki: Weapon

  pickup LowerReach.AboveDoorEX:
    moki: Bash OR Hammer OR Spear=1
  pickup LowerReach.LupoMap:
    moki: DoubleJump OR Dash OR Glide OR Launch
    gorlek: free
  pickup LowerReach.TPLeftEX:
    moki:
      Bash, DoubleJump OR Dash OR Glide
      Launch
    gorlek:
      Dash
      Glide
      Sword
      Bash  # Need to bash the projectile twice
      DoubleJump, Damage=20 OR Hammer
    unsafe:
      Hammer  # can barely get the pickup, too precise
      Damage=20, Hammer  # damage boost on the wall to get a wall jump then up slash
      DoubleJump, Sentry=1 OR Shuriken=1 OR Spear=1 OR Flash=1 OR Bow=1 OR Grenade=1 OR Blaze=1
  pickup LowerReach.HiddenOre:
    moki:
      Launch
      LowerReach.CentralFurnace, DoubleJump, Bash, Dash OR Glide OR Grenade=1
    gorlek:
      DoubleJump, TripleJump, Bash OR SentryJump=1  # triple jump to get a wall jump on the platform above
      Bash, DoubleJump, Dash OR Glide OR Sword OR Hammer  # jump on the tongue, let ori slide down then double jump again and go for the right wall with dash/up slashes/glide, climb it, grab the tongue again and jump out of it
      SentryJump=1, DoubleJump, Dash OR Glide OR Sword OR Hammer  # jump on the tongue, let ori slide down then double jump again and go for the right wall with dash/up slashes/glide, climb it, grab the tongue again and jump out of it
      LowerReach.CentralFurnace, Bash, DoubleJump OR Dash OR Sword OR Hammer
      LowerReach.CentralFurnace, SentryJump=1, DoubleJump OR Dash OR Sword OR Hammer
    unsafe:
      Bash, DoubleJump, Spear=1 OR Shuriken=1 OR Flash=1 OR Sentry=1
      SentryJump=1, DoubleJump, Spear=1 OR Shuriken=1 OR Flash=1 OR Sentry=1
      LowerReach.CentralFurnace, Bash, Flap OR Sentry=1 OR Flash=1 OR Shuriken=1 OR Spear=1 OR Blaze=1
      LowerReach.CentralFurnace, SentryJump=1, Flap OR Sentry=1 OR Flash=1 OR Shuriken=1 OR Spear=1 OR Blaze=1

  conn LowerReach.SecondSoup: free
  conn LowerReach.Central:
    moki: DoubleJump OR Dash OR Bash OR Glide OR Launch OR Hammer OR Spear=1
    gorlek: free
  conn UpperReach.KeystoneRoom:
    moki:
      DoubleJump, Dash, Bash  # bash the squonkey
      DoubleJump, Bash, Grenade=2  # bash the squonkey
      Launch
    gorlek:
      SentryJump=2
      SentryJump=1, DoubleJump, Dash
      SentryJump=1, DoubleJump, LowerReach.CentralFurnace  # bait the last plant and double jump + sword combo
      SentryJump=1, DoubleJump, Hammer, Glide  # double jump+upslash from the plant to get near the burrow section, climb it then glide to the right
      DoubleJump, TripleJump  # Need to start jumping just under the energy cristal to get to the first plant
      Bash, DoubleJump OR Dash OR Sword OR Glide  # juggle the mortar shot than bash the squonkey
    unsafe:
      SentryJump=1, DoubleJump, Glide  # Need to do a precise double jump + up slash to get near the burrow section, climb it then glide to the right
      SentryJump=1, DoubleJump  # double jump + pogo the squonkey to reset your double jump
      Bash, Hammer OR Sentry=1 OR Shuriken=1 OR Grenade=1 OR Flash=1  # Hammer/Sentry/Flash need a precise wall jump on the right to get to the squonkey platform
  conn LowerReach.Teleporter:
    moki: Grenade=1
    gorlek: Sentry=1

anchor LowerReach.Teleporter at -259, -3962:  # This has to exist to support the teleporter pickup
  refill Full

  conn Teleporters: free
  conn LowerReach.OutsideTPRoom:
    moki: Grenade=1
    gorlek: Sentry=1

# checkpoint at -296, -3944

region UpperReach:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor UpperReach.KeystoneRoom at -298, -3919:  # At Tokk
  refill Checkpoint
  # the crystal is evil

  state UpperReach.HeatFurnace:
    moki:
      Grenade=1  # this makes grenadebash paths meaningless
      Flap, Bash, DoubleJump OR Launch
    gorlek:
      Flap, Bash, Dash OR Glide OR Sword OR Hammer  # Walljump on the left wall to reach the frozen waterfall
  state UpperReach.CoolFurnace:  # need this because the player might have to refreeze the waterfall
    moki: Flap

  pickup UpperReach.LifeForceShard:
    moki, Burrow:
      Bash, Grenade=1, DoubleJump, Dash  # Just one of djump / dash is maybe too precise for moki
      Bash, Grenade=1, Glide
      Launch
    gorlek, Burrow:
      DoubleJump, Sword, TripleJump OR Dash OR Bash OR Glide OR Damage=20
      DoubleJump, Hammer, TripleJump OR Dash OR Bash OR Glide OR Damage=20
      DoubleJump, TripleJump, Dash OR Bash OR Glide OR Damage=20
      Bash, Glide OR Sword  # sword combo to get under the 3rd burrow section, upslash to get above the spikes and get bellow LifeForceEX
      Bash, DoubleJump, TripleJump OR Damage=20
      Bash, Grenade=1, DoubleJump OR Dash OR Hammer  # from under LifeForceEX, launch a grenade, burrow to reach it at its highest point then dash/hammer/sword/glide/djump to reach the platform near the spikes
      SentryJump=2  # From LifeForceEX, sword combo to reach the edge of the platform near the spikes.
      SentryJump=1, Glide OR Damage=20
      LowerReach.CentralFurnace, DoubleJump, Dash, TripleJump OR Bash OR SentryJump=1 OR Damage=20  # sjump from bellow LifeForceEX to reach its platform then djump+dash to reach the burrow section at your right / tjump+dash to reach the wall after the bashable plant, reach the burrow section from it. djump+dash+damage boost to get to that same wall
    unsafe, Burrow:
      DoubleJump, TripleJump OR Hammer  # From under LifeForceEX, get out of the burrow section straight up. Hard to do on keyboard
      SentryJump=1, Dash  # Need a precise angle to exit the burrow section under LifeForceEX
  pickup UpperReach.LifeForceEX:
    moki, Burrow:
      Bash, Grenade=1, DoubleJump, Dash
      Bash, Grenade=1, Glide
      Launch
    gorlek, Burrow:
      DoubleJump, Sword, TripleJump OR Dash OR Bash OR Glide OR Damage=20
      DoubleJump, Hammer, TripleJump OR Dash OR Bash OR Glide OR Damage=20
      DoubleJump, TripleJump, Dash OR Bash OR Glide OR Damage=20
      Bash, Glide OR Sword  # sword combo to get under the 3rd burrow section, upslash to get above the spikes and get bellow LifeForceEX
      Bash, DoubleJump, TripleJump OR Damage=20
      Bash, Grenade=1  # from under LifeForceEX, launch a grenade, burrow to reach it at its highest point
      SentryJump=2  # From LifeForceEX, sword combo to reach the edge of the platform near the spikes.
      SentryJump=1, Glide OR Damage=20
      LowerReach.CentralFurnace, DoubleJump, Dash, TripleJump OR Bash OR SentryJump=1 OR Damage=20  # sjump from bellow LifeForceEX to reach its platform / tjump+dash to reach the wall after the bashable plant, reach the burrow section from it. djump+dash+damage boost to get to that same wall
    unsafe, Burrow:
      DoubleJump, TripleJump OR Hammer  # From under LifeForceEX, get out of the burrow section straight up. Hard to do on keyboard
      SentryJump=1, Dash  # Need a precise angle to exit the burrow section under LifeForceEX
  pickup UpperReach.LowerKS:
    moki:
      Launch
      UpperReach.HeatFurnace:
        DoubleJump
        Bash, Grenade=1
    gorlek:
      Bash, DoubleJump, Grenade=1 OR Flap  # grenade bash from bellow the pickup or use the soup
      DoubleJump, TripleJump OR SentryJump=1  # SentryJump from bellow / triple jump from the soup
      DoubleJump, Dash, Sword OR Hammer  # from the the soup, stick to the wall then djump+upslash+dash
      UpperReach.HeatFurnace:
        SentryJump=1
        WaterDash, Water OR Damage=20
        Dash, Bash OR Sword OR Hammer  # Upslash then dash / bash the gorlek then dash
        Bash, Glide OR Sword OR Hammer  # Bash the gorlek then air stall
    unsafe:
      DoubleJump, Sword OR Hammer
      UpperReach.HeatFurnace, Hammer  # Stupidly precise upslash
  pickup UpperReach.MiddleLeftKS:
    moki:
      Launch, DoubleJump OR Dash OR Glide
      UpperReach.HeatFurnace:
        DoubleJump, Bash, Grapple OR Glide
        Dash, Bash, Grenade=1, Glide
    gorlek:
      Launch
      UpperReach.HeatFurnace:
        Bash, Glide, Sword OR Hammer OR Damage=20  # bash the gorlek then glide, dboost/upslash in the spikes near the the pickup
        Bash, Grapple, Dash OR Sword OR Hammer  # Bash the gorlek to reach the plant
        Bash, Grapple, WaterDash, Water, Damage=20  # dboost in the spikes near the pickup
    unsafe:
      UpperReach.CoolFurnace:
        SentryJump=1, Damage=20  #  Walljump on the left wall to reach the frozen waterfall, at the soup dboost on the spikes bellow the pickup then sjump
        Bash, Glide  # Juggle the projetile until the ennemy shot a new one. When they do, bash upwards and juggle with the new projectile
      UpperReach.HeatFurnace:
        Damage=20, SentryJump=2
        Damage=20, SentryJump=1, DoubleJump OR Grapple
        Damage=20, SentryJump=1, Bash, Grenade=1
        Glide, Bash
        Bash, WaterDash, Grapple, Water OR Damage=20  #  bash glide the last projectile to avoid a damage boost in the spikes just before the pickup
  pickup UpperReach.UpperKS:
    moki:
      DoubleJump, Bash, Grenade=1  # go past the hidden ore
      Launch
      UpperReach.CoolFurnace, DoubleJump, Bash  # use the icefall
      UpperReach.HeatFurnace:
        DoubleJump, Bash, Grapple  # grenadebash at the waterfall would be redundant with the path going past the hidden ore that doesn't rely on furnace state
        DoubleJump, Bash, Glide  # using the tongue plant
    gorlek:
      DoubleJump, SentryJump=1, Damage=20  # djump from the soup to reach the branch, dboost in the spike at the right of the enemy and sjump from here
      Bash, Grenade=1  # Launch grenade, bash the gorlek to reach the grenade and pass through the hidden area bellow the soup
      UpperReach.CoolFurnace, Bash, DoubleJump OR Dash OR Sword OR Hammer
      UpperReach.HeatFurnace:
        Bash, Grapple, Dash OR Sword OR Hammer
        Bash, DoubleJump, TripleJump OR Dash OR Sword OR Hammer
        Bash, WaterDash, DoubleJump, Water OR Damage=20
    unsafe, UpperReach.HeatFurnace:
      Bash, WaterDash, Sword, Water OR Damage=20  # water dash to get on the wall above the floating platform. wjump + precise upslash to get under the energy cristal
      Bash, WaterDash, Hammer, Water OR Damage=20  # water dash to get on the wall above the floating platform. wjump + precise upslash to get under the energy cristal
  pickup UpperReach.MiddleRightKS:
    moki, UpperReach.HeatFurnace:
      Bash, Glide, DoubleJump OR Grenade=1  # use the tongue plant
      DoubleJump, Bash, Grenade=1  # go past the hidden ore
      DoubleJump, Grapple
      Bash, Grenade=2, Dash  # bashgrenade at the waterfall
      Water, Bash, Grenade=1, Dash  # also bashgrenade at waterfall
      Water, Bash, Grenade=2  # still bashgrenade at waterfall
      Launch
    gorlek, UpperReach.HeatFurnace:
      SentryJump=1, DoubleJump OR Bash OR Damage=20  # with dboost, upslash from the soup to reach the spikes, jump to get the pickup / djump+upslash to grab the pole
      SentryJump=2  # 2nd sjump to reach the pole
      DoubleJump, TripleJump OR Dash OR Grapple OR Sword OR Hammer
      DoubleJump, WaterDash, Water OR Damage=20
      Grapple, Dash, DoubleJump OR Bash OR Hammer
      Bash, Grenade=1  # grenade, bash the gorlek to reach the grenade and go through the hidden area bellow the soup
    unsafe, UpperReach.HeatFurnace:
      Grapple, Dash, Damage=20
      Grapple, Dash, Sword, Damage=10  # upslash+dash in the icy part of the pole
      Grapple, Hammer, Bash OR Damage=20  # upslash just after jumping from the plant to reach the right wall
      DoubleJump, Glide  # the doublejump+glide to catch the wall above the floating platform is precise
      WaterDash, Hammer, Water OR Damage=20  # water dash to get on the wall above the floating platform. wjump + precise upslash to get under the energy cristal
      WaterDash, Sword, Bash, Water OR Damage=20
      Water, WaterDash, Sword, Dash, Damage=10  # upslash+dash in the icy part of the pole
  pickup UpperReach.SoupOre:
    moki:
      DoubleJump, Bash, Grenade=1
      Launch
      UpperReach.CoolFurnace:
        DoubleJump
        Bash, Grenade=1
      UpperReach.HeatFurnace:
        Bash, Glide, DoubleJump OR Grenade=1  # use the tongue plant
        DoubleJump, Grapple
        Bash, Grenade=2, Dash  # bashgrenade at the waterfall
        Water, Bash, Grenade=1, Dash  # also bashgrenade at waterfall
        Water, Bash, Grenade=2  # still bashgrenade at waterfall
    gorlek:
      DoubleJump, TripleJump
      Bash, Grenade=1  # grenade, bash the gorlek to reach the grenade and go through the hidden area bellow the soup
      UpperReach.CoolFurnace, Dash OR Glide OR Sword OR Hammer
      UpperReach.HeatFurnace:
        SentryJump=1
        DoubleJump, Dash OR Grapple OR Sword OR Hammer
        DoubleJump, WaterDash, Water OR Damage=20
        Grapple, Dash OR Sword OR Hammer  # with hammer, grapple from the floating platform to avoid the water
    unsafe, UpperReach.HeatFurnace:
      DoubleJump, Glide  # the doublejump+glide to catch the wall above the floating platform is precise
      WaterDash, Sword, Water OR Damage=20  # water dash to get on the wall above the floating platform. wjump + precise upslash to get under the energy crystal
      WaterDash, Hammer, Water OR Damage=20  # water dash to get on the wall above the floating platform. wjump + precise upslash to get under the energy crystal
  pickup UpperReach.SwingPoleEX:
    moki:
      DoubleJump, Bash, Grenade=1
      Launch
      UpperReach.CoolFurnace:
        DoubleJump
        Bash, Grenade=1
      UpperReach.HeatFurnace:
        Bash, Glide, DoubleJump OR Grenade=1  # use the tongue plant
        DoubleJump, Grapple
        Bash, Grenade=2, Dash  # bashgrenade at the waterfall
        Water, Bash, Grenade=1, Dash  # also bashgrenade at waterfall
        Water, Bash, Grenade=2  # still bashgrenade at waterfall
    gorlek:
      DoubleJump, TripleJump
      Bash, Grenade=1  # grenade, bash the gorlek to reach the grenade and go through the hidden area bellow the soup
      UpperReach.CoolFurnace, Dash OR Glide OR Sword OR Hammer
      UpperReach.HeatFurnace:
        DoubleJump, Dash OR Grapple OR Sword OR Hammer
        DoubleJump, WaterDash, Water OR Damage=20  # dboost in water to waterdash
        Grapple, Dash, Bash OR SentryJump=1
        Grapple, Sword, Bash OR SentryJump=1
        SentryJump=2
        SentryJump=1, Bash
    unsafe, UpperReach.HeatFurnace:
      Grapple, Hammer
      DoubleJump, Glide
  pickup UpperReach.SwimEX:
    moki: UpperReach.HeatFurnace, Water, Combat=ShieldMiner OR DoubleJump OR Bash OR Launch
    gorlek: UpperReach.HeatFurnace, Water  # You can trigger the plant from the left if you stick to it from bellow

  conn UpperReach.OutsideTreeRoom:
    moki, UpperReach.HeatFurnace:
      DoubleJump, Dash OR Grapple
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Water, Combat=ShieldMiner OR DoubleJump OR Bash OR Launch
      Launch
    gorlek, UpperReach.HeatFurnace:
      DoubleJump OR Dash OR Grapple OR Sword OR Glide OR Damage=20
      Bash, Grenade=1
  conn LowerReach.OutsideTPRoom: free

# checkpoint at -369, -3917
# checkpoint at -216, -3895
# checkpoint at -216, -3877

anchor UpperReach.OutsideTreeRoom at -169, -3911:  # In front of the keystone door
  refill Checkpoint
  refill Energy=3:
    moki, UpperReach.HeatFurnace, Weapon:
      Water, Grapple, DoubleJump OR Dash OR Glide
      Launch

  state UpperReach.KeystoneDoor:
    moki: Keystone=4

  pickup UpperReach.TreeOre:
    moki, UpperReach.KeystoneDoor:
      DoubleJump, Bash, Grenade=1, Dash OR Glide
      Dash, Bash, Grenade=1, Glide
      Launch, DoubleJump OR Dash OR Glide
    gorlek, UpperReach.KeystoneDoor:
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Sword
      SentryJump=1, DoubleJump OR Dash OR Glide
      Launch, Sword OR Hammer
    unsafe, UpperReach.KeystoneDoor:
      Launch  # Need a really precise launch boost from the branch at the top of the room (launch against the wall behind the door to access it)
  conn UpperReach.KeystoneRoom:  # @Validator I added this path
    gorlek, UpperReach.HeatFurnace:
      Water OR DoubleJump OR Dash OR Glide OR Launch OR Sword OR Hammer OR Damage=20
      Bash, Grenade=1

  conn UpperReach.TreeRoom:
    moki: UpperReach.KeystoneDoor
  # backwards connection can't get through the Icefall

# checkpoint at anchor below; the door of the house autosaves

anchor UpperReach.TreeRoom at -107, -3933:  # At the tree
  refill Energy=4:  # fast respawning crystal
    moki: Weapon

  quest UpperReach.SpringSeed:
    moki: Grenade=1
    gorlek: Sentry=1  # Use sentry to light the lantern

  pickup UpperReach.LightBurstTree:
    moki: free
  pickup UpperReach.WellEX:
    moki: free
  pickup UpperReach.HiddenEX:
    moki: Grenade=1
    gorlek: Sentry=1  # Use sentry to melt the ice
  pickup UpperReach.TreeOre:  # @Validator I added this path
    gorlek:
      DoubleJump, TripleJump, Glide OR Sword  # Climb the right wall then triplejump + glide (or sword combo + upslash)
      Launch, DoubleJump OR Dash OR Glide OR Sword OR Hammer
      DoubleJump, TripleJump, Bash, Grenade=1
      Launch, Bash, Grenade=1
  # backwards connection can't get through the Icefall

anchor LowerReach.SecondSoup at -316, -4037:  # Next to the soup below the teleporter
  state LowerReach.CentralFurnace:
    moki: DoubleJump, Dash, Bash, Flap
    gorlek:
      Grenade=1
      Bash, Flap

  pickup LowerReach.MeltIceEX:
    moki: Grenade=1
    gorlek:
      Bash, Flap
      Sentry
  pickup LowerReach.BurrowEX:
    moki: Burrow, DoubleJump OR Dash OR Glide OR Launch
    gorlek: Burrow  # Need to TP out to avoid falling into spikes. Sword OR Hammer OR Damage=20 OR Shuriken=1 to airstall otherwise

  conn LowerReach.Central:
    moki:
      DoubleJump, Bash, Flap OR Grenade=1
      DoubleJump, Burrow
      Launch
    gorlek:
      DoubleJump  # Need to jump from the highest point on the cauldron when it's at his highest point (can just jump on the spot to make the cauldron reach that point)
      Bash, Grenade=1 OR Flap  # With flap, need to juggle the projectile
      SentryJump=1
  conn LowerReach.WindChannel:
    moki:
      Combat=ShieldMiner OR Bash OR Launch
      Burrow, DoubleJump OR Dash OR Glide

anchor LowerReach.WindChannel at -256, -4035:  # The furnace left of the wind channel connecting to east reach
  refill Checkpoint
  refill Energy=3:
    moki, Weapon:
      Combat=ShieldMiner, DoubleJump OR Dash
      Bash OR Launch
    gorlek: Weapon

  state LowerReach.CentralFurnace:
    moki: Grenade=1

  pickup LowerReach.BelowLupoEX:
    moki:
      DoubleJump, Bash, Grenade=1
      Launch
      LowerReach.CentralFurnace, DoubleJump OR Dash
    gorlek:
      SentryJump=1  # sjump from the frozen plant then upslash
      Grenade=1, Bash, Damage=20 OR DoubleJump OR Dash OR Sword OR Glide
      Flap, Bash, Damage=20 OR DoubleJump OR Dash OR Sword OR Glide
      LowerReach.CentralFurnace, Glide OR Sword OR Hammer OR Damage=20
  pickup LowerReach.BreakWallEX:
    moki, BreakWall=20:
      Combat=ShieldMiner OR Bash OR Launch
      DoubleJump, Dash OR Glide
  pickup LowerReach.WindBottomEX:
    moki: Grenade=1, Glide  # grenade to light the lantern
    gorlek:
      Grenade=1, Damage=20 OR Glide  # Pickup too close from the spikes for a TP out
      # Sentry to light the lantern
      Sentry=1, Glide, Launch OR SentryJump=1
      Sentry=1, Damage=20, Launch OR SentryJump=1
      Sentry=1, Glide, DoubleJump, TripleJump OR Hammer  # jump bellow the lantern, don't need any wall jump
      Sentry=1, Damage=20, DoubleJump, TripleJump OR Hammer  # jump bellow the lantern, don't need any wall jump
    unsafe:
      Sentry=1, DoubleJump  # djump + sentry to light the lantern. The sentry need to explode when the butterfly is high (rng based?)
  pickup LowerReach.WindHiddenEX:
    moki: Grenade=1, Glide  # grenade to light the lantern
    gorlek:
      DoubleJump, Sentry=1, Glide, TripleJump OR Hammer  # sentry to light the lantern
      SentryJump=1, Sentry=1, Glide
      SentryJump=2, Damage=20, DoubleJump OR Dash  # sjump, damage boost (the spikes wond t hit Ori after landing on them), sjump again then upsalsh to reach the right wall then sword combo to reach the pickup and tp out
      DoubleJump, TripleJump, SentryJump=1, Damage=20, Sword OR Hammer  # same as above, triple jump + up slash to get to the right wall then jump into the spikes to avoid the first sjump
      Launch, DoubleJump OR Dash OR Sword
    unsafe:
      DoubleJump, TripleJump, Damage=20, Sword OR Hammer OR Bash  # tjump + upslash/bash the gorlek to climb the right wall, tjump to the left spiky wall, iframe to wjump and tjump again to wjump from the wall just above and tjump again to the ice wall<

  conn LowerReach.SecondSoup:
    moki:
      Combat=ShieldMiner, DoubleJump OR Dash OR Glide
      Bash, Grenade=1
      Launch
    # gorlek: ShieldEnemyObstacle  @Validator: ShieldEnemyObstacle obsolete, should be Combat probably
  conn LowerReach.SoupMoki:
    moki: Grenade=1, Glide  # grenade to light the lantern
    gorlek:
      Launch, DoubleJump OR Dash OR Sword OR Hammer OR Damage=20
      DoubleJump, Sentry=1, Glide, TripleJump OR Hammer  # Sentry to light the lantern
      SentryJump=1, Sentry=1, Glide  # Sentry to light the lantern
    unsafe: Launch  # Might be gorlek

# checkpoint at -223, -4043

anchor LowerReach.SoupMoki at -240, -3989:  # Below the reach teleporter, where you hand delicious marshclam soup to a moki (or alternatively extuingish his fireplace...)
  refill Energy=4:
    moki: Weapon

  quest LowerReach.HandToHandHat:
    moki: GladesTown.HandToHandSoup

  pickup LowerReach.WindHiddenEX:
    moki:
      DoubleJump, Dash, Glide
      Launch, Glide
    gorlek: DoubleJump OR Dash OR Glide OR Launch OR Sword OR Damage=20
    unsafe:
      Bash, Grenade=1
      Flash=1 OR Sentry=1 OR Shuriken=1

  conn LowerReach.WindChannel:
    moki: Glide
    gorlek: DoubleJump OR Dash OR Launch OR Sword OR Hammer OR Damage=20  # Can use Shuriken, Flash, Bow, Spike, Sentry to slow you down so you can avoid taking a damage (gorlek?)
    unsafe: free
  conn LowerReach.East:
    moki:
      DoubleJump, Dash, Bash, Grenade=2
      Launch
      gorlek:
        Bash, Grenade=2
        SentryJump=2
      unsafe:
        DoubleJump, TripleJump, Dash OR Sword  # climb the wall near the moki, dash then triple jump to the wall to reset your jumps and dash + triple jump to reach the plant. With sword, pogo the fire, triple jump + upslash to reach the wall to reset your jumps then sword jump to the plant

anchor LowerReach.East at -182, -3968:  # Right of the Lantern opening the Tp room
  refill Checkpoint
  refill Full:  # use the teleporter
    moki: Bash, Grenade=2, DoubleJump OR Dash OR Glide OR Launch
    gorlek:
      Bash, Grenade=2
      # Grenade=1, DoubleJump, OR Dash OR Glide OR Launch OR Sword OR Hammer  not sure which was the intent xD
      Sentry=1, Launch OR SentryJump=1
      Sentry=1, DoubleJump, TripleJump OR Hammer
    unsafe:
      Grenade=1, Sentry=1 OR Shuriken=1 OR Blaze=1 OR Flash=1 OR Spear=1
  # could be considered moving this anchor to the left, closer to the teleporter, if it gets important on higher difficulties

  state LowerReach.RolledSnowball:
    moki: Grenade=1, Combat=Mantis OR Bash
    gorlek:
      Launch, Sentry=1  # Sentry to melt the ice
      Damage=20, SentryJump=1, Sentry=1  # Jump in the spikes (won't damage Ori afterwards), sjump then sentry to melt the ice + sword combo to return to safety
      DoubleJump, TripleJump, Sentry=1, Dash OR Glide OR Sword OR Hammer OR Damage=20  # Jump from the branch above the ice, triple jump to get close enough, sentry to melt the ice then return to safety
    unsafe:
      DoubleJump, TripleJump, Sentry=1, Shuriken=1 OR Blaze=1
      DoubleJump, TripleJump, Sentry=2  # Same path as above but use one sentry to stall in the air and another one to melt the ice

  pickup LowerReach.SnowballHC:
    moki: LowerReach.RolledSnowball, Burrow, DoubleJump OR Dash OR Glide OR Launch OR Damage=20
    gorlek: LowerReach.RolledSnowball, Burrow  # Dash in the snow before exiting the burrow section to get momentum

  conn LowerReach.Teleporter:
    moki:
      Grenade=1, DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=2
    gorlek:
      Bash, Grenade=2
      # Grenade=1, DoubleJump, OR Dash OR Glide OR Launch OR Sword OR Hammer  not sure which one was the intent :p
      Sentry=1, Launch OR SentryJump=1
      Sentry=1, DoubleJump, TripleJump OR Hammer
    unsafe:
      Grenade=1, Sentry=1 OR Shuriken=1 OR Blaze=1 OR Flash=1 OR Spear=1
  conn LowerReach.SoupMoki: free
  conn LowerReach.PastSnowball:
    moki, LowerReach.RolledSnowball:
      DoubleJump OR Glide OR Launch
      Bash, Grenade=1, Dash
      Bash, Grenade=2
    gorlek, LowerReach.RolledSnowball: Sword OR Hammer OR Bash OR Damage=20  # Bash the running ennemy to avoid the damage boost
    unsafe, LowerReach.RolledSnowball: Grenade=1 OR Sentry=1 OR Shuriken=1 OR Flash=1 OR Blaze=1 OR Spear=1

anchor LowerReach.PastSnowball at -99, -3982:  # At the bashnade pedestal after rolling the snowball
  refill Checkpoint
  refill Energy=4:  # fast respawning crystal
    moki: Weapon

  state LowerReach.EastDoorLantern:
    moki:
      Bash, Grenade=2, DoubleJump, Dash, Glide
      Grenade=1, Launch
    gorlek:
      Sentry=1, Launch  # Sentry to light the lantern
      Glide, SentryJump=2, Grenade=1  # Need to use up slashes (sword not mention because of the sjumps in the rest of the path)
      Glide, SentryJump=3, Sentry=1  # Same as above but one more sjump to get close enough to the lantern to light it with a sentry
      Dash, SentryJump=2, Grenade=1
      Dash, SentryJump=3, Sentry=1
      SentryJump=1, DoubleJump, Grenade=1 OR Sentry=1
      SentryJump=4, Grenade=1
      SentryJump=5, Sentry=1
      Bash, Grenade=5, Damage=20
      Bash, Grenade=2, DoubleJump, TripleJump OR Dash OR Glide OR Sword OR Hammer
      Bash, Grenade=3, DoubleJump
      Bash, Grenade=4, Dash OR Sword
      Bash, Grenade=5, Glide OR Hammer
    unsafe:
      DoubleJump, TripleJump, Sentry=1 OR Grenade=1  # Need to get a really precise wall jump to get to the plants

  pickup LowerReach.RoofLeftEX:
    moki:
      LowerReach.CoolEastFurnace, Bash, Grenade=2, DoubleJump, Dash, Glide  # blame moon
      Launch, DoubleJump, Dash OR Glide
      Bash, Grenade=1, Launch
    gorlek:
      Launch, DoubleJump OR Dash OR Glide OR Sword OR Hammer  # Launch on the ceiling, use your mobility option then launch again
      Bash, Grenade=2, DoubleJump, TripleJump OR Dash OR Glide  # the triple jump one needs a pretty precise angle for the second bash grenade, might move it to unsafe
      SentryJump=1, DoubleJump, TripleJump
    unsafe:
      SentryJump=1, DoubleJump, Dash
      Launch, Shuriken=2 OR Sentry=2  # Launch on the ceiling, sentry/shuriken -> launch -> sentry/shuriken again
  pickup LowerReach.RoofRightEX:
    moki:
      LowerReach.CoolEastFurnace, Bash, Grenade=2
      Launch
    gorlek:
      SentryJump=2
      Bash, Grenade=2
      Bash, Grenade=1, DoubleJump, Dash OR Sword  # Climb on the right wall above the 2nd plant
      SentryJump=1, DoubleJump  # Climb on the wall above the 2nd plant
    unsafe:
      DoubleJump, TripleJump  # Need to get a really precise wall jump to get to the plants

  conn LowerReach.SwimmingPool:
    moki:
      Bash, Grenade=1, DoubleJump, Dash, Glide
      Launch
    gorlek:
      SentryJump=1, DoubleJump OR Dash OR Glide  # Need to use some upslashes with Glide
      SentryJump=2
      Bash, Grenade=1, DoubleJump, Damage=20 OR TripleJump OR Dash OR Glide OR Sword OR Hammer
      Bash, Grenade=1, Sword
      Bash, Grenade=2, Dash
      Bash, Grenade=3, Glide
    unsafe:
      DoubleJump, TripleJump  # Need to get a really precise wall jump to get to the plants
      Bash, Grenade=1, Dash, Sword OR Hammer OR Sentry=1 OR Flash=1 OR LowerReach.HeatEastFurnace  # Need to walljump on the wall above the 2nd plant then dash, get a reset by touching the ceilin and dash a second time
    # shuriken break note: this wall has 20 health
  # backwards path can't get past the snowball

# checkpoint at -60, -3987

anchor LowerReach.SwimmingPool at -44, -4001:  # At the platform in the freezable water
  refill Energy=4:
    moki: Weapon, LowerReach.CoolEastFurnace OR Water

  state LowerReach.HeatEastFurnace:
    moki:
      Bash, Grenade=2
      Grenade=1, Launch
    gorlek:
      DoubleJump, Grenade=1  # Climb the right wal then jump to the left wall before double jumping again to the platform
      SentryJump=1, Grenade=1
      LowerReach.HeatEastFurnace, WaterDash, Grenade=1, Water OR Damage=20  # Don't know if usefull since you need the state LowerReach.HeatEastFurnace to reach that same state
    unsafe: Dash, Grenade=1  # Precise wall jump on the right wall then dash to the left, wall jump and dash again
  state LowerReach.CoolEastFurnace:  # the intentional path is to cool this furnace
    moki:
      Flap, Bash, Grenade=1
      Flap, Launch
    gorlek:
      DoubleJump, Flap  # Climb the right wal then jump to the left wall before double jumping again to the platform
      SentryJump=1, Flap
      LowerReach.HeatEastFurnace, WaterDash, Flap, Water OR Damage=20
    unsafe: Dash, Flap  # Precise wall jump on the right wall then dash to the left, wall jump and dash again

  pickup LowerReach.FractureShard:
    moki: LowerReach.HeatEastFurnace, Water

  conn LowerReach.ArenaArea:
    moki, LowerReach.EastDoorLantern:
      LowerReach.CoolEastFurnace, Bash, Grenade=1
      Launch, LowerReach.CoolEastFurnace OR DoubleJump OR Dash OR Glide
    gorlek, LowerReach.EastDoorLantern:
      Launch  # Launch into the ceiling then into the wall near the energy cristal and again to the platform
      SentryJump=1, LowerReach.CoolEastFurnaced OR Water
      SentryJump=1, DoubleJump, TripleJump OR Dash OR Glide          # double jump from the platform, refill dash/jumps by slashing the energy cristal then sjump on the plant
      SentryJump=2, DoubleJump OR Dash OR Glide
      Bash, Grenade=1, Water
      Bash, Grenade=1, Damage=20, DoubleJump OR Dash
      Bash, Grenade=1, Damage=20, WaterDash, Glide OR Sword  # Jump, air stall, damage boost to waterdash and air stall again
      Bash, Grenade=1, DoubleJump, Sword, TripleJump OR Dash OR Glide
      Bash, Grenade=2, Damage=20 OR Dash OR Glide
      Bash, Grenade=2, Sword, DoubleJump OR Dash
      Bash, Grenade=2, Hammer, DoubleJump OR Dash
      LowerReach.HeatEastFurnace:
        WaterDash, Water, DoubleJump  # Wall jump from the right wall
        WaterDash, Water, Hammer  # Wall jump from the right wall
        DoubleJump, TripleJump, Sword  # bait the plant, triple jump + up slash on the right wall
        DoubleJump, TripleJump, Hammer, Water OR Damage=20  # bait the plant, triple jump + up slash on the right wall
  conn LowerReach.PastSnowball:
    moki, BreakWall=20:
      Bash, Grenade=1
      Launch
    gorlek, BreakWall=20:
      DoubleJump OR SentryJump=1
      LowerReach.HeatEastFurnace, WaterDash, Water OR Damage=20
    unsafe: Dash, BreakWall=20  # Precise wall jump on the right wall then dash to the left, wall jump and dash again

anchor LowerReach.ArenaArea at 44, -3992:  # To the left of the combat arena
  refill Checkpoint
  refill Health=1
  refill Energy=3:
    moki:
      Weapon, DoubleJump, Dash
      Weapon, Launch
      Bow=1 OR Spear=1 OR Grenade=1

  state LowerReach.ArenaBeaten:
    moki: Regenerate, Damage=40, Combat=3xShieldMiner+Hornbug+2xBee
    unsafe: Combat=3xShieldMiner+Hornbug+2xBee

  conn LowerReach.Trial:
    moki: LowerReach.ArenaBeaten
  conn LowerReach.WispPath:
    moki, LowerReach.ArenaBeaten:
      Glide, Grapple OR Launch
      Glide, DoubleJump, Bash, Grenade=1
    gorlek, LowerReach.ArenaBeaten:
      Glide, SentryJump=1
      Glide, Bash, Grenade=1
      Glide, DoubleJump, TripleJump OR Sword OR Hammer OR Dash OR Damage=20  # With dboost, jump in the spike wall then djump
      Glide, Dash, Hammer
      Launch, DoubleJump OR Dash OR Sword OR Damage=20  # Pass the 3 first spinner, wall jump on the right wall, stall, launch into the ceiling, relaunch on the left wall
    unsafe, LowerReach.ArenaBeaten:
      Launch, Shuriken=1 OR Sentry=1 OR Spear=1 OR Flash=1  # Pass the 3 first spinner, wall jump on the right wall, stall, launch into the ceiling, relaunch on the left wall
      DoubleJump, TripleJump, Damage=20, Dash OR Sword OR Hammer OR Shuriken=2 OR Sentry=2 OR Flash=2 OR Blaze=2 OR Spear=2  # Climb the right wall, triple jump + stall to the left wall, return to the right before the 2nd spinner, climb  the left wall after the 3rd spinner, stall as much possible in the air, take a damage boost on the spike floor then go to the right wall. You can saty on the right wall and climb to the energy cristal with triple jump
      Bash, Grenade=2, DoubleJump, TripleJump, Damage=20  # Same as above. 1st bash grenade to access directly to the left wall in the arena and second one just after the 3rd spinner
  # backwards path can't get through the door

# checkpoint at just kidding, placed this mark because the refill logic below kind of sucks

anchor LowerReach.WispPath at 83, -3874:  # Halfway through the climb
  refill Checkpoint
  refill Health=1:
    moki:
      Grapple OR Launch
      Bash, Grenade=1  # wasted energy...
    gorlek:
      DoubleJump, TripleJump OR Dash OR Sword OR Hammer
      Dash, Hammer
      SentryJump=1
  refill Energy=4:
    moki:
      DoubleJump, Grapple
      DoubleJump, Bash, Grenade=1  # wasted energy...
      Dash, Damage=20, Grapple
      Dash, Damage=20, Bash, Grenade=1  # wasted energy...
      Launch
    gorlek:
      Grapple, Dash OR Glide OR Sword
      SentryJump=1
      Bash, Grenade=1, Dash OR Glide OR Sword
      DoubleJump, TripleJump OR Dash OR Sword OR Hammer OR Damage=20
      Dash, Hammer

  conn LowerReach.SnowEscape:
    moki:
      Bash, Grenade=5, Glide, DoubleJump
      Bash, Grenade=4, Glide, Grapple
      Bash, Glide, Launch
    gorlek:
      Launch, Bash OR SentryJump=1 OR Damage=20
      Bash, SentryJump=2, Glide
      Bash, SentryJump=3, DoubleJump OR Dash OR Grapple  # SentryJump + upslash to get on the right wall at the 1st wind column
      Bash, DoubleJump, TripleJump, Damage=20
      Bash, Grenade=2, Glide
      Bash, Grenade=3, Grapple  # At the last grapple, need to wall jump on the trunk just above, can be hard. If too hard for gorlek, add a bash grenade in order to reach the top
      Bash, Grenade=3, DoubleJump, TripleJump OR Dash OR Grapple OR Sword OR Hammer
      Bash, Grenade=3, Dash, Sword OR Hammer  # Up Slash with hammer to a little higher on the left wall at the 1st wind column. Same with sentry (+one to stall in the air), might moove to unsafe
    unsafe:
      Bash, Grenade=3, Dash, Sword OR Hammer OR Flash=2 OR Sentry=2
      Bash, Grenade=3, DoubleJump, Shuriken=1 OR Flash=1 OR Sentry=1
  # backwards path can't get through the arena ceiling

# checkpoint at 80, -3805

anchor LowerReach.SnowEscape:
  refill Full
  quest LowerReach.ForestsMemory:  # currently based on the requirements of getting here to simplify
    moki, LowerReach.ArenaBeaten:
      Dash, Bash, Grapple, Glide, Water OR DoubleJump
      Bash, Glide, Launch
    gorlek, LowerReach.ArenaBeaten:
      Launch
      Dash, Glide, DoubleJump OR Grapple OR Damage=20
    unsafe, LowerReach.ArenaBeaten:
      DoubleJump, Dash, TripleJump  # Require a blind wall jump, hard to do without debug renderer
      SentryJump=1, DoubleJump, Dash, TripleJump  # Same path than above but the sjump ease it
      SentryJump=2, DoubleJump, Dash  # 1st sjump on a friendly spike and 2nd one on the branch to pass the 1st wind column
      SentryJump=3, Dash, Grapple OR Damage=20
      Dash, SentryJump=4
  pickup LowerReach.EscapeRevisitEX:
    moki: LowerReach.ForestsMemory

anchor LowerReach.Trial at 64, -4046:  # At trial start
  refill Checkpoint

  state LowerReach.KeystoneDoor:
    moki: Keystone=4
  # state LowerReach.TrialActivation:
  #   moki: LowerReach.KeystoneDoor
  state LowerReach.BearSneezed:
    moki: LowerReach.ForestsMemory  # the game forces Baur awake when collecting the wisp

  pickup LowerReach.RightKS:
    moki:
      Glide
      DoubleJump, Dash, Bash, Grenade=1
      Launch, DoubleJump OR Damage=20
    gorlek:
      Launch
      SentryJump=1, DoubleJump
      Bash, Grenade=1, DoubleJump
  pickup LowerReach.UpperLeftKS:
    moki: Glide
    gorlek: Launch, DoubleJump, TripleJump, Damage=20  # Launch against the walls. When on the wall above GladesTown.ReachPath, first use triple jump then lauch, triple jump again to take a damage boost to refresh launch then launch and triple jump again to take the pickup and tp out
  pickup LowerReach.MiddleLeftKS:
    moki: Glide
    gorlek: Launch, Damage=20, DoubleJump OR Dash  # Launch against the walls. When on the wall above GladesTown.ReachPath, first use djump/dash then lauch, reuse your mobility option, take a damage boost to refresh launch, take the pickup and TP out
  pickup LowerReach.BottomLeftKS:
    moki: Glide
    gorlek:
      Launch, Sword OR DoubleJump OR Dash OR Hammer OR Damage=20  # TP out after taking the pickup
      DoubleJump, TripleJump, Damage=20 OR Sword OR Dash OR Hammer  # Start jumping from the highest point of the second platform, on the right. TP out after taking the pickup
    unsafe:
      Launch, Shuriken=1  # TP out after taking the pickup
      DoubleJump, TripleJump, Shuriken=1  # Start jumping from the highest point of the second platform, on the right. TP out after taking the pickup
  pickup LowerReach.TrialEX:
    moki: Glide
    gorlek: Launch, Damage=20, DoubleJump OR Dash  # Take a damage to refresh Launch/djump in the hiden area then tp out

  conn GladesTown.ReachPath:
    moki: Glide
    gorlek:
      Launch  # Lanch on the walls, let Ori fall in the connection path then launch before hitting the spikes
      DoubleJump, TripleJump  # Start jumping from the highest point of the second platform, on the right. Touch the wall above the connection, let Ori fall then jump before hitting the spikes
      Dash, Sword OR Hammer OR Damage=20
      SentryJump=1  # sjump on the wall, climb it as high as possible then jump and do a full combo to avoid falling in the spikes
      Bash, Grenade=1, DoubleJump OR Dash OR Sword OR Hammer
    unsafe:
      Dash, Shuriken=1 OR Sentry=1
      Bash, Grenade=1, Damage=20, Shuriken=1 OR Flash=1 OR Sentry=1  # Stall in the air to get to the 2nd platform then bash grenade to the ceiling, wall jump and damage boost

region UpperDepths:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor UpperDepths.Entry at 161, -4340:  # The little standable ground below the entrance
  pickup UpperDepths.EntrySpikesEX:
    moki: Glide

  conn UpperDepths.FirstFirefly:
    moki:
      Glide, Combat=2xBombSlug+2xBat+SneezeSlug
      Glide, Combat=2xBombSlug, Bash

# checkpoint at 147, -4392

anchor UpperDepths.FirstFirefly at 211, -4391:  # Where the Voice dialogue plays
  refill Checkpoint

  pickup UpperDepths.EntryRoofEX:
    moki:
      Bash, DoubleJump OR Dash
      DoubleJump, Dash, Grapple
      Launch
  pickup UpperDepths.EntryOre:
    moki:
      Combat=Bat, Grapple, DoubleJump
      Bash, DoubleJump OR Grapple
      Launch
  pickup UpperDepths.LeftEntryKS:
    moki:
      BreakWall=1, Combat=Spiderling, Grapple, DoubleJump OR Dash OR Glide
      BreakWall=1, Bash, Grapple, DoubleJump OR Dash OR Glide
      BreakWall=1, Launch
      Bow=1, Combat=Spiderling OR DoubleJump OR Bash OR Launch
      Spear=1, Combat=Spiderling OR DoubleJump OR Bash OR Launch

  conn UpperDepths.Entry:
    moki:
      Glide, Combat=2xBombSlug+2xBat+SneezeSlug
      Glide, Combat=2xBombSlug, Bash
  conn UpperDepths.FirstKSRoom: free

# checkpoint at anchor below, kind of easy to miss though

anchor UpperDepths.FirstKSRoom at 223, -4420:  # Below the first firefly egg
  refill Energy=3:  # this crystal is in the darkness
    unsafe: Weapon

  state UpperDepths.EntryKeystoneDoor:
    moki, Keystone=2:
      DoubleJump, Grapple
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Launch
  state UpperDepths.LightPuzzle:  # breaking the corruption blocking the light
    moki, UpperDepths.EntryKeystoneDoor, BreakWall=16, BreakWall=16:
      DoubleJump, Bash, Grapple
      Bash, Launch

  pickup UpperDepths.RightEntryKS:
    moki:
      Grapple, DoubleJump
      Launch, DoubleJump OR Dash OR Glide OR Grapple
  pickup UpperDepths.LeftEntryKS:
    moki: DepthsLight, Combat=Spiderling OR DoubleJump OR Bash OR Launch
  pickup UpperDepths.SwimEC:
    moki: DepthsLight, Water, Combat=Spiderling OR DoubleJump OR Bash OR Launch

  conn UpperDepths.FirstFirefly:
    moki:
      Grapple, DoubleJump, Combat=Spiderling, WeakSlug OR Bash
      Launch, DoubleJump OR Grapple
  conn UpperDepths.BelowHive:
    moki, UpperDepths.EntryKeystoneDoor, UpperDepths.LightPuzzle OR DepthsLight:
      Bash, DoubleJump, Grapple
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Launch

# checkpoint at 136, -4425
# checkpoint at 305, -4426
# checkpoint at 297, -4376

anchor UpperDepths.BelowHive at 422, -4402:  # Below the Hive, on top of the tunnel leading downwards
  refill Checkpoint
  refill Full:  # use the teleporter
    moki: BreakWall=1, Grapple OR Launch
  refill Energy=3:
    moki: Weapon, DoubleJump OR Launch

  state UpperDepths.EntryKeystoneDoor:
    moki: Keystone=2, DepthsLight, DoubleJump OR Dash OR Glide OR Launch

  pickup UpperDepths.HiveEX:
    moki: Bash OR Launch
  pickup UpperDepths.RightEntryKS:
    moki: DepthsLight, Launch

  conn UpperDepths.FirstKSRoom:
    moki: UpperDepths.EntryKeystoneDoor, DepthsLight, DoubleJump OR Dash OR Glide OR Launch
  conn UpperDepths.Teleporter:
    moki: Grapple OR Launch
  conn UpperDepths.Central:
    moki: DepthsLight, DoubleJump OR Dash OR Glide OR Launch  # a bit scary...
  conn UpperDepths.LowerConnection:
    moki: DepthsLight  # a bit scary...

# checkpoint at 529, -4399

anchor UpperDepths.Teleporter at 513, -4361:  # The spirit well
  refill Full

  pickup UpperDepths.TeleporterEX: free  # just a few steps away in the darkness

  conn Teleporters: free
  conn UpperDepths.BelowHive:
    moki:
      BreakWall=1, Bow OR Spear
      BreakWall=1, Launch
      DepthsLight
  conn UpperDepths.Central:
    moki:
      BreakWall=1, Bow, DoubleJump OR Dash OR Glide OR Launch  # a bit scary...
      BreakWall=1, Spear, DoubleJump OR Dash OR Glide OR Launch  # a bit scary...
      BreakWall=1, Launch

anchor UpperDepths.Central at 464, -4484:  # The firefly egg to the right of the second keystone door
  refill Checkpoint
  refill Energy=3:  # in the dark
    unsafe: Weapon, Launch

  state UpperDepths.CentralKeystoneDoor:
    moki: Keystone=2

  conn UpperDepths.SecondKSRoom:
    moki:
      Combat=2xSpiderling, DepthsLight OR BreakWall=1
      Bash, DepthsLight OR BreakWall=1
  conn UpperDepths.LowerConnection:
    moki: UpperDepths.CentralKeystoneDoor
  conn UpperDepths.BelowHive:
    moki: DepthsLight, Launch
  conn UpperDepths.Teleporter:
    moki, BreakWall=20:
      DepthsLight, DoubleJump, Dash, Grapple
      DepthsLight, Launch

anchor UpperDepths.SecondKSRoom at 542, -4467:  # The egg of the firefly circling through the keystone room
  refill Checkpoint
  refill Energy=4:
    moki: Weapon
  # a great number of energy crystals on the way through the dark have not been considered (nor is flash consumption considered...)

  quest UpperDepths.LightcatcherSeed:
    moki:
      DepthsLight, DoubleJump, Dash, Grapple
      DepthsLight, Combat=2xSpiderling, DoubleJump, Dash, Bash, Grenade=1  # clear the floor to bashgrenade
      DepthsLight, Launch

  pickup UpperDepths.RightHealthKS:
    moki: BreakWall=1 OR DepthsLight
  pickup UpperDepths.LeftHealthKS:
    moki:
      BreakWall=1, DoubleJump, Dash OR Glide
      DepthsLight, DoubleJump, Dash OR Glide
      DepthsLight, DoubleJump, Bash, Grenade=1
      Launch, BreakWall=1 OR DepthsLight
  pickup UpperDepths.KeystoneHC:
    moki:
      BreakWall=1, DoubleJump, Dash, Glide
      DepthsLight, DoubleJump, Dash OR Glide
      Launch, BreakWall=1 OR DepthsLight
  pickup UpperDepths.BossPathEX:
    moki:
      DepthsLight, DoubleJump, Dash
      DepthsLight, DoubleJump, Bash, Grenade=1
      DepthsLight, Launch

  conn UpperDepths.Central:
    moki:
      Combat=Spiderling, DepthsLight OR BreakWall=1
      Bash, DepthsLight OR BreakWall=1
  conn MoraFight:
    moki:
      DepthsLight, DoubleJump, Grapple, Dash OR Glide
      DepthsLight, Launch
  conn UpperDepths.Teleporter:
    moki, BreakWall=20:
      DepthsLight, DoubleJump, Grapple, Dash OR Glide
      DepthsLight, Launch

# checkpoint at 572, -4431

anchor MoraFight:
  refill Full
  quest UpperDepths.ForestsEyes:
    moki: Boss=330, Regenerate, Damage=95, Flash, Bash, Grapple, DoubleJump OR Dash OR Launch
    unsafe: Boss=330, Flash, Bash, Grapple, DoubleJump OR Dash OR Launch

anchor UpperDepths.LowerConnection at 423, -4475:  # The firefly egg to the left of the second keystone door
  refill Checkpoint
  # energy crystal on the way to the trial not considered

  state UpperDepths.CentralKeystoneDoor:
    moki: Keystone=2

  pickup LowerDepths.BelowDoorOre:
    moki: DepthsLight  # It's hidden in a dark area, not hard to reach.
  pickup LowerDepths.LeftEX:
    moki:
      BreakWall=1, DoubleJump OR Dash OR Glide OR Launch
      DepthsLight, DoubleJump OR Dash OR Glide OR Launch

  conn UpperDepths.BelowHive:
    moki, BreakWall=1 OR DepthsLight:
      DoubleJump, Grapple
      Launch
  conn UpperDepths.Central:
    moki: UpperDepths.CentralKeystoneDoor
  conn LowerDepths.West:
    moki:
      BreakWall=1, Dash, DoubleJump OR Glide
      DepthsLight, DoubleJump, Dash
      DepthsLight, Glide
      Launch, BreakWall=1 OR DepthsLight
  conn LowerDepths.Central:
    moki:  # the paths in the dark are a bit treacherous...
      BreakWall=1, DoubleJump, Dash, Bash OR Glide
      BreakWall=1, Launch, DoubleJump OR Glide
      DepthsLight, DoubleJump, Dash, Bash OR Glide
      DepthsLight, Bash, Glide
      DepthsLight, Bash, Grenade=1, DoubleJump OR Dash OR Glide
      DepthsLight, Launch, DoubleJump OR Dash OR Bash OR Glide

region LowerDepths:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor LowerDepths.West at 322, -4510:  # At the Moki needing a Lantern
  refill Checkpoint
  refill Health=1:  # to the left
    unsafe:
      DoubleJump, Dash OR Glide
      Bash OR Launch
  refill Energy=3:  # to the left
    unsafe:
      DoubleJump, Dash OR Glide
      Bash OR Launch
  # energy crystal on the way not considered

  quest LowerDepths.HandToHandSilk:
    moki: GladesTown.HandToHandLantern

  pickup LowerDepths.SwimEC:
    moki: DepthsLight, Water

  conn DepthsShrine:
    moki:
      DepthsLight, Water, DoubleJump, Bash
      DepthsLight, Water, Bash, Grenade=1, Dash OR Glide
      DepthsLight, Water, Launch
    # shuriken break note: this wall has 20 health
  conn UpperDepths.LowerConnection:
    moki: DepthsLight, Launch
  conn LowerDepths.Central:
    moki:
      BreakWall=1, DoubleJump, Dash, Bash OR Glide
      BreakWall=1, Launch, DoubleJump OR Glide

anchor DepthsShrine:
  refill Full
  pickup LowerDepths.CombatShrine:
    moki, Regenerate, Combat=3xBat+4xEnergyRefill+2xSneezeSlug+2xTentacle+4xEnergyRefill+2xBat+2xTentacle+4xEnergyRefill+Bat+SneezeSlug:
      Damage=65
      Damage=60, DoubleJump OR Dash
      Damage=50, Launch
    unsafe: Combat=3xBat+4xEnergyRefill+2xSneezeSlug+2xTentacle+4xEnergyRefill+2xBat+2xTentacle+4xEnergyRefill+Bat+SneezeSlug

anchor LowerDepths.Central at 482, -4536:  # Below where the trial starts
  refill Checkpoint

  pickup LowerDepths.RaceStartHC:
    moki:
      DoubleJump, Grapple, Dash OR DepthsLight
      Launch

  conn LowerDepths.East:
    moki:
      Bash, DoubleJump, Dash OR Glide
      Launch, DoubleJump OR Dash OR Bash OR Glide
  conn UpperDepths.LowerConnection:
    moki:
      DepthsLight, Launch, Bash
      DepthsLight, Bash, DoubleJump

# checkpoint at 478, -4517

anchor LowerDepths.East at 570, -4550:  # The lit up room on the trial path
  refill Checkpoint
  refill Energy=3:
    moki: Weapon
  refill Energy=3:
    moki, Weapon:
      Bash, DoubleJump OR Dash OR Glide
      Launch

  # state LowerDepths.TrialActivation:
  #   moki:
  #     DoubleJump, Bash, Grenade=3
  #     DoubleJump, Bash, Grenade=2, Grapple
  #     DoubleJump, Dash, Bash, Grapple
  #     Bash, Grapple, Glide
  #     Launch
  pickup LowerDepths.SpiritSurgeShard:
    moki:
      DoubleJump, Grapple, Dash OR Glide
      Launch, DoubleJump OR Dash OR Grapple OR Glide
  pickup LowerDepths.LupoMap:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Launch, DoubleJump, Dash
      Launch, Glide
      DepthsLight, Glide
      DepthsLight, Launch, DoubleJump OR Dash

  conn UpperDepths.SecondKSRoom:
    moki, BreakWall=20:
      DepthsLight, DoubleJump, Bash, Grapple
      DepthsLight, Launch
  conn LowerDepths.TreeArea:
    moki:
      BreakWall=1, DoubleJump, Bash, Grapple, Dash OR Glide
      BreakWall=1, Launch, Bash, DoubleJump, Dash
      BreakWall=1, Launch, Bash, Glide
      BreakWall=1, Launch, Grapple, DoubleJump OR Dash OR Bash OR Glide
      DepthsLight, Bash, Grapple, DoubleJump OR Dash OR Glide
      DepthsLight, Launch, Bash OR Grapple
  conn LowerDepths.Central:
    moki:
      Bash, DoubleJump OR Launch
      DepthsLight, Launch, DoubleJump, Dash OR Glide

# checkpoint at 621, -4579
# checkpoint at 693, -4515

anchor LowerDepths.TreeArea at 776, -4542:  # The flash tree
  refill Checkpoint
  refill Energy=4:
    moki: Weapon

  # there could be a path to activate the trial here, but these aren't used currently...

  pickup LowerDepths.FlashTree: free
  pickup LowerDepths.RightEX:
    moki: DepthsLight OR Launch

  conn LowerDepths.East:
    moki:
      DepthsLight, Glide OR Launch
      DepthsLight, DoubleJump, Bash OR Grapple
      DepthsLight, Dash, Bash OR Grapple

region PoolsApproach:
  moki: Danger=25
  gorlek: free
  unsafe: free

anchor PoolsApproach.MillPathCheckpoint at -826, -4130:  # The checkpoint halfway between Mill Approach and Mill Path (added mostly because the paths through here reached ridiculous complexity otherwise)
  refill Checkpoint

  conn WestGlades.MillApproach:
    moki:
      Water, Grapple, DoubleJump, Dash OR Glide
      Water, Grapple, Bash, Grenade=1, Dash, Glide
      Water, Launch, DoubleJump OR Dash OR Grapple OR Glide  # go up the left wall
    gorlek, Water:
      Launch
      Grapple, Dash OR Glide OR Sword OR DoubleJump  # grapple the plant then let you fall under it and regrapple it from bellow to have more height
      Grapple, Hammer, Damage=15
  conn PoolsApproach.MillPath:
    moki, Damage=20:  # severe enemy spam
      Bash, Grapple OR Launch  # this is probably actually closest to how you'd traverse this naturally
      Combat=Crab+2xSmallSkeeto, Grapple, DoubleJump OR Dash  # go through the gap from above, you can use Grapple to reset if you fall
      Bash, Grapple, DoubleJump OR Dash  # go through the gap from above, you can use Grapple to reset if you fall
      Launch, DoubleJump OR Grapple
    gorlek:
      Grapple, Glide OR Sword OR Hammer
      Launch, Damage=20
      SentryJump=1:
        Dash, Damage=20  # sjump then dash in the spikes
        DoubleJump, TripleJump OR Damage=20
      Bash, Grenade=1:
        DoubleJump
        Dash, Damage=20
    unsafe:
      Bash  # Bash the ennemies but they don't really like being on the right position for you to bash them

anchor PoolsApproach.MillPath at -873, -4146:  # above the water where the three paths merge
  refill Checkpoint

  pickup PoolsApproach.MillPathEX:
    moki:
      Bash, DoubleJump OR Dash
      Combat=SpinCrab+CorruptSlug, DoubleJump, Dash
      Combat=SpinCrab+CorruptSlug, DoubleJump, Grapple, Glide  # solvable either through the right grapple point or using the wrap-around taught at glades shrine
      Launch
    gorlek:
      Bash OR DoubleJump OR SentryJump=1  # bash the crab thingy. Once upward to make it gain height then downward in order to reach the pickup / djump where the slime. Can ignore it if its high on the wall
      Dash, Sword OR Hammer OR Grapple  # Dash upslash / grapple the right plant, and spam dash to reach the wall where the slime is
  pickup PoolsApproach.MillPathEC:
    moki: Water  # again not really a reason to even use Bash

  conn PoolsApproach.MillPathCheckpoint:
    moki, Damage=20:  # severe enemy spam
      Bash, DoubleJump  # bash errything
      Combat=Crab+2xSmallSkeeto, Bash, Grenade=3, Dash OR Glide  # clear the space to bashnade
      Combat=Crab+2xSmallSkeeto, Bash, Grenade=2, Grapple, Dash OR Glide  # clear the space to bashnade
      Combat=Crab+2xSmallSkeeto, DoubleJump, Grapple, Dash OR Glide
      Launch, DoubleJump OR Dash OR Bash OR Glide
    gorlek:
      Bash OR Launch OR SentryJump=1
      DoubleJump, TripleJump  # climb the wall bellow the checkpoint
      Grapple, DoubleJump OR Dash OR Sword OR Hammer
  conn PoolsApproach.RightOfWheel:
    moki: Water, Combat=SpinCrab OR DoubleJump OR Bash OR Launch  # bashing to break the wall on the way is much harder than just swimming at it and letting it happen, so didn't make Bash a requirement.
    gorlek: Water

# checkpoint at anchor below in the water

anchor PoolsApproach.RightOfWheel at -948, -4184:  # The rightmost platform of the static wheel
  pickup PoolsApproach.AboveWheelEX:
    moki:
      # grenadebash doesn't work as well when the wheel spins
      PoolsApproach.WheelFreed, DoubleJump
      Launch
    gorlek:
      DoubleJump:  # if the wheel isn't spinning, need a bit more than double jump
        Sword, Dash  # djump + upslash then dash to the wall
        TripleJump OR Hammer
      SentryJump=2
      SentryJump=1:
        DoubleJump OR PoolsApproach.WheelFreed
        Hammer, Dash
      PoolsApproach.WheelFreed, Dash, Hammer
    unsafe:
      Bash, Grenade=1:  # When the wheel is spinning, grenade can be offset from Ori making this path finicky
        DoubleJump OR SentryJump=1
        Hammer, Dash
  pickup PoolsApproach.MillPathHC:
    moki:
      Water, DoubleJump, Dash, WaterDash, Grapple
      Water, DoubleJump, Grapple, Launch
    gorlek, Water:
      WaterDash, DoubleJump, Grapple, Damage=20  # Analog swimming can avoid the damage boost but its hard to do with keyboard swimming
      Grapple, Launch
      DoubleJump, TripleJump, Bash, Damage=20 OR Grapple
    unsafe:
      Water, DoubleJump, Bash, Damage=20 OR Grapple:
        Sword OR Hammer  # the air stalling to skip grapple is quite hard + need an upslash and a precise shot to get to the HC but you can't refill your upsash anywhere
      Water, WaterDash, DoubleJump, Grapple  # the waterdash to get to the hc is really hard with keyboard swimming
  pickup PoolsApproach.MillPathEC:
    moki: Water, Bash, Damage=10
    gorlek: Water, Bash

  conn MarshPastOpher.PoolsPathWest:
    moki, BreakWall=20:
      Water, DoubleJump, WaterDash, Grapple  # maybe not obvious?
      Water, Grapple, Launch
    gorlek, Water, BreakWall=20:
      WaterDash, Grapple, DoubleJump OR Dash OR Glide
      Bash, Grapple:
        Glide
        DoubleJump, TripleJump OR Dash OR Sword OR Hammer
        Dash, Sword OR Hammer
      WaterDash OR Bash:
        DoubleJump, Damage=20, TripleJump OR Dash OR Glide OR Sword  # dboost in the spikes bellow the grapple plant and go directly to the breakable wall
      Launch, DoubleJump OR Dash OR Glide OR Sword OR Hammer OR Damage=20
    unsafe:
      Water, BreakWall=20, WaterDash OR Bash:
        DoubleJump, Damage=20, Glide OR Sword
      Water, BreakWall=20, Grapple, WaterDash OR Bash:
        Sword OR Hammer  # Need an upslash but you can't refill it anywhere near
      Water, Launch  # Launch boost on the ceiling
  conn PoolsApproach.LeftOfWheel:
    moki:
      PoolsApproach.WheelFreed OR DoubleJump OR Grapple OR Launch
      Bash, Grenade=1
    gorlek: free
  conn EastPools.Entry:
    moki:
      # grenadebash doesn't work as well when the wheel spins
      Glide, Launch
      Bash, Grenade=1, Launch, DoubleJump OR Dash
      DoubleJump, Dash, Launch, Damage=20
      PoolsApproach.WheelFreed, DoubleJump, Glide
    gorlek:
      DoubleJump, Glide:  # if the wheel isn't spinning, need a bit more than double jump to reach the top platform
        Sword, Dash  # djump + upslash then dash to the wall
        TripleJump OR Hammer
      SentryJump=1, Glide  # upslash before starting gliding from the platform above the wheel
      PoolsApproach.WheelFreed:
        Glide, Sword OR Hammer OR Dash
        Bash, Grenade=1, Dash:  # Dash to catch the grenade
          Sword, Damage=20
          DoubleJump, TripleJump OR Sword OR Hammer
      Launch:
        Dash, DoubleJump OR Sword OR Hammer OR Damage=20  # dash, launch, dash again + air stall. Can air stall before the launch to make it even easier
        DoubleJump, Sword OR Hammer
        Bash, Grenade=1, Damage=20  # grenade, launch to have it in range of bash then lauch again
    unsafe:
      Launch:
        DoubleJump OR Dash OR Sword OR Hammer  # Use the ceiling to refresh your launch
        Bash, Grenade=1  # Bash glide
  conn PoolsApproach.MillPath:
    moki:
      Water, Bash, Damage=10, Grapple, DoubleJump, Dash OR Glide
      Water, Bash, WaterDash
      Water, Bash, Damage=10, Launch
    gorlek: Water, Bash  # Bash the projectile and use it to bash the crab thing to reach the connection

anchor PoolsApproach.LeftOfWheel at -995, -4184:  # The leftmost platform of the static wheel
  state PoolsApproach.WheelFreed:
    moki: Water, Bash

  pickup PoolsApproach.CurrentEX:
    moki: Water, WaterDash
  pickup MarshSpawn.PoolsPathEX:
    moki:
      Water, WaterDash, DoubleJump, Dash, Damage=10
      Water, WaterDash, Glide, DoubleJump OR Dash
      Water, WaterDash, Bash, DoubleJump OR Glide
      Water, WaterDash, Launch, DoubleJump OR Dash OR Bash OR Glide OR Damage=10
    gorlek, Water, WaterDash:
      Launch
      DoubleJump, TripleJump OR Dash OR Glide OR Sword
      Dash, Sword OR Bash OR Glide
      Glide, Damage=10
      Bash, Damage=10  # Jump in the spikes then jump to reach the projectile
      Hammer, Damage=10, DoubleJump OR Dash  # With Dash, Upslash -> dash -> hammer combo
    unsafe:
      Water, WaterDash, Bash, Sword OR Hammer  # stall in the air in order to wait for a projectile to bash

  conn PoolsApproach.RightOfWheel:
    moki:
      # grenadebash doesn't work when the wheel spins
      PoolsApproach.WheelFreed, Water
      DoubleJump OR Launch
    gorlek:
      Dash, Sword  # upslash then dash
      Hammer  # upslash
  conn EastPools.Entry:
    moki: Water, Launch
    gorlek:
      Water, WaterDash, DoubleJump, TripleJump OR Damage=20
      Water, WaterDash, DoubleJump, Dash, Hammer  # water dash straight up, double jump, upslash, dash
  conn MarshSpawn.Main:
    moki: Water, WaterDash  # <3

region EastPools:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor EastPools.Entry at -1122, -4166:  # At the Voice dialogue
  refill Checkpoint
  refill Health=1

  # The first bubbles here only spawn if you have Flap!
  pickup EastPools.TwoCrushersEX:
    moki: Water, WaterDash

  conn EastPools.LeverRoom:
    moki:
      Flap OR Launch
      Bash, Grenade=1
  conn PoolsApproach.LeftOfWheel:
    moki:
      Water
      Bash, Grenade=1, Glide
      Glide, Launch
      DoubleJump, Dash, Launch
      Bash, Grenade=1, Launch, DoubleJump OR Dash

anchor EastPools.LeverRoom at -1160, -4152:  # At the amulet Moki
  refill Checkpoint

  state EastPools.EntryLever:
    moki:
      Bash, DoubleJump, Dash OR Glide
      Bash, Dash, Glide
      Launch
  state EastPools.BelowTokkBubbleFree:
    moki:
      EastPools.EntryLever, Water, Bash
    unsafe, EastPools.EntryLever:
      Water, WaterDash
      Water, Bow=1 OR Grenade=1

  quest EastPools.KwolokAmuletQI: free

  pickup EastPools.RightOre:
    moki:
      DoubleJump, Grapple, Flap, Dash OR Glide  # kinda weird, but I guess this is the casual way?
      Launch, Grapple
    unsafe:
      Dash, Grapple, Glide, Flap
  pickup EastPools.CurrentEX:
    moki: Water, WaterDash
  pickup EastPools.BelowLeverEX:
    moki:  # kinda dangerous with the spikes? but damage seemed mostly avoidable
      DoubleJump, Bash, Grenade=1
      Hammer, DoubleJump OR Dash OR Glide
      Spear=1, DoubleJump OR Dash OR Glide
      Launch
  pickup EastPools.AboveDoorOre:
    moki, EastPools.EntryLever:  # other paths would be redundant with the paths coming from tokk
      Bash, Grenade=2
      Bash, Grenade=1, DoubleJump OR Grapple

  conn EastPools.TPArea:
    moki, EastPools.EntryLever:
      EastPools.BelowTokkBubbleFree, Combat=Crab, Grapple, Flap, DoubleJump OR Dash OR Glide
      EastPools.BelowTokkBubbleFree, Bash, Grapple, Flap, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1  # bashgrenade above
      Bash, Grenade=2, Dash OR Glide  # bashgrenade above
      Bash, Grenade=2, EastPools.BelowTokkBubbleFree OR Water  # bashgrenade below
      Launch
  conn EastPools.Entry: free

# checkpoint at -1278, -4158

anchor EastPools.TPArea at -1297, -4143:  # Where Tokk stands
  refill Checkpoint
  refill Full:  # use the teleporter
    moki: EastPools.LowerWaterDrained

  state EastPools.BelowTokkBubbleFree:
    moki:
      Water, Bash
    unsafe:
      Water, WaterDash
      Water, Bow=1 OR Grenade=1
  state EastPools.LowerWaterDrained:
    moki: Water OR EastPoolsTP
  # There are two Arenas here: you get one if you enter without WaterDash and another if you enter with it.
  # This path is assuming the worse case of getting the strictly harder WaterDash arena, but doesn't list WaterDash
  # explicitly because you don't need it unless you have it.
  # And any other way would lock basically all of Pools behind WaterDash. So it makes sense, right?
  # Also, for now this state includes breaking the purple wall before the arena because everything else would be dumb
  state EastPools.FightArenas:
    moki: EastPools.LowerWaterDrained, Regenerate, Damage=20, Water, Bash, Combat=4xCrab+Tentacle+2xSkeeto
    unsafe: EastPools.LowerWaterDrained, Water, Bash, Combat=4xCrab+Tentacle+2xSkeeto

  quest EastPools.HandToHandSpyglass:
    moki, LowerDepths.HandToHandSilk:
      Grapple, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1
      Launch
  quest EastPools.GrassSeed:
    moki, EastPools.FightArenas:
      Water, Bash, WaterDash OR Launch
      Water, Bash, DoubleJump, Dash OR Glide
      Water, Bash, Dash, Glide
      Water, Bash, Grenade=1, DoubleJump OR Dash OR Glide

  pickup EastPools.AboveDoorOre:
    moki:
      EastPools.BelowTokkBubbleFree, Grapple, Flap, DoubleJump OR Dash
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Bash, Grenade=2
      Launch
  pickup EastPools.AboveTpEX:
    moki:  # these need water to not be softlockable with the player draining the upper water
      Water, DoubleJump, Bash, Grenade=2
      Water, DoubleJump, Grapple, Bash, Grenade=1
      Water, Launch
  pickup EastPools.PurpleWallHC:
    moki, UpperPools.UpperWaterDrained:
      Water, WaterDash, Bash, Grenade=3, DoubleJump
      Water, WaterDash, Bash, Grenade=2, DoubleJump, Grapple
      Water, WaterDash, Bash, Launch
  pickup EastPools.LupoOre:
    moki: Water
  pickup EastPools.UltraBashShard:
    moki: EastPools.LowerWaterDrained, Water, Bash
  pickup EastPools.FightRoomHC:
    moki, EastPools.FightArenas, WaterDash:  # The HC only gets unlocked if you finish the alternate WaterDash arena; FightArenas doesn't have WaterDash as requirement included for reasons explained above, so it's needed here
      DoubleJump, Dash OR Grapple
      Bash, Grenade=1
      Launch
  pickup EastPools.EnergyHarvestShard:
    moki, EastPools.FightArenas:
      Water, WaterDash, DoubleJump
      Bash, Grenade=1
      Launch
  pickup EastPools.LupoEX:
    moki: EastPools.FightArenas, Water, Bash
  pickup EastPools.LupoMap:
    moki: EastPools.FightArenas, Water, Bash
  pickup EastPools.BehindCrusherEX:
    moki: EastPools.FightArenas, Water

  conn EastPools.Teleporter:
    moki: EastPools.LowerWaterDrained
  conn EastPools.LeverRoom:
    moki, EastPools.EntryLever:
      Combat=Crab, DoubleJump OR Dash OR Glide  # go above
      Bash, DoubleJump OR Dash OR Glide  # go above
      Bash, Grenade=1  # go above
      Launch  # go above
      Grapple, Combat=Crab OR Bash  # go below
  conn WestPools:
    moki: EastPools.FightArenas, Water, Bash, WaterDash, DoubleJump OR Dash OR Glide OR Launch
  conn UpperPools.KeystoneRoom:
    moki, EastPools.FightArenas:
      Water, Bash, DoubleJump, Dash OR Glide
      Water, Bash, Launch

anchor EastPools.Teleporter at -1316, -4153:  # At the teleporter after draining the water - this is to specify the refill and randos behaviour of draining the water if you grab the tp pickup
  refill Full

  state EastPools.LowerWaterDrained: free  # this is, uh... correct, I suppose xD

  conn Teleporters: free
  conn EastPools.TPArea: free

region UpperPools:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

# checkpoint at -1425, -4144
# checkpoint at -1535, -4115

anchor UpperPools.KeystoneRoom at -1540, -4095:  # Autosave below the two upper left keystones
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  state UpperPools.KeystoneRoomBubbleFree:
    moki:
      Water, WaterDash
      Water, Bash
    unsafe: Bow=1 OR Grenade=1 OR Spear=1 OR Shuriken=1  # @Validator Some of these could be considered Gorlek

  quest EastPools.GrassSeed:
    moki:
      Combat=SpinCrab OR Bash OR Launch
      DoubleJump, Dash

  pickup UpperPools.LowerKS:
    moki:
      Water, DoubleJump, Bash
      Water, WaterDash OR Launch
    gorlek:
      Water, Bash, Hammer
    unsafe:
      Water, Bash, Glide OR Sword  # Bash it when it goes out of the water, wait for it to jump at you and bash it again / upslash with sword (too precise for gorlek)
  pickup UpperPools.UpperLeftKS:
    moki:
      Bash, Grenade=1
      UpperPools.KeystoneRoomBubbleFree, DoubleJump, Flap
      Launch
    gorlek:
      SentryJump=1
      DoubleJump, TripleJump, Hammer  # tjump + upslash to reach the left wall to reset your jumps
      UpperPools.KeystoneRoomBubbleFree, Dash, Flap
      Grapple OR Bash:  # From above
        DoubleJump, Glide OR TripleJump
        DoubleJump, Dash, Sword OR Hammer
  pickup UpperPools.UpperMidKS:
    moki:
      DoubleJump, Bash, Grenade=1
      Bash, Grenade=2, DoubleJump OR Dash OR Glide
      Grapple, DoubleJump OR Dash OR Glide
      Launch
    gorlek:
      SentryJump=1:
        Damage=20 OR DoubleJump  # Damage boost in the spikes or wjump from the right wall
        WaterDash, Water OR Damage=20
      SentryJump=2
      Grapple:
        Water OR Sword OR Damage=20  # sword combo to reach the platform just before the grappable plant
        Bash, Grenade=1  # bash grenade to reach the platform under UpperRightKS
      DoubleJump, WaterDash, Water OR Damage=20  # wdash to reach the right wall
      Bash, Grenade=1:
        Damage=20, Sword OR Hammer
        WaterDash, Water OR Damage=20  # launch grenade, wdash to reach it
    unsafe:
      Water, WaterDash, Hammer, Damage=20  # wdash+upslash to reach the left wall, wjump in the spikes and upslash to get the key
      Bash, Grenade=1, Water OR DoubleJump OR Dash OR Glide OR Sword OR Damage=20  # bash grenade to reach the platform under UpperRightKS, bash the ennemi in the air then bash it again. Then grab the pickup from the upper platform
  pickup UpperPools.UpperRightKS:
    moki:
      Bash, Grenade=1, Water OR DoubleJump OR Dash OR Glide
      Grapple, DoubleJump OR Dash OR Glide
      Water, WaterDash, DoubleJump
      Launch
    gorlek:
      SentryJump=1
      Bash, Grenade=1, Sword OR Damage=20  # sword/damage boost to reach the platform below he pickup
      WaterDash, Water OR Damage=20
      Grapple:
        Sword
        Hammer, Water OR Damage=20
      DoubleJump, TripleJump OR Sword OR Hammer OR Bash  # Bash the crab enemy
    unsafe:
      Grapple, Water OR Damage=20  # grapple the plant to make it swing. When the plant is swinging at the left, grapple it with a good angle to grab the keystone

  conn UpperPools.BeforeKeystoneDoor:
    moki:
      Grapple, DoubleJump OR Dash OR Glide
      Water, Grapple, Bash, Grenade=1
      Bash, Grenade=2, Water OR DoubleJump OR Dash OR Glide
      Bash, Grenade=3
      Launch
    gorlek:
      SentryJump=2
      Bash, DoubleJump  # bash the crab enemy
      Bash, Grenade=2, Sword OR Damage=20
      DoubleJump, TripleJump:  # wjump from UpperRightKS
        Dash
        Glide, Hammer
      Grapple:
        Damage=20 OR Sword OR Water
        Bash, Grenade=1
      WaterDash, Water OR Damage=20:
        SentryJump=1
        Bash, Grenade=1
  conn UpperPools.BubbleSpamRoom:
    moki: Flap, DoubleJump, Dash, Grapple  # seems to be intended
    gorlek:
      Launch  # Should probably be moki
      SentryJump=3, Damage=20  # sjump in the spikes at UpperMidKS and sjump again
      SentryJump=2, DoubleJump, Damage=20  # Same as above but doublejump out of the spikes instead of using a sjump
      UpperPools.KeystoneRoomBubbleFree, Flap:
        Grapple, DoubleJump OR Dash
        SentryJump=2  # guide the bubble to the anchor then sjump on it
        DoubleJump, TripleJump, Dash OR Glide OR Sword  # guide the bubble to the anchor then tjump on it. wjump from the left wall to reach to right wall
      Grapple, SentryJump=1
      Bash, Grenade=1:
        SentryJump=2  # sjump to reach the grenade
        WaterDash, SentryJump=1, Water OR Damage=20  # wdash to reach the grenade
      Bash, Grenade=2:
        DoubleJump
        Water, WaterDash, Damage=20 OR Glide OR Sword OR Hammer OR Dash
        WaterDash, Damage=20, Glide OR Sword OR Hammer OR Dash
      WaterDash, Water OR Damage=20:
        DoubleJump, TripleJump, Dash OR Glide OR Sword  # wjump from the left wall to reach to right wall
    unsafe:
      UpperPools.KeystoneRoomBubbleFree, Flap, DoubleJump, TripleJump, Hammer  # guide the bubble to the anchor then tjump on it. wjump rom the left wall to reach to right wall. Upslash then tjump and then hammer combo
      WaterDash, DoubleJump, TripleJump, Hammer, Water OR Damage=20
  conn WestPools:
    moki:
      Water, WaterDash, Combat=SpinCrab OR Bash OR Launch
      Water, WaterDash, DoubleJump, Dash
    gorlek: Water, WaterDash

# checkpoint at anchor below, maybe move

anchor UpperPools.BeforeKeystoneDoor at -1483, -4076:  # In front of the door blocking waterdash tree
  refill Health=1:
    moki: DoubleJump OR Dash OR Glide OR Grapple OR Launch
    gorlek: free

  state UpperPools.KeystoneDoor:
    moki: Keystone=4
  # state UpperPools.TrialActivation:
  #   moki: DoubleJump OR Grapple OR Launch

  pickup UpperPools.UpperMidKS:
    moki:
      DoubleJump OR Dash
      Grapple, Glide
    gorlek: free

  conn UpperPools.TreeArea:
    moki: UpperPools.KeystoneDoor
  conn UpperPools.KeystoneRoom:
    gorlek: free
    moki: Water OR DoubleJump OR Dash OR Glide OR Launch  # don't really need anything, but eh
  conn UpperPools.BubbleSpamRoom:
    moki:
      DoubleJump, Bash, Grenade=1
      Launch
    gorlek:
      Grapple, DoubleJump:
        TripleJump OR Glide
        Dash, Sword OR Hammer
      SentryJump=1
      Bash, Grenade=1, Glide OR Sword OR Hammer OR Dash OR Damage=20
      DoubleJump, TripleJump, Dash OR Glide OR Sword OR Damage=20  # wjump from the left wall to reach to right wall / dboost in the spikes and reach the wooden platform
    unsafe:
      DoubleJump, TripleJump, Hammer  # wjump from the left wall to reach to right wall. Upslash then tjump and then hammer combo
      Bash, Grenade=1  # Bash grenade to reach the slime, bash glide from it

anchor UpperPools.TreeArea at -1467, -4075:  # The ledge left of waterdash tree
  refill Checkpoint

  state UpperPools.KeystoneDoor:
    moki: Keystone=4
  state UpperPools.UpperWaterDrained:
    moki:
      Water, WaterDash, Grapple, DoubleJump OR Launch
      Water, WaterDash, Launch, DoubleJump, Dash OR Glide
    gorlek, Water, WaterDash:  # Need waterdash to open the door
      Grapple, Dash OR Glide OR Sword OR Hammer
      Launch  # Break the purple wall
    unsafe:
      Water, WaterDash, DoubleJump, SentryJump=1

  pickup UpperPools.SwimDashTree: free
  pickup UpperPools.CurrentEX:
    moki: Water, WaterDash
  pickup UpperPools.RoofEX:
    moki:
      Water, WaterDash, Flap, DoubleJump OR Dash
      Water, WaterDash, Launch
    gorlek:
      Launch  # use the small bubbles for a launch reset or use the wall above the trees
      Bash, Grenade=2, DoubleJump, Dash, Damage=20  # bash grenade to reach the wall above the tree
      Bash, Grenade=1, DoubleJump:  # Same path as above but use a wdash/tjump to reach the pickup
        WaterDash, Dash, Water, Damage=20
        TripleJump:
          Dash
          Glide, Sword OR Hammer OR Damage=20
      SentryJump=2, DoubleJump, Dash, Damage=20  # same path as above, replace bash grenade by sentry jump
      SentryJump=1, DoubleJump:  # Same path as above but use a wdash/tjump to reach the pickup
        WaterDash, Water, Dash, Damage=20
        TripleJump, Dash OR Glide
      Water, WaterDash, DoubleJump, TripleJump, Glide OR Sword OR Hammer OR Dash OR Damage=20  # free the bubble, jump on it and tjump to the wall above the tree
    unsafe:
      Water, WaterDash, Dash, DoubleJump OR Damage=20  # free the left bubbles, return to the anchor then dash on the bubble to reach the small pool below the pickup
      Flap:
        Bow=1 OR Grenade=1 OR Spear=1:
          DoubleJump OR Dash OR Damage=20:
            SentryJump=1
            Bash, Grenade=1
            DoubleJump, TripleJump
            WaterDash, Water OR Damage=20
        Shuriken=1, Water OR Damage=20:
          DoubleJump OR Dash:
            SentryJump=1
            Bash, Grenade=1
            DoubleJump, TripleJump
            WaterDash, Water OR Damage=20
  pickup UpperPools.WaterfallEC:
    moki:
      Water, WaterDash, DoubleJump, Dash, Grapple
      Water, WaterDash, DoubleJump, Bash, Grenade=1, Grapple
      Water, WaterDash, Launch
    gorlek, Water, WaterDash:  # Need waterdash to open the door
      Grapple, DoubleJump OR SentryJump=1
      Bash, Grenade=1, DoubleJump  # launch grenade below the waterfall
      SentryJump=1, DoubleJump
    unsafe:
      Water, WaterDash, SentryJump=2
  pickup EastPools.PurpleWallHC:
    moki, UpperPools.UpperWaterDrained:
      Water, WaterDash, DoubleJump, Dash, Bash, Grapple
      Water, WaterDash, DoubleJump, Bash, Grenade=1, Grapple
      Water, WaterDash, Bash, Launch
    gorlek, UpperPools.UpperWaterDrained, Water, WaterDash, Bash:
      Grapple:
        DoubleJump OR SentryJump=1 OR Grenade=2
        Dash, Hammer  # upslash + dash to reach the wall then grapple
      DoubleJump, TripleJump, Dash, Damage=20
    unsafe:
      UpperPools.UpperWaterDrained, Water, WaterDash:  # You can manipulate the torpedo enemy in a way that it hit the purple wall without needing any skills
        Launch
        Grapple:
          SentryJump=1 OR DoubleJump
          Glide, Hammer  # Super precise, can grapple for a short time after an upslash
        DoubleJump, TripleJump, Damage=20
  pickup EastPools.AboveTpEX:
    moki, UpperPools.UpperWaterDrained:
      Water, WaterDash, DoubleJump, Dash, Grapple
      Water, WaterDash, DoubleJump, Bash, Grenade=1, Grapple
      Water, WaterDash, Launch
    gorlek, UpperPools.UpperWaterDrained, Water, WaterDash:
      Grapple:
        SentryJump=1 OR DoubleJump
        Bash, Grenade= 1
      DoubleJump, TripleJump, Dash, Damage=20
    unsafe:
      UpperPools.UpperWaterDrained, Water, WaterDash:
        Grapple, Glide, Hammer  # Super precise, can grapple for a short time after an upslash
        DoubleJump, TripleJump, Damage=20

  conn UpperPools.BeforeKeystoneDoor:
    moki: UpperPools.KeystoneDoor
  conn EastPools.TPArea:
    moki, UpperPools.UpperWaterDrained:
      Water, WaterDash, DoubleJump, Dash, Grapple
      Water, WaterDash, DoubleJump, Bash, Grenade=1, Grapple
      Water, WaterDash, Launch
    gorlek, UpperPools.UpperWaterDrained, Water, WaterDash:
      Grapple:
        SentryJump=1 OR DoubleJump
        Bash, Grenade= 1
      DoubleJump, TripleJump, Dash, Damage=20
    unsafe:
      UpperPools.UpperWaterDrained, Water, WaterDash:
        Grapple, Glide, Hammer  # Super precise, can grapple for a short time after an upslash
        DoubleJump, TripleJump, Damage=20

anchor UpperPools.BubbleSpamRoom at -1586, -4053:  # To the right of where all the bubbles rise
  refill Checkpoint

  pickup UpperPools.FishPoolEX:
    moki: Water, Bash OR WaterDash OR Damage=10  # just in case someone's troubled by the fish
    gorlek: Water OR Damage=20  # Only need one tick of damage to take the pickup
  pickup UpperPools.FishPoolOre:
    moki:
      DoubleJump, Bash, Dash OR Glide
      Bash, Grenade=1
      Launch
    gorlek:
      SentryJump=1
      DoubleJump, Bash, TripleJump OR Sword
      Bash, Dash, Glide, Sword OR Hammer
    unsafe:
      Bash  # Juggle the exploding enemyq
  pickup UpperPools.LeftBubblesEX:  # Beautiful autosave placement right there
    moki: Water
  pickup UpperPools.RightBubblesEX:
    moki:
      Water, Bash, DoubleJump OR Launch
      Water, WaterDash
    gorlek:  # The torpedo won't hit you if you are touching the breakable wall
      Water, Bash, Grenade=1
      Water, Launch
      Water, SentryJump=1, Damage=20 OR DoubleJump OR Dash  # Dash/doulejump to cancel the sjump before the apex
      Water, DoubleJump:
        TripleJump
        Dash, Hammer OR Damage=20
    unsafe:
      Water, Grenade=1
      Water, SentryJump=1  # sword combo before hitting the spikes
  pickup UpperPools.BubblesEC:
    moki:
      DoubleJump, Dash OR Glide
      Launch, DoubleJump OR Dash OR Glide
    gorlek:
      Dash OR Launch OR SentryJump=1
      Glide, Sword OR Hammer
      DoubleJump, TripleJump OR Sword OR Hammer OR Damage=20
      Bash:  # Bash the mosquitos
        Glide OR Sword OR Hammer
        Grenade=1, Damage=20  # bash a grenade to get out of the right side
  pickup UpperPools.UpperMidKS:
    moki: DoubleJump OR Dash OR Glide
    gorlek: free

  conn UpperPools.KeystoneRoom:
    moki: Water OR DoubleJump OR Dash OR Glide OR Launch
    gorlek: free
  conn UpperPools.BeforeKeystoneDoor: free

# checkpoint at -1386, -4062

region WestPools:
  moki: Danger=40, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor WestPools at -1656, -4171:  # the west Pools TP
  refill Full

  quest EastPools.GrassSeed:
    moki: Water, WaterDash

  pickup WestPools.TpEX:
    moki:
      Water, WaterDash, DoubleJump, Dash  # hard on keyboard, but I guess this is intended, and no other ability would even help
      Launch
    gorlek:
      SentryJump=1
      WaterDash, DoubleJump, TripleJump OR Sword OR Hammer:
        Water OR Damage=20  # dboost to waterdash
      Bash, Grenade=1  # Stand on the left of the TP, launch the grenade with a curve so it won't touch the ceiling and bash it when it falls down
    unsafe:
      WaterDash, Dash, Hammer, Water OR Damage=20  # Already hard with analog swimming but it's a nightmare on keyboard
      DoubleJump, TripleJump OR Dash OR Sword OR Hammer  # wall jump from the right wall. With weapons, climb the right wall then djump+ upslash. TripleJump might be Gorlek
  pickup WestPools.BurrowEX:
    moki: Water, Burrow
  pickup WestPools.BurrowOre:
    moki: WestPools.ForestsStrength, Water, WaterDash, Burrow
    gorlek: WestPools.ForestsStrength, Water, WaterDash, Burrow
  pickup WestPools.EscapeRevisitEX:
    moki:
      WestPools.ForestsStrength, Water, DoubleJump, Bash
      WestPools.ForestsStrength, Water, WaterDash, Combat=Crab+SpinCrab OR Bash
      WestPools.ForestsStrength, Water, Launch
    gorlek: WestPools.ForestsStrength, Water, Weapon OR DoubleJump OR Bash OR WaterDash OR Damage=10  # all of it beside water is to avoid the crab thingy who are a real pain to deal with
  pickup UpperPools.LowerKS:
    moki: WestPools.ForestsStrength, Water, WaterDash, Combat=Crab+SpinCrab OR Bash
    gorlek: WestPools.ForestsStrength, Water, WaterDash

  conn Teleporters: free
  conn KwolokFight:
    moki: Water, DoubleJump OR Dash OR Launch
    gorlek: Water
  conn UpperPools.KeystoneRoom:
    moki:
      Water, WaterDash, Bash, DoubleJump, Dash OR Glide
      Water, WaterDash, Bash, Launch
      WestPools.ForestsStrength, Water, WaterDash, DoubleJump, Combat=Crab+SpinCrab OR Bash
      WestPools.ForestsStrength, Water, WaterDash, Bash, Grenade=1, Dash
    gorlek, Water, WaterDash:
      Launch  # activate the bubbles with waterdash. Launch on a bubble to reach the top
      Bash, DoubleJump, Sword OR Hammer  # Double jump + upslash above the bubble. Up slash explode the bubbles so hammer might be too hard to time for gorlek
      SentryJump=1  # sjump from EastPools.GrassSeed
      DoubleJump, TripleJump, Dash OR Sword  # Climb the right wall, jump on a bubble (activated by water dash)
      Bash, Grenade=1, DoubleJump OR Glide  # Launch your grenade from EastPools.GrassSeed. Launch it a bit after the bubble exit the water. Your can wait a second bubble on the right wall if needed
      WestPools.ForestsStrength:
        Sword OR Hammer OR Dash OR Glide OR Flap OR Bash  # waterdash then up slash / jump on the jump pad and climb the left wall / flap the bubble, waterdash on the bubble / Bait the torpedo, waterdash when it's close to exiting the water then bash it to reach the checkpoint
        # Bash, Grenade=1  # launch the grenade jump on the jump pad to reach the grenade
    unsafe:
      Water, WaterDash:
        Bash, DoubleJump  # Bash the projectile near the bubbles, doublejump then jump on the bubble. Hard to time and need the ennemy patern to be in sync with the bubble cycle
        Bash, Grenade=1, Dash  # bash grenade from EastPools.GrassSeed
        DoubleJump, TripleJump, Glide  # jump on a bubble, triple jump and hold glide while waiting for the next bubble which will send you a bit further than the previous one.

anchor KwolokFight:
  refill Full
  quest WestPools.ForestsStrength:
    moki: Boss=250, Regenerate, Damage=95, Water, WaterDash, Bash, DoubleJump, Dash OR Launch
    gorlek: Combat, Water, WaterDash
    unsafe: Boss=250, Water, WaterDash, Bash, DoubleJump, Dash OR Launch

region LowerWastes:
  moki: Danger=50, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor LowerWastes.WestTP at 1456, -3997:  # At the Western Wastes TP
  refill Full

  pickup LowerWastes.WestTPOre:
    moki: Burrow
  pickup WoodsMain.FeedingGroundsEX:
    moki: Burrow, DoubleJump OR Dash OR Glide OR Launch
    gorlek: Burrow

  conn Teleporters: free
  conn LowerWastes.SunsetView:
    moki:
      DoubleJump, Grapple
      Bash, Grenade=1, DoubleJump OR Dash
      DoubleJump, Burrow
      Launch
    gorlek:
      Bash, Grenade=1, Damage=30
      DoubleJump, TripleJump OR Hammer
      Grapple, Dash  # done by jumping off the muncher
      Grapple, Sword, Damage=30
      SentryJump=1, Damage=30 OR DoubleJump OR Dash
      Burrow, Dash, Sword OR Hammer
      Burrow, Damage=30, Sword OR Hammer
    unsafe:
      DoubleJump  # precise....? This is another rough path. Can turn it to triple jump to make it freeTM, or can add weapons
      Burrow, Damage=30  # This is a pretty rough path. Might be too tricky. Sticky makes it a bit easier though?
      Grapple, Glide, Sword OR Hammer  # kicked out of gorlek for combining too many abilities
  conn WoodsMain.FeedingGrounds:
    moki: WindtornRuins.Seir, Burrow  # Seir to make it a safe path
    gorlek: Burrow
  conn WeepingRidge.Bottom:
    moki, WindtornRuins.Seir:  # Seir to make it a safe path
      Burrow, DoubleJump, Glide, Grapple
      Burrow, DoubleJump, Bash, Grenade=1, Grapple
      Burrow, Launch
    gorlek, WindtornRuins.Seir:  # these are paths that rely on the wind, which you don't have if you remove the killplane
      Burrow, Grapple, Glide
      Burrow, DoubleJump, TripleJump, Glide
      Burrow, Bash, Grenade=1, Dash, Glide
    gorlek, glitch OR WindtornRuins.Seir:  # these paths work no matter whether you actually have Seir or just removed the killplane
      Burrow, SentryJump=1, Grapple
      Burrow, SentryJump=1, DoubleJump, TripleJump
      Burrow, Bash, Grenade=1, Grapple
      Burrow, Bash, Grenade=1, DoubleJump, TripleJump
      Burrow, Bash, Grenade=2, Dash
    unsafe, WindtornRuins.Seir:
      Burrow, DoubleJump, TripleJump  # deemed too precise
      Burrow, SentryJump=1, DoubleJump, Dash, Hammer  # Pretty tight
      Burrow, SentryJump=2, DoubleJump, TripleJump OR Dash OR Glide  # moving SentryJump
      Burrow, SentryJump=2, Dash OR Glide  # moving SentryJump
      Burrow, Glide, DoubleJump, Dash, Hammer  # Pretty tight

# checkpoint at 1509, -3987

anchor LowerWastes.SunsetView at 1552, -3984:  # At the Sunset View checkpoint
  refill Checkpoint

  pickup LowerWastes.SunsetViewEX: free
  pickup LowerWastes.PurpleWallEX:
    moki: Burrow, Bash
    unsafe: Burrow  # didn't want to be mean

  conn LowerWastes.WestTP:
    moki: DoubleJump OR Dash OR Glide OR Launch
    gorlek: Damage=30 OR Sword OR Hammer  # Multiple side slashes, not difficult
    unsafe:
      Bash, Grenade=1  # deemed too obscure
      Sentry=1 OR Flash=1 OR Shuriken=1
      Blaze=1  # This is a little tight
      Spear=1  # Not sure if this is Gorlek, have to aim right and then after throwing move left. Not obvious at all
  conn LowerWastes.Shovel:
    moki:  # I think this is fine without Combat?
      Grapple, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1  # Does require double jump to the grenade, and then double jump after bash to clear grapple section
      Launch  # Pretty free. Only difficulty is wall jumping pre-Launch to go over the grapples.
    gorlek:
      Grapple  # Hope that the camera likes you
      Bash, DoubleJump, TripleJump, Damage=30, Dash OR Glide  # added a lot of abilities to make it safer for gorlek
      Bash, Grenade=1  # can either bash off the gorlek, then the grenade - or climb the wall to get additional height out of the bashgrenade
      SentryJump=1, Damage=30 OR DoubleJump OR Dash

anchor LowerWastes.Shovel at 1634, -3981:  # On the ground to the left of the Sand Bridge
  refill Energy=3:
    moki, Weapon:
      DoubleJump OR Launch
      Bash, Grenade=1

  quest LowerWastes.EerieGemQI:
    moki: Burrow

  pickup LowerWastes.SandBridgeOre: free

  conn LowerWastes.SunsetView:
    moki: Combat=MaceMiner OR Bash OR Launch
    gorlek: free
  conn LowerWastes.TreeArea:
    moki: Burrow
  conn LowerWastes.MuncherTunnel: free

anchor LowerWastes.MuncherTunnel at 1681, -4002:  # Above the sand/muncher tunnel
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  pickup LowerWastes.MuncherTunnelEC:
    moki: Burrow

  conn LowerWastes.Shovel:
    moki:
      DoubleJump OR Launch
      Bash, Grenade=1
    gorlek:
      Damage=30 OR Dash OR SentryJump=1
      Bash, Glide OR Sword OR Hammer  # lure the mantis
  conn LowerWastes.SandPot:
    moki:
      Combat=Mantis+ShieldSlug
      Combat=Mantis, DoubleJump OR Burrow OR Hammer
      Bash, DoubleJump OR Burrow OR Grenade=1
      Launch
    gorlek: DoubleJump OR Dash OR Burrow OR Sword  # slash the enemy off the wall

anchor LowerWastes.SandPot at 1726, -3990:  # To the left of the sand pot
  refill Checkpoint

  pickup LowerWastes.SandPotHC:
    moki:
      Burrow  # should be fine for moki? It mostly works holding left with somewhat proper timing
      Launch
    gorlek:
      SentryJump=1
      DoubleJump, TripleJump OR Sword OR Hammer  # just something to help
    unsafe: DoubleJump
  pickup LowerWastes.SandPotEX:
    moki:
      Burrow, Dash, Grapple, DoubleJump OR Glide
      Burrow, Bash, Grenade=1
      Burrow, Launch
    gorlek:
      Burrow, DoubleJump OR Dash
      Burrow, Grapple, Glide
      Burrow, SentryJump=1

  conn LowerWastes.MuncherTunnel:
    moki: Combat=Mantis OR Bash OR Launch
    gorlek: free
  conn LowerWastes.WoodenBridge:
    moki:
      Dash, DoubleJump OR Grapple
      Dash, Bash, Grenade=1
      Bash, Grenade=2, DoubleJump OR Glide
      Bash, Grenade=1, Grapple, DoubleJump OR Glide
      Bash, Grenade=1, DoubleJump, Glide
      Launch
    gorlek:
      DoubleJump, TripleJump OR Grapple OR Glide OR Damage=30
      Grapple, Glide OR Damage=30
      SentryJump=1, Dash OR Glide
      SentryJump=1, DoubleJump, Damage=30
      Bash, Grenade=1  # Damageless with a bashglide.

anchor LowerWastes.WoodenBridge at 1796, -3977:  # Directly above MuncherPitEX
  refill Checkpoint

  pickup LowerWastes.SandPotEX:
    moki:
      Burrow, Grapple, DoubleJump OR Glide
      Burrow, Grapple, Bash, Grenade=1
      Burrow, Bash, Grenade=1, DoubleJump, Dash OR Glide
      Burrow, Launch
    # gorlek can already connect between the sides of the sand pot for free, no further paths needed
  pickup LowerWastes.MuncherPitEX:
    moki:
      DoubleJump OR Launch  # Slightly precise to land on the sand sphere.
      Burrow, Glide
    gorlek: Burrow OR Hammer
    unsafe: Sentry=1 OR Spear=1  # Pretty sure that other spells _should_ work here, but they're unsafe paths so cbf checking now lol
  pickup LowerWastes.BottomRightHC:  # free to get to from here
    gorlek: ShurikenBreak=20, Combat=MaceMiner OR DoubleJump OR Bash OR Launch  # dance with the gorlek

  conn LowerWastes.SandPot:
    moki:
      Dash, DoubleJump OR Grapple
      Bash, Grenade=1, Grapple
      Bash, Grenade=1, DoubleJump, Glide
      Launch
    gorlek:
      Grapple
      DoubleJump, TripleJump OR Glide
      Damage=30, DoubleJump OR Dash OR Glide  # extra abilities just for convenience
    unsafe:
      Bash, Grenade=1, Damage=30  # too fun for gorlek
      SentryJump=1, Damage=30  # Maybe too dumb. Gotta do a sentry jump in the spikes, and even then it can be close
  conn LowerWastes.LeverArea:
    moki: DoubleJump OR Burrow OR Launch
    gorlek:
      Dash OR SentryJump=1
      Bash, Grenade=1  # either find a place where you can throw a grenade or do the bash-only path
    unsafe:
      Bash  # Sorta janky but seems to work most of the time. Doesn't _look_ like it should work though
      Shuriken=1  # Just as janky as Bash
      Sentry=1
  conn LowerWastes.MinesEntrance:  # guess this wasn't that bad after all
    gorlek:
      ShurikenBreak=20, Combat=MaceMiner, Dash OR Glide OR Grapple OR Damage=30
      ShurikenBreak=20, Bash, Dash OR Glide OR Grapple OR Grenade=1 OR Damage=30
      ShurikenBreak=20, DoubleJump OR Launch

anchor LowerWastes.MinesEntrance at 1921, -4001:  # To the left of the lower breakable wall
  pickup LowerWastes.BottomRightEX:
    moki:
      Combat=MaceMiner+Mantis, Grapple
      Bash, Grenade=1, DoubleJump OR Dash  # Very much not a mandatory grenade... This is only important if the Ruins Wall is broken, and then only if you don't use the enemies
      Launch
    gorlek:
      DoubleJump, TripleJump, Hammer
      SentryJump=1, Sword OR Hammer  # can either jump good or use the right wall and weapon float
      Bash, Grenade=1 OR DoubleJump OR Glide
    unsafe:
      Bash  # Requires you not to kill anything and hopefully not have ultra bash or whatever equipped
      DoubleJump, TripleJump, Sentry=1 OR Flash=1
  pickup LowerWastes.BottomRightHC:
    moki:
      Combat=MaceMiner+Mantis, Grapple  # Use both Grapple points
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch
    gorlek:
      Damage=30, Combat=MaceMiner+Mantis OR Bash
      DoubleJump, TripleJump OR Dash OR Glide
      Bash, DoubleJump OR Dash OR Glide

  conn LowerWastes.WoodenBridge:
    moki, BreakWall=20:
      Combat=MaceMiner+Mantis, DoubleJump, Grapple
      Bash, DoubleJump, Grapple
      Launch, DoubleJump OR Dash OR Grapple
    # in gorlek, all paths would be redundant with just going up to lever area, which doesn't require breaking the wall
  conn LowerWastes.LeverArea:  # paths function for both cases of having destroyed or kept the wall
    gorlek:
      SentryJump=1, DoubleJump, TripleJump, Dash OR Glide
      Bash, DoubleJump, TripleJump  # Utilise the enemies to bashglide across. I don't think its softlockable because there's no autosave here.
      Grapple, Dash, Combat=MaceMiner+Mantis OR Bash  # Pretty straightforward. Rest of these paths you're able to avoid enemies so Combat isnt included.
      Launch
  conn WindtornRuins.LowerRuins:
    gorlek: ShurikenBreak=20, Burrow

anchor LowerWastes.LeverArea at 1833, -3959:  # At the arrow sign below the lever
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  state LowerWastes.SandPlatformLever:
    moki:
      DoubleJump OR Burrow OR Launch  # Requires a vertical burrow through a vertical sand platform
      Bash, Grenade=2
      Bash, Grenade=1, Dash
    gorlek:
      Dash
      SentryJump=2
      SentryJump=1, Glide
      Bash, Grenade=1, Glide

  pickup LowerWastes.BottomRightHC: free
  pickup LowerWastes.LastStandShard:
    moki:  # for the puzzle, it is considered solvable in moki with one of doublejump, dash or burrow.
      Bash, Grenade=1, DoubleJump
      Launch, DoubleJump OR Dash OR Burrow
      LowerWastes.SandPlatformLever, DoubleJump, Dash OR Glide OR Burrow  # If the double jump is too tight this makes it free
    gorlek:  # some amount of puzzle knowledge is assumed
      SentryJump=1, DoubleJump
      Launch
      LowerWastes.SandPlatformLever:
        DoubleJump
        Burrow, Dash OR Glide OR Sword
        Bash, Grenade=1, Dash OR Glide OR Burrow OR Hammer  # maybe nontrivial lure. The platform helps a little, and it also enables an alternate solution jumping on top of the sand. Assisting abilities mostly for the puzzle
        SentryJump=1, Dash OR Glide
    unsafe:
      SentryJump=1  # might have been gorlek
      LowerWastes.SandPlatformLever, Dash OR Burrow  # burrow through the sand below to get a boost
  pickup LowerWastes.LastStandEX:
    moki:
      Burrow, DoubleJump, Bash, Grenade=1
      Burrow, Launch
      LowerWastes.SandPlatformLever, Burrow, DoubleJump  # Requires a vertical burrow through a vertical sand platform
    gorlek:
      Burrow, SentryJump=1, DoubleJump
      LowerWastes.SandPlatformLever, Burrow, Dash OR Glide OR Sword
      LowerWastes.SandPlatformLever, Burrow, Bash, Grenade=1  # maybe nontrivial lure. The platform helps a little, and it also enables an alternate solution jumping on top of the sand.
  pickup LowerWastes.MuncherClimbEX:
    moki:
      DoubleJump, Grapple, Bash, Grenade=1
      Grapple, Launch
      LowerWastes.SandPlatformLever, DoubleJump, Grapple, Dash OR Glide OR Burrow  # If the double jump is too tight this makes it free
    gorlek:
      Bash, Grenade=1, Grapple, DoubleJump OR Dash
      SentryJump=1, Grapple, DoubleJump OR Dash
      Launch
      LowerWastes.SandPlatformLever, DoubleJump, Grapple
      LowerWastes.SandPlatformLever, Burrow, Grapple, Dash OR Glide

  conn LowerWastes.WoodenBridge: free
  conn LowerWastes.TreeArea:
    moki:
      DoubleJump, Grapple, Bash, Grenade=1
      Grapple, Launch
      LowerWastes.SandPlatformLever, DoubleJump, Grapple, Dash OR Glide OR Burrow  # If the double jump is too tight this makes it free
      LowerWastes.SandPlatformLever, Grapple, Dash, Glide, Burrow  # This path is fun. Glide is just to make it moki-safe
    gorlek:
      Bash, Grenade=1, Grapple, DoubleJump OR Dash OR Glide OR Sword
      SentryJump=1, Grapple, DoubleJump OR Dash OR Glide OR Sword
      LowerWastes.SandPlatformLever, DoubleJump, Grapple
      LowerWastes.SandPlatformLever, Burrow, Grapple, Dash OR Glide OR Sword
  conn LowerWastes.MinesEntrance:
    moki:
      Combat=MaceMiner+Mantis, DoubleJump OR Dash OR Glide OR Grapple
      Bash, DoubleJump OR Dash OR Glide OR Grapple
      Launch
    gorlek:
      Combat=MaceMiner+Mantis, Dash OR Glide OR Grapple OR Damage=30
      Bash, Dash OR Glide OR Grapple OR Damage=30
      DoubleJump OR Launch
      Bash, Grenade=1
  conn LowerWastes.EastTP:
    moki: Burrow

# checkpoint at 1791, -3953

anchor LowerWastes.TreeArea at 1715, -3936:  # The ledge right of SkeetoHive
  refill Checkpoint

  # state LowerWastes.TrialActivation:
  #   moki:
  #     Burrow, DoubleJump OR Dash OR Glide
  #     Burrow, Bash, Grenade=1
  #     DoubleJump, Bash, Grenade=2
  #     Dash, Bash, Grenade=4  # yes, good
  #     Launch

  quest LowerWastes.HandToHandMapstone:
    moki, GladesTown.HandToHandCanteen:
      DoubleJump OR Burrow OR Launch
      Bash, Grenade=2  # literally never going to get used but you can do it
    gorlek, GladesTown.HandToHandCanteen:
      SentryJump=2
      SentryJump=1, Bash OR Grapple
      Bash, Grapple
    unsafe, GladesTown.HandToHandCanteen:
      DoubleJump, Sword  # origlow

  pickup LowerWastes.SkeetoHiveEX:
    moki: Burrow, DoubleJump OR Dash OR Glide OR Launch
    gorlek: Burrow
  pickup LowerWastes.LupoMap:
    moki:
      Burrow OR Launch
      Bash, Grenade=4  # literally never going to get used but you can do it
    gorlek:
      Bash, Grenade=3
      Bash, Grenade=2, Grapple
      SentryJump=4
      SentryJump=3, Bash OR Grapple
      SentryJump=2, Bash, Grapple
      DoubleJump, TripleJump, Hammer
    unsafe: DoubleJump, TripleJump, Sword  # requires advanced knowlegde
  pickup LowerWastes.BurrowTree:
    moki:
      DoubleJump OR Burrow OR Launch
      Bash, Grenade=2  # literally never going to get used but you can do it
    gorlek:
      Bash, Grenade=1
      SentryJump=2
      SentryJump=1, Bash OR Grapple
      Bash, Grapple
  pickup LowerWastes.BurrowTreeEX:
    moki: Burrow

  conn LowerWastes.Shovel:
    moki: Burrow
  conn LowerWastes.UpperPath:
    moki:
      Burrow, DoubleJump OR Launch
      Burrow, Bash, Grenade=1  # literally never going to get used but you can do it
    gorlek:
      Burrow, Dash OR Bash OR Grapple
      Burrow, SentryJump=1
    unsafe: Burrow, Glide  # bit precise
  conn LowerWastes.LeverArea:
    moki:
      Grapple, Launch
      Grapple, DoubleJump, Dash  # still sort of tight
    gorlek:
      Grapple, DoubleJump OR Dash
      Launch, DoubleJump OR Dash OR Glide OR Sword OR Damage=30

# checkpoint at 1681, -3923

anchor LowerWastes.UpperPath at 1761, -3898:  # on the left side of the path connecting tree and east teleporter
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  pickup LowerWastes.UpperPathEC:
    moki: Burrow
  pickup LowerWastes.UpperPathEX:
    moki: Burrow, DoubleJump OR Dash OR Glide OR Launch
    gorlek: Burrow
  pickup LowerWastes.UpperPathHiddenEX:
    moki: Burrow, DoubleJump OR Dash OR Glide OR Launch
    unsafe: Burrow  # precise maneuver

  conn LowerWastes.TreeArea:
    moki: Burrow
  conn LowerWastes.EastTP:
    moki: Burrow

# checkpoint at no actually just bad refill situation below. Could be solved easily.

anchor LowerWastes.EastTP at 1992, -3902:  # Location of the east teleporter
  refill Full

  pickup LowerWastes.EastTPOre:
    moki, BreakWall=20:
      Burrow OR Launch
      DoubleJump, Bash, Grenade=1
      Bash, Grenade=3  # it had to be done
    gorlek, BreakWall=20:
      DoubleJump OR SentryJump=1
      Bash, Grenade=1, Sword OR Hammer
  pickup LowerWastes.UpperPathHC:
    moki: Burrow

  conn Teleporters: free
  conn LowerWastes.LeverArea:
    moki: Burrow
  conn LowerWastes.UpperPath:
    moki: Burrow, DoubleJump OR Dash OR Launch
    gorlek: Burrow  # Sorta tight.
  conn UpperWastes.KeystoneRoom:
    moki: Burrow, DoubleJump OR Dash OR Launch
    gorlek: Burrow  # Again pretty tight. More lenient with Damage=30

region UpperWastes:
  moki: Danger=50, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor UpperWastes.KeystoneRoom at 1900, -3831:  # Autosave underneath keystone door
  refill Checkpoint

  state UpperWastes.KeystoneDoor:
    moki, Keystone=2:
      Burrow, DoubleJump OR Dash OR Glide
      Launch

  pickup UpperWastes.LowerKS:
    moki:
      Burrow, DoubleJump OR Dash OR Glide
      Launch, DoubleJump OR Dash OR Glide
  pickup UpperWastes.UpperKS:
    moki: Burrow, DoubleJump OR Dash OR Glide OR Launch
  pickup UpperWastes.TurmoilShard:
    moki:  # this area seems a bit hard, not sure what intended is like.
      Bash, Burrow, DoubleJump, Dash  # intended way?
      Bash, Burrow, Launch
  pickup UpperWastes.KSDoorEX:
    moki:
      Burrow, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1
      Launch

  conn LowerWastes.EastTP:
    moki: Burrow, DoubleJump OR Dash OR Glide OR Launch
  conn UpperWastes.MissilePuzzleLeft:
    moki: UpperWastes.KeystoneDoor, Burrow, DoubleJump OR Dash OR Glide OR Launch

anchor UpperWastes.MissilePuzzleLeft at 1937, -3794:  # Immediately to the right of the sand after the keystone door
  refill Checkpoint

  # don't really need a state for purple wall, it can be broken from either side
  state UpperWastes.MissilePuzzleLever:  # for now, this state also means that both purple walls blocking the lever have been broken. If ways to pull the lever without breaking them are found, paths using this may have to change
    moki: Bash, Burrow

  pickup UpperWastes.LedgeEC:
    moki:
      Bash, Burrow, DoubleJump OR Dash
      Launch
  pickup UpperWastes.MissileSpawnEX:
    moki: Burrow
  pickup UpperWastes.PurpleWallEX:
    moki: Combat=MaceMiner, Burrow
  pickup UpperWastes.KSDoorEX:
    moki: Burrow
  pickup UpperWastes.PurpleWallHC:
    moki: Burrow, UpperWastes.MissilePuzzleLever

  conn UpperWastes.KeystoneRoom:
    moki: UpperWastes.KeystoneDoor, Burrow
  conn UpperWastes.MissilePuzzleRight:
    moki: UpperWastes.MissilePuzzleLever, Burrow

# checkpoint at 2016, -3790

anchor UpperWastes.MissilePuzzleRight at 2058, -3813:  # On top of sand to the right of lever gate, underneath a laser.
  pickup UpperWastes.PurpleWallHC:
    moki: Burrow
  pickup UpperWastes.RoofEX:
    moki:
      Burrow, DoubleJump, Bash, Grenade=1, Glide  # glide for the lasers
      Burrow, DoubleJump, Dash  # you can retry the burrow with DoubleJump, so I think this is fine
      Burrow, Launch

  conn UpperWastes.MissilePuzzleLeft:
    moki: UpperWastes.MissilePuzzleLever, Burrow
  conn UpperWastes.RuinsApproach:  # this covers all connections to the pickups in the spinning lasers.
    moki:
      Burrow, Bash, DoubleJump, Dash OR Glide  # dash or glide to make the lasers better
      Burrow, DoubleJump, Dash  # you can retry the burrow with DoubleJump, so I think this is fine
      Burrow, Launch

# checkpoint at 2037, -3751

anchor UpperWastes.NorthTP at 2044, -3679:  # North Wastes teleporter
  refill Full

  conn Teleporters: free
  conn UpperWastes.RuinsApproach: free

# checkpoint at anchor below if you have burrow

anchor UpperWastes.RuinsApproach at 2002, -3684:  # Left of the teleporter, on top of the sand
  refill Full:  # use the teleporter
    moki:
      DoubleJump, Bash
      Burrow OR Launch

  quest UpperWastes.FlowersSeed:
    moki:
      Burrow, Bash, Glide, DoubleJump OR Dash  # Dash variant slightly precise if you do it without the enemies... but you can also do it using the enemies
      Burrow, Launch  # maybe Glide? I think this is fine tho
      Bash, Launch

  pickup UpperWastes.SpinLasersRightEX:
    moki: Burrow
  pickup UpperWastes.SpinLasersMiddleEX:
    moki: Burrow
  pickup UpperWastes.SpinLasersLowerEX:
    moki: Burrow
  pickup UpperWastes.RoofEX:
    moki:
      Burrow, DoubleJump, Bash, Grenade=1
      Burrow, DoubleJump, Dash OR Glide
      Burrow, Launch
  pickup UpperWastes.WallOre:
    moki:
      Burrow, Bash, DoubleJump, Dash OR Glide
      Burrow, Bash, Dash, Glide  # Slightly tight getting across to the sand pit but pretty easily doable. Semi precise angle on the burrow but with glide its easy to reattempt
      Bash, Launch, DoubleJump OR Dash OR Glide OR Burrow
      Burrow, Launch, DoubleJump OR Glide

  conn UpperWastes.MissilePuzzleRight:
    moki: Burrow, DoubleJump OR Launch
  conn WindtornRuins.UpperRuinsDoor:
    moki, UpperDepths.ForestsEyes, WestPools.ForestsStrength, LowerReach.ForestsMemory:
      Bash, Launch
      Burrow, Launch, DoubleJump OR Glide  # djump or glide lets you reattempt
      Burrow, Bash, DoubleJump, Dash OR Glide
      Burrow, Bash, Dash, Glide  # Slightly tight getting across to the sand pit but pretty easily doable. Semi precise angle on the burrow but with glide its easy to reattempt
  conn UpperWastes.NorthTP:
    moki:
      DoubleJump, Bash
      Burrow OR Launch

anchor WindtornRuins.UpperRuinsDoor at 2163, -3835:  # Just inside the door.
  refill Checkpoint
  refill Energy=3:
    moki: Weapon

  state WindtornRuins.RuinsLever:
    moki: Burrow, BreakWall=16  # just being safe here
    unsafe: Burrow, Sentry=2 OR Grenade=1 OR Blaze=1
  state WindtornRuins.HeartBarrier:  # These are paths to go to the teleporter and break the corruption heart. But they can't originate from the teleporter anchor because after you broke the heart, you can't go to the teleporter again, which makes these paths not viable as connections to the teleporter. These paths are just about breaking the heart, so it doesn't matter if the paths can lock you out of the teleporter if you already have broken the heart, because then you have already broken the heart.
    moki, WindtornRuins.RuinsLever, BreakWall=16:
      Burrow, DoubleJump OR Dash OR Glide OR Launch
      Burrow, Bash, Grenade=1
    gorlek:
      # I'm making the following bold assumptions
      # 1. You're playing gorlek, so you know things.
      # 2. You're playing gorlek, so you can climb walls (REGARDLESS of FPS)
      # 3. You're playing gorlek, so you can hold right and burrow into the TP area
      WindtornRuins.RuinsLever, Burrow, BreakWall=20

  pickup UpperWastes.FlowersSeed: free
  pickup UpperWastes.WallOre:
    moki:
      Bash, Grenade=1, Glide
      Launch, DoubleJump OR Glide
    gorlek:
      Dash, Damage=30
      Dash, DoubleJump, Glide
      SentryJump=1, Glide
      DoubleJump, TripleJump, Burrow  # MIGHT be doable with no triple, but its there for safety
      Launch
      # Probably a bunch of other paths but I cant think of any

  conn UpperWastes.RuinsApproach: free
  # higher difficulties can put connections to northtp here
  conn WindtornRuins.RuinsTP:  # connection FROM entrance TO tp at ANY TIME
    # this accounts for both situations of having broken the heart or not
    moki, WindtornRuins.RuinsLever:
      Burrow, Dash, DoubleJump
      Burrow, DoubleJump, Glide
      Burrow, Bash, Grenade=1, Glide
      Burrow, Launch
    gorlek, WindtornRuins.RuinsLever:
      Burrow, SentryJump=1  # Use sword to go across spikes, then SJ
      #/1urrow, DoubleJump, TripleJump, Sword OR Hammer OR Sentry=1 OR Shuriken=1 OR Flash=1 OR Spike=1
      Burrow, DoubleJump, TripleJump OR Dash OR Hammer  # Use the wall on the right and then burrow through sand platform. Might be a bit obscure. Like really obscure. Use above if too obscure
      Burrow, Bash, Grenade=1  # Burrow through the sand platform to get up
  conn UpperWastes.NorthTP:
    gorlek:
      # There's an autosave at the top above the seed, so failure isn't super punishing for this connection.
      # not_recoverable are paths from the seed to the TP, that if you fall down to the same level as the gorlek, you can't get up
      # recoverable_from_fall paths are ones that you can make to the TP.
      # I guess what paths you want to include is up to the validator, either just recoverable or both recoverable and not_recoverable
      # recoverable_from_fall:
        DoubleJump, TripleJump OR Dash
        Bash OR Burrow  # Almost certainly some danger associated here, but I'm not sure how to assign that
        Launch
        SentryJump=1  # I guess lol
      # not_recoverable:
        Dash OR Glide
        DoubleJump, TripleJump OR Sword OR Hammer OR Sentry=1 OR Flash=1 OR Blaze=1 OR Shuriken=1
  conn WindtornRuins.Escape:  # connection FROM entrance TO escape to support future paths of breaking the heart without reaching the teleporter
    moki: WindtornRuins.RuinsLever, WindtornRuins.HeartBarrier, Burrow
  conn WindtornRuins.LowerRuins:  # connection FROM entrance TO lower AFTER escape
    # if you completed the escape, there's a gap in the floor that you have to cross, but Burrow alone is enough to do so
    # Since Burrow solves this connection, it accounts for all paths to the escape revisit pickup
    moki: WindtornRuins.RuinsLever, WindtornRuins.HeartBarrier, WindtornRuins.Seir, Burrow

anchor WindtornRuins.RuinsTP at 2130, -3984:  # Windtorn Ruins teleporter.
  refill Full

  state WindtornRuins.HeartBarrier:  # Barrier next to the teleporter that stops you from getting the Heart.
    moki: BreakWall=16

  conn Teleporters: free
  conn WindtornRuins.Escape:  # connection FROM tp TO escape
    # the gap after completing the escape locks you out of these paths, but it doesn't matter because they're only relevant for completing the uncompleted escape
    moki: WindtornRuins.HeartBarrier
  conn WindtornRuins.LowerRuins:  # connection FROM tp TO lower ruins AFTER escape
    # if you completed the escape, there's a gap in the floor that you have to cross
    # Since Burrow solves this connection, it accounts for all paths to the escape revisit pickup
    moki, WindtornRuins.HeartBarrier, WindtornRuins.Seir:
      DoubleJump OR Dash OR Glide OR Burrow OR Launch
      Bash, Grenade=1  # yes, this needs a bashgrenade path
    gorlek, WindtornRuins.HeartBarrier, WindtornRuins.Seir:
      SentryJump=1  # because why not
  conn WindtornRuins.UpperRuinsDoor:
    moki, WindtornRuins.RuinsLever:
      # these account for both situations of having broken the heart or not
      Burrow, Bash, Grenade=1, DoubleJump OR Dash
      Burrow, Glide, DoubleJump OR Dash
      Burrow, Launch
      # these make you able to break the Heart and then use the resulting terrain
      BreakWall=16, Burrow, Bash, Grenade=1
      BreakWall=16, Glide
    gorlek, WindtornRuins.RuinsLever:
      Burrow, SentryJump=1
      Burrow, Dash, Glide OR Hammer
      Burrow, Dash, DoubleJump
      Burrow, Bash, Grenade=1

anchor WindtornRuins.Escape:
  refill Full
  # (yes, this has to exist apparently, because you can access the escape from all the different anchors in ruins)
  # After you complete the escape, there's a gap in the floor to its right, making the location unreachable with skillsets
  # that would have reached it before completing the escape. That's why this has no outside connections; the paths to here
  # can softlock after achieving the EscapeComplete state, so this anchor is only safe as long as it does nothing else than handling that state.
  quest WindtornRuins.Seir:
    moki, WindtornRuins.HeartBarrier:
      Burrow, Dash, Grapple, DoubleJump OR Glide
      Burrow, DoubleJump, Glide, Grapple  # I think this is fine?
      Burrow, DoubleJump, Launch, Dash OR Glide
      Burrow, Grapple, Launch, Glide
    gorlek, WindwotnRuins.HeartBarrier:
      #/1urrow, Dash, Launch  # Damage=40 Potentially for the spike zig-zag
      #/1urrow, DoubleJump, Launch
      Burrow, Launch, Damage=80  # Can be damage=40 but why not be generous
      Burrow, Dash, DoubleJump  # doable but boy its nasty
      # Maybe there are bash-grenade and sentry-jump paths here, but I'm not sure if they're gorlek.
      # Can't think of things other than this, happy to test if you think of others.

anchor WindtornRuins.LowerRuins at 1969, -4024:  # At the ancient map pedestal
  # requires escape to be done
  quest WindtornRuins.HandToHandComplete:
    moki: LowerWastes.HandToHandMapstone

  pickup WindtornRuins.EscapeRevisitEC:
    moki: WindtornRuins.Seir, Burrow
  conn WindtornRuins.Escape: free  # walk over the invisible sandworm
  conn WindtornRuins.RuinsTP:
    moki, WindtornRuins.HeartBarrier, WindtornRuins.Seir:
      Burrow, Dash, DoubleJump
      Burrow, DoubleJump, Glide
      Burrow, Bash, Glide, Grenade=2
      Launch
    gorlek, WindtornRuins.HeartBarrier, WindtornRuins.Seir:
      SentryJump=2
      Burrow, Dash
      Burrow, DoubleJump, TripleJump
      Burrow, DoubleJump, Bash, Grenade=1
  # connection to upper should be redundant with the conn to tp?

  conn LowerWastes.MinesEntrance:
    moki: Burrow, BreakWall=20

region WeepingRidge:
  moki: Danger=60, Regenerate
  gorlek: Regenerate
  unsafe: free

anchor WeepingRidge.Bottom at 1210, -3830:  # After crossing the portal to weeping ridge
  refill Checkpoint
  refill Health=1
  refill Energy=3:
    moki:
      Weapon, DoubleJump OR Burrow OR Launch
      Bow=1

  state WeepingRidge.ElevatorFightCompleted:
    moki, Combat=2xCrystalMiner+2xShieldCrystalMiner:
      DoubleJump, Dash OR Glide
      Bash, Grenade=1
      Launch

  conn WeepingRidge.LaunchArea:
    moki, WeepingRidge.ElevatorFightCompleted:
      DoubleJump, Dash OR Glide
      Bash, Grenade=1
      Launch
  conn LowerWastes.WestTP:
    moki: WindtornRuins.Seir, Burrow  # Seir to make it a safe path

anchor WeepingRidge.LaunchArea at 1189, -3716:  # After the portal at the top of the elevator
  refill Checkpoint
  refill Health=1

  pickup WeepingRidge.LaunchTree:
    moki:
      Glide
      Launch, Bash OR DoubleJump OR Dash
    unsafe:
      Launch                    # tricky!
      Bash, DoubleJump, Dash    # also kinda tricky?
  pickup WeepingRidge.PortalEX:
    moki: Launch, Bash OR DoubleJump OR Glide OR Dash
    unsafe: Launch
  pickup WeepingRidge.SpikeClimbEX:
    moki: Launch, Bash OR DoubleJump OR Glide OR Dash
    unsafe: Launch
  pickup WeepingRidge.Ore:
    moki: Launch, DoubleJump OR Bash
    unsafe:
      Launch
      Bash, Glide              # fuck with the elemental until he gives you a shot to bash

  conn WillowsEnd.Entry:
    moki: WeepingRidge.ElevatorFightCompleted, Launch, DoubleJump, Dash OR Glide
    unsafe: WeepingRidge.ElevatorFightCompleted, Launch, DoubleJump OR Dash OR Glide  # you really only NEED one of the 3 of em
  conn WeepingRidge.Bottom:
    moki, WeepingRidge.ElevatorFightCompleted:
      Bash, Grenade=1
      Launch

# checkpoint at 1344, -3791

region WillowsEnd:
  moki: Danger=60, Regenerate  # need more than 6 health and Regen to do ANYTHING in willow
  gorlek: Regenerate
  unsafe: free

anchor WillowsEnd.Entry at 495, -3951:  # At the lower door
  refill Checkpoint
  refill Energy=4:
    moki:
      Weapon, Launch
      Bow=1
  # a lot of energy crystals not considered, mostly because they are on the way to hearts which aren't currently tracked

  # state WillowsEnd.TrapHeart:
  #   moki: BreakWall=30, Launch, DoubleJump, Dash

  state WillowsEnd.GrappleWheelsHeart:
    moki, BreakWall=30:
      Grapple, Launch, DoubleJump, Dash
      Grapple, Launch, Glide

  pickup WillowsEnd.SpikesOre:
    moki: Launch, Dash OR Glide
  pickup WillowsEnd.EntryEX:
    moki:
      DoubleJump, Bash, Grenade=2
      Launch
  pickup WillowsEnd.PoisonfallHC:
    moki:
      Grapple, Launch, DoubleJump, Dash
      Grapple, Launch, Glide
      WillowsEnd.GrappleWheelsHeart, DoubleJump, Bash, Grenade=2, Dash OR Glide
      WillowsEnd.GrappleWheelsHeart, Launch

  conn WillowsEnd.InnerTP:
    moki: Launch, Bash, DoubleJump OR Dash OR Glide  # mine in the way, but I think it's managable

# checkpoint at 335, -3887, also with refill, also another refill on the way...
# checkpoint at 399, -3928

anchor WillowsEnd.InnerTP at 422, -3864:  # The teleporter inside
  refill Full

  pickup WillowsEnd.LupoMap:
    moki: DoubleJump OR Dash OR Launch OR Bow=1

  conn Teleporters: free
  conn WillowsEnd.Entry:
    moki:
      BreakWall=20  # open the portal shortcut
      DoubleJump, Dash
      Glide OR Launch
  conn WillowsEnd.AboveInnerTP:
    moki:
      DoubleJump, Bash, Grenade=1, Dash OR Glide
      Launch, DoubleJump OR Dash

anchor WillowsEnd.AboveInnerTP at 530, -3844:  # at the lava pit before bash puzzle
  refill Checkpoint
  refill Energy=4:
    moki:
      Weapon, Launch
      Bow=1, Combat=CrystalMiner OR Bash OR Launch

  conn WillowsEnd.InnerTP:
    moki: Combat=CrystalMiner OR Bash OR Launch
  conn WillowsEnd.East:
    moki:
      DoubleJump, Bash, Grenade=1, Dash OR Glide
      Launch, DoubleJump OR Dash

anchor WillowsEnd.East at 547, -3805:  # To the left of the redirect puzzle
  refill Health=1:
    moki:
      Bash, DoubleJump OR Dash OR Glide
      Launch
  refill Energy=4:
    moki:
      Weapon, Bash, DoubleJump OR Glide
      Bow=1, Bash, DoubleJump OR Dash OR Glide
      Weapon, Launch
      Bow=1, Launch

  # state WillowsEnd.RedirectHeart:
  #   moki: BreakWall=10, BreakWall=30, DoubleJump, Bash, Launch

  pickup WillowsEnd.RedirectEX:
    moki:
      BreakWall=10, Bash, Launch, DoubleJump OR Dash OR Glide
      Bash, Grenade=1, Launch

  conn WillowsEnd.AboveInnerTP:
    moki:
      Glide
      Bash, DoubleJump, Dash
      Launch, DoubleJump OR Dash OR Bash
  conn WillowsEnd.Upper:
    moki: Bash, Launch  # some other paths would be possible, but with how far back the last checkpoint is...

# checkpoint at 614, -3836

anchor WillowsEnd.West at 437, -3840:  # To the left of the one-way above Lupo
  refill Checkpoint
  refill Energy=4:
    moki: Weapon

  # state WillowsEnd.SpinLasersHeart:
  #   moki: BreakWall=30, Launch, DoubleJump OR Dash OR Glide

  conn WillowsEnd.InnerTP:
    moki: BreakWall=20
  conn WillowsEnd.Upper:
    moki, BreakWall=10:  # enemy can mess you up... players will be fine, right?
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch
  conn WillowsEnd.GlideHeartPath:
    moki: DoubleJump, Launch

# checkpoint at 374, -3824

anchor WillowsEnd.GlideHeartPath at 360, -3861:  # Before the last two rooms
  refill Checkpoint
  refill Energy=4:
    moki:
      Weapon, Launch
      Bow=1

  # state WillowsEnd.GlideHeart:
  #   moki: BreakWall=30, DoubleJump, Glide, Launch

  pickup WillowsEnd.WindSpinOre:
    moki: Glide

  conn WillowsEnd.West: free  # :D

# checkpoint at 315, -3862
# checkpoint at 487, -3780

anchor WillowsEnd.Upper at 499, -3748:  # At the upper door
  refill Checkpoint
  refill Energy=4:  # on the way to burrow heart
    unsafe: Weapon, Bash OR Launch

  # state WillowsEnd.BurrowHeart:
  #   moki, BreakWall=30:
  #     Burrow, DoubleJump, Dash, Bash, Grapple, Glide
  #     Burrow, Bash, Grapple, Launch, DoubleJump OR Glide

  # conn LaserRockFight:
  #   moki:
  #     Launch, DoubleJump
  #     Launch, Dash, Glide
  conn WillowsEnd.East:
    moki:
      Combat=CrystalMiner, DoubleJump OR Dash OR Glide
      Bash OR Launch
  conn WillowsEnd.West:
    moki: Launch
  conn WillowsEnd.UpperHeartPath:
    moki:
      DoubleJump, Bash, Grenade=1, Bow=1 OR Spear=1 OR Grenade=1
      Launch

# anchor LaserRockFight:
#   refill Full
#   state WillowsEnd.ElementalDefeated:
#     moki: Combat=smth

anchor WillowsEnd.UpperHeartPath at 506, -3711:  # Right above the exit blocked by vines
  refill Checkpoint
  refill Energy=4:
    moki:
      Weapon, Launch
      Bow=1

  # state WillowsEnd.SpinPortalsHeart:
  #   moki, BreakWall=30:
  #     Bash, Grapple, Launch, DoubleJump, Dash
  #     Bash, Grapple, Launch, Glide

  pickup WillowsEnd.UpperLeftEX:
    moki: Grapple, Launch, DoubleJump OR Dash OR Glide
  pickup WillowsEnd.UpperRightEX:
    moki:
      Bash, Grapple, Launch, DoubleJump, Dash
      Bash, Grapple, Launch, Glide

  conn WillowsEnd.Upper: free

anchor TwillenShop:
  quest GladesTown.TwillenGemQuest:
    moki: LowerWastes.EerieGemQI

  pickup TwillenShop.Overcharge:
    moki: SpiritLight=1200
  pickup TwillenShop.Wingclip:
    moki: SpiritLight=1200
  pickup TwillenShop.Swap:
    moki: SpiritLight=1200
  pickup TwillenShop.Vitality:
    moki: SpiritLight=1200
  pickup TwillenShop.Energy:
    moki: SpiritLight=1200
  pickup TwillenShop.Finesse:
    moki: SpiritLight=1200
  pickup TwillenShop.TripleJump:
    moki: GladesTown.EntryWallBroken, SpiritLight=1200
  pickup TwillenShop.LightHarvest:
    moki: GladesTown.EntryWallBroken, SpiritLight=1200

anchor OpherShop:
  pickup OpherShop.Spike:
    moki: SpiritLight=1200
  pickup OpherShop.SpiritSmash:
    moki: SpiritLight=1200
  pickup OpherShop.SpiritStar:
    moki: SpiritLight=1200
  pickup OpherShop.Blaze:
    moki: SpiritLight=1200
  pickup OpherShop.Sentry:  # used for keystones if necessary; filtered by gen
    moki: SpiritLight=1200
  pickup OpherShop.Teleport:
    moki: GladesTown.EntryWallBroken, SpiritLight=1200
  pickup OpherShop.WaterBreath:
    moki: InnerWellspring.WaterEscape, EastHollow.Voice, SpiritLight=1200

anchor TuleyShop:
  quest GladesTown.RegrowTheGlades:
    moki: TuleyShop.SelaFlowers, TuleyShop.StickyGrass, TuleyShop.Lightcatchers, TuleyShop.BlueMoon, TuleyShop.SpringPlants, TuleyShop.LastTree

  state TuleyShop.LastTreeBranchRejected:  # written out the steps in case they give pickups
    moki: WoodsEntry.LastTreeBranch
  state TuleyShop.SelaFlowers:
    moki: UpperWastes.FlowersSeed
  state TuleyShop.StickyGrass:
    moki: EastPools.GrassSeed
  state TuleyShop.Lightcatchers:
    moki: UpperDepths.LightcatcherSeed
  state TuleyShop.BlueMoon:
    moki: InnerWellspring.BlueMoonSeed
  state TuleyShop.SpringPlants:
    moki: UpperReach.SpringSeed
  state TuleyShop.LastTree:
    moki: WoodsEntry.TreeSeed


# do not delete the newline at the end of the file